#!/bin/sh
while true; do
    xsetroot -fg "#9ffb00" -bg "#171313" -name "$(for f in /tmp/countdown.*; do if [ -e "$f" ]; then if [ "$IDENTIFIER" = "unicode" ]; then printf "⏳%s" "$(tail -1 /tmp/countdown.*)"; fi; break; fi; done)$(if ps -C mpd > /dev/null; then printf "%s [%s #%s (%s)] %s " "$(mpc current -f %artist%)" "$(mpc current -f %album%)" "$(mpc current -f %track%)" "$(mpc current -f %date%)" "$(mpc current -f %title%)"; fi)$(printf "[%2s|%2s %2s|%2s]" "$(cut -b -2 /sys/devices/platform/coretemp.0/hwmon/hwmon1/temp2_input)" "$(cut -b -2 /sys/devices/platform/coretemp.0/hwmon/hwmon1/temp3_input)" $(echo "100 * $(free | awk '(NR == 2) {print $3}') / $(free |awk '(NR == 2) {print $2}')" | bc) $(echo "100 * $(free | awk '(NR == 3) {print $3}') / $(free | awk '(NR == 3) {print $2}')" | bc))[$(CONSTATE=$(wpa_cli status | sed -n '/wpa_state/s/^.*=//p'); case $CONSTATE in 'COMPLETED') CONSSID=$(wpa_cli status | sed -n '/\<ssid\>/s/^.*=//p'); CONIP=$(wpa_cli status | sed -n '/ip_address/s/^.*=//p'); CONRSSI=$(wpa_cli signal_poll | sed -n '/AVG_RSSI/s/^.*=//p'); if [ "$CONRSSI" -gt -35 ]; then printf "%s %s" "$CONSSID" "$CONIP"; elif [ "$CONRSSI" -ge -55 ] && [ "$CONRSSI" -lt -35 ]; then printf "%s %s" "$CONSSID" "$CONIP"; elif [ "$CONRSSI" -ge -75 ] && [ "$CONRSSI" -lt -55 ]; then printf "%s %s" "$CONSSID" "$CONIP"; else printf "%s %s %3s/%3s" "$CONSSID" "$CONIP" $(print "$(cat /sys/devices/pci0000:00/0000:00:1c.1/0000:03:00.0/net/wlp3s0/statistics/tx_bytes) - $z" | bc |numfmt --to iec)" $(print "$(cat /sys/devices/pci0000:00/0000:00:1c.1/0000:03:00.0/net/wlp3s0/statistics/rx_bytes) - $x" | bc | numfmt --to iec)"; z=$(cat /sys/devices/pci0000:00/0000:00:1c.1/0000:03:00.0/net/wlp3s0/statistics/tx_bytes); x=$(cat /sys/devices/pci0000:00/0000:00:1c.1/0000:03:00.0/net/wlp3s0/statistics/rx_bytes); fi;; 'DISCONNECTED') printf "%s" "$CONSTATE";; 'INTERFACE_DISABLED') printf "%s" "$CONSTATE";; 'SCANNING') printf "%s" "$CONSTATE";; 'ASSOCIATING') printf "%s" "$CONSTATE";; 'ASSOCIATED') printf "%s" "$CONSTATE";; 'AUTHENTICATING') printf "%s" "$CONSTATE";; '4WAY_HANDSHAKE') printf "%s" "$CONSTATE";; 'GROUP_HANDSHAKE') printf "%s" "$CONSTATE";; 'INACTIVE') printf "%s" "$CONSTATE";; esac)][$(date '+%F %H:%M:%S')]"
    /bin/sleep 1;
done;
