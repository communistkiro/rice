#!/bin/sh
while true; do
    xsetroot -fg "#9ffb00" -bg "#171313" -name "$(for f in /tmp/alarm.*; do if [ -e "$f" ]; then printf "⏰%-s" "$(cat /tmp/countdown.*)"; fi; break; fi; done;)$(if ps -C mpd > /dev/null; then printf "%s [%s #%s (%s)] %s " "$(mpc current -f %artist%)" "$(mpc current -f %album%)" "$(mpc current -f %track%)" "$(mpc current -f %date%)" "$(mpc current -f %title%)"; fi)$(printf "[%2s°C %4s/%4s %1s/%1s]" "$(cut -b -2 /sys/class/thermal/thermal_zone0/temp)" "$(free --mega | awk '(NR == 2) {print $3}')" "$(free --mega |awk '(NR == 2) {print $2}')" "$(free --giga| awk '(NR == 3) {print $3}')" "$(free --giga |awk '(NR == 3) {print $2}')")[$(CONSTATE=$(wpa_cli status | sed -n '/wpa_state/s/^.*=//p'); case $CONSTATE in 'COMPLETED') CONSSID=$(wpa_cli status | sed -n '/\<ssid\>/s/^.*=//p'); CONIP=$(wpa_cli status | sed -n '/ip_address/s/^.*=//p'); CONRSSI=$(wpa_cli signal_poll | sed -n '/AVG_RSSI/s/^.*=//p'); if [ "$CONRSSI" -gt -35 ]; then printf "%s %s" "$CONSSID" "$CONIP"; elif [ "$CONRSSI" -ge -55 ] && [ "$CONRSSI" -lt -35 ]; then printf "%s %s" "$CONSSID" "$CONIP"; elif [ "$CONRSSI" -ge -75 ] && [ "$CONRSSI" -lt -55 ]; then printf "%s %s" "$CONSSID" "$CONIP"; else printf "%s %s" "$CONSSID" "$CONIP"; fi;; 'DISCONNECTED') printf "%s" "$CONSTATE";; 'INTERFACE_DISABLED') printf "%s" "$CONSTATE";; 'SCANNING') printf "%s" "$CONSTATE";; 'ASSOCIATING') printf "%s" "$CONSTATE";; 'ASSOCIATED') printf "%s" "$CONSTATE";; 'AUTHENTICATING') printf "%s" "$CONSTATE";; '4WAY_HANDSHAKE') printf "%s" "$CONSTATE";; 'GROUP_HANDSHAKE') printf "%s" "$CONSTATE";; 'INACTIVE') printf "%s" "$CONSTATE";; esac)][$(date '+%F %H:%M:%S')]"
    /bin/sleep 1;
done;

