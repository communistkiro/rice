(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"3Law":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("pVnL"),o=n.n(i),r=n("q1tI"),a=n("kV5U"),s=n("fNzW"),c=n("vCsY"),l=n("1H2c"),u=n("hnjF"),d=n("yymn"),m=n("C7sF"),p=n("3aAs"),f=function(e){var t,n="tw-"+Object(l.a)();return e.tabIndex&&(t=e.tabIndex),r.createElement("div",o()({className:Object(s.a)("tw-search-input")},Object(c.a)(e)),r.createElement(u.a,{display:d.g.HideAccessible},r.createElement("label",{htmlFor:e.id?e.id:n},"Search")),r.createElement(p.a,o()({},Object(a.a)(e),{autoCapitalize:e.autoCapitalize,autoFocus:e.autoFocus,autoComplete:e.autoComplete||"off",disabled:e.disabled,error:e.error,icon:m.a.NavSearch,id:e.id?e.id:n,maxLength:e.maxLength,name:e.name,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,onKeyDown:e.onKeyDown,placeholder:e.placeholder,refDelegate:e.refDelegate,spellCheck:e.spellCheck,tabIndex:t,size:e.size,type:p.c.Search,value:e.value,overlay:e.overlay})))};f.displayName="SearchInput",f.displayName="SearchInput"},"7SjK":function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),r=n("cw0r"),a=n("wUQP"),s=n("b5vT"),c=n("/7QA"),l=n("DMoW"),u=n("zb36"),d=n("VYPy"),m=n("ygYM"),p=n("sUnt"),f=n("yymn"),h=(n("WTcl"),[l.xc.BLACK_WHITE,l.xc.HORIZONTAL_FLIP,l.xc.SUNGLASSES,l.xc.THINKING,l.xc.SQUISHED]),b=function(e){var t=e.emote,n=e.index,r=e.context,a=t.modifiers?Object(i.__spreadArrays)(t.modifiers):[];if(c.b.get("subs_emote_modifier_emote_picker_toggle",!1))for(var l=0;6*l<=n;l++){var b=h[l%h.length];a.push({__typename:"EmoteModifier",code:Object(d.b)(b),name:b})}if(!a.length)return null;var k=[t].concat(a.map((function(e){return Object(d.e)(t,e.code)}))),v=Math.min(6,k.length),g=50*(n%6+v>6?n%6+v-6:0),E=k.length<6?m.c.Auto:m.c.Medium;return o.createElement("div",{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(m.a,{show:!0,tail:!0,tailOffset:g+15,direction:r===u.a.FrequentlyUsed?m.b.Bottom:m.b.Top,size:E,offsetX:"-"+g+"px"},o.createElement(p.a,{className:"emote-modifiers-balloon__modified-emotes",display:f.g.Flex,flexWrap:k.length>6?f.i.Wrap:void 0},k.map((function(t,n){return o.createElement(p.a,{key:"emote-button-mod-"+t.id+"--"+n,padding:{x:e.spaced?.5:0},position:f.n.Relative},o.createElement(s.b,{emote:t,isCriticalImage:0===n,onClick:t.isLocked?void 0:e.onClickEmote}))})))))},k=(n("VrOd"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.hoverTimer=0,t.handleClickEmote=function(e){t.props.onClickEmote&&t.props.onClickEmote(e,t.props.context)},t.handleEmoteMouseEnter=function(e){t.setHoverTimer(e.id)},t.handleEmoteMouseLeave=function(){t.setHoverTimer()},t}return Object(i.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.hoverTimer&&clearTimeout(this.hoverTimer)},t.prototype.render=function(){var e=this,t=Object(a.c)(d.a),n=this.props.emotes.map((function(n,i){var a,c=((null===(a=n.modifiers)||void 0===a?void 0:a.length)||0)>0;return o.createElement(p.a,{key:"emote-button-padder-"+n.id+"--"+i,padding:{x:e.props.spaced?.5:0},position:f.n.Relative},o.createElement(s.b,{key:"emote-button-"+n.id+"--"+i,emote:n,isCriticalImage:0===i,onClick:e.handleClickEmote,showOptions:c,onMouseEnter:t&&c?e.handleEmoteMouseEnter:void 0,onMouseLeave:t&&c?e.handleEmoteMouseLeave:void 0}),o.createElement(r.a,{name:d.a},e.state.selectedEmoteID===n.id&&o.createElement(b,{context:e.props.context,emote:n,index:i,onMouseEnter:e.resetHoverTimer,onMouseLeave:e.handleEmoteMouseLeave})))}));return o.createElement(p.a,{display:f.g.Flex,flexWrap:f.i.Wrap},n)},t.prototype.resetHoverTimer=function(){this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=0)},t.prototype.setHoverTimer=function(e){var t=this;this.resetHoverTimer(),this.hoverTimer=setTimeout((function(){t.hoverTimer=0,t.setState({selectedEmoteID:e})}),300)},t}(o.PureComponent));n.d(t,"a",(function(){return k}))},"8EUQ":function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"SUB_CHECKOUT__PRODUCT_KEY",(function(){return a})),n.d(i,"SUB_CHECKOUT__RECIPIENT_KEY",(function(){return s})),n.d(i,"SUB_CHECKOUT__MYSTERY_GIFT_COUNT",(function(){return c})),n.d(i,"SUB_CHECKOUT__GIFTING_ANONYMOUSLY",(function(){return l})),n.d(i,"SUB_CHECKOUT__IS_ONE_TIME_PURCHASE",(function(){return u})),n.d(i,"clearSubscriptionCheckoutKeys",(function(){return m})),n.d(i,"showLoginModalWithCheckoutDispatch",(function(){return p}));var o=n("/7QA"),r=n("y5D0"),a="SUB_CHECKOUT__PRODUCT",s="SUB_CHECKOUT__RECIPIENT",c="SUB_CHECKOUT__MYSTERY_GIFT_COUNT",l="SUB_CHECKOUT__GIFTING_ANONYMOUSLY",u="SUB_CHECKOUT__IS_ONE_TIME_PURCHASE",d=[a,s,c,l,u];function m(){d.forEach((function(e){return o.n.remove(e)}))}function p(e){return function(){return Object(r.e)(e,{onClose:m})}}n.d(t,"a",(function(){return i}))},ANDu:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("mrSG"),o=n("OpME"),r=function(e){var t={};e.forEach((function(e){var n;e.owner&&e.owner.id&&(t[e.owner.id]?(n=t[e.owner.id].emotes).push.apply(n,e.emotes):t[e.owner.id]=Object(i.__assign)(Object(i.__assign)({},e),{emotes:e.emotes.slice()}))}));var n=Object.keys(t),o=[];return n.forEach((function(e){o.push(t[e])})),o},a=function(e,t){return t.reduce((function(t,n){var r;if(null===n.emotes||null===n.emoteSetID)return t;var a=Object(o.c)(n.emotes),s=e.get(n.emoteSetID),c={};return null===(r=null==s?void 0:s.emotes)||void 0===r||r.forEach((function(e){(null==e?void 0:e.id)&&(c[e.id]=e)})),t.concat(a.map((function(e){var t;return Object(i.__assign)(Object(i.__assign)({},e),{isLocked:!s,modifiers:(null===(t=c[e.id])||void 0===t?void 0:t.modifiers)||[]})})))}),[])},s=function(e){return e.tier&&!isNaN(parseInt(e.tier,10))?parseInt(e.tier,10)/1e3:1}},CGUg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("pVnL"),o=n.n(i),r=n("q1tI"),a=n("fNzW"),s=n("vCsY"),c=n("Ws8v"),l=n("yymn"),u=(n("rljb"),function(e){return r.createElement(c.a,o()({className:Object(a.a)({"tw-typeset":!0}),fontSize:e.baseFontSize||l.j.Size5},Object(s.a)(e)),e.children)});u.displayName="Typeset",u.displayName="Typeset"},"DB+C":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_EmotePicker_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"badgeTierEmotes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"EnumValue",value:"LOCKED_PREVIEW"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBadgeTierEmote"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:639}};i.loc.source={body:'#import "twilight/features/emote-picker/components/emote-picker-menu/user-subscription-product-fragment.gql"\n#import "twilight/features/bits/models/bits-badge-tier-emote-fragment.gql"\nquery EmotePicker_EmotePicker_UserSubscriptionProducts($channelOwnerID: ID!) {\ncurrentUser {\nid\nbitsBalance\n}\nuser(id: $channelOwnerID) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\nsubscriptionProducts {\n...emotePickerUserSubscriptionProduct\n}\ncheer {\nid\nbadgeTierEmotes(filter: LOCKED_PREVIEW) {\n...bitsBadgeTierEmote\n}\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\ntier\nplatform\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!o[t]&&(o[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("ZhU4").definitions)),i.definitions=i.definitions.concat(r(n("EJ/0").definitions));var a={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.EmotePicker_EmotePicker_UserSubscriptionProducts=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,o=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var c=r;r=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"EmotePicker_EmotePicker_UserSubscriptionProducts")},DnOo:function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),r=n("ANjH"),a=n("/7QA"),s=n("SDEh"),c=n("8EUQ"),l=n("GnwI"),u=n("br9A"),d=n("dEDE"),m=n("C7sF"),p=n("vCsY"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.openCheckout(),t.props.handleSubAction({action:t.props.overrideSubEventAction?t.props.overrideSubEventAction:u.a.ClickCheckout,checkoutButtonTier:t.props.tierPrice,chargeInterval:t.props.chargeInterval,offerID:t.props.offerID})},t.openCheckout=function(){t.props.isMobileCheckout||a.n.set(c.a.SUB_CHECKOUT__PRODUCT_KEY,t.props.productName)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){if(this.props.isSubbedToTier){var e=Object(a.d)("Subscribed","SubTierButton");return o.createElement(d.a,{ariaLabel:e,"data-test-selector":"subscribe-button__subscribe-tier-button",disabled:!0,icon:m.a.Star},e)}var t;return t=this.props.customSubscribeNowMessage?this.props.customSubscribeNowMessage:Object(a.d)("Subscribe","SubTierButton"),o.createElement(d.a,Object(i.__assign)({ariaLabel:t+" "+this.props.tierPrice,"data-test-selector":"subscribe-button__subscribe-tier-button",icon:this.props.icon,linkTo:this.props.isMobileCheckout?this.props.url:void 0,onClick:this.handleClick,purchase:this.props.tierPrice},Object(p.a)(this.props),{fullWidth:this.props.fullWidth,targetBlank:!!Object(s.b)()||void 0}),t)},t}(o.Component),h=Object(r.d)(Object(l.withLatencyTracking)("SubTierButton",{autoReportInteractive:!0}))(f);n.d(t,"a",(function(){return h}))},"EJ/0":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBadgeTierEmote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBadgeTierSummary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"threshold"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUnlocked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numberOfBitsUntilUnlock"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"fragment bitsBadgeTierEmote on Emote {\nid\nsetID\ntoken\nbitsBadgeTierSummary {\nthreshold\nself {\nisUnlocked\nnumberOfBitsUntilUnlock\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},GLn2:function(e,t,n){},GOKC:function(e,t,n){},JGCS:function(e,t,n){},Lbs1:function(e,t,n){"use strict";var i=n("wqjf");n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b}))},Mb07:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s}));var i,o=n("a5fV");function r(e,t){var n;return null===(n=t.offers)||void 0===n?void 0:n.find((function(t){var n;return(null===(n=t.promotion)||void 0===n?void 0:n.name)===e}))}function a(e){return s(e)?function(e){var t,n,i,r,a,s,c,l,u=null===(t=null==e?void 0:e.promotion)||void 0===t?void 0:t.promoDisplay.discountPercent,d=null===(i=null===(n=null==e?void 0:e.listing)||void 0===n?void 0:n.chargeModel.internal)||void 0===i?void 0:i.previewPrice,m=null===(c=null===(s=null===(a=null===(r=null==e?void 0:e.listing)||void 0===r?void 0:r.chargeModel.internal)||void 0===a?void 0:a.previewPrice)||void 0===s?void 0:s.discount)||void 0===c?void 0:c.price;d&&(l=Object(o.a)(Object(o.d)(d.total,d.exponent),d.currency));return{discountPercent:u,discountPrice:m,price:l}}(e):{}}function s(e){return!!(null==e?void 0:e.eligibility.isEligible)}!function(e){e.FirstPaidSubOffer="first_paid_sub_offer_20_perc_off"}(i||(i={}))},RuiO:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_SubEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:266}};n.loc.source={body:"query Core_Services_Spade_SubEvent_User($channelID: ID! $withVideo: Boolean! $videoID: ID) {\nuser(id: $channelID) {\nid\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\nvideo(id: $videoID) @include(if: $withVideo) {\nid\nbroadcastType\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Core_Services_Spade_SubEvent_User=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,a=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){a.has(e)||(a.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(n,"Core_Services_Spade_SubEvent_User")},TUXZ:function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),r=n("/7QA"),a=n("8/mp"),s=n("2xye"),c=n("dGMd"),l=n("sUnt"),u=n("yymn"),d=n("Ws8v"),m=n("dEDE"),p=n("C7sF"),f=n("uG/k"),h=n("+80q"),b=function(e){var t=e.bitsBalance,n=e.bitsBadgeTier,i=e.channelDisplayName,a=e.channelID,c=e.onClickToken,b=e.numBitsToUnlock,k=e.clickedEmote,v=e.onBackClick,g=o.useCallback((function(){var e="cheer";Math.random()>.999998&&(e="doodlecheer"),c(e+b);var n=k,i={action:"cheer_bits",additional_bits_needed:n.bitsLeftToUnlock,bits_balance:t,bits_tier:n.bitsThreshold,channel_id:a,emote_id:n.id,emoticon_set_id:n.setID};r.o.track(s.SpadeEventType.EmotePickerBitsPreviewClick,i)}),[k,t,a,c,b]),E=o.useCallback((function(){return Object(r.d)("{channelDisplayName} - {bitsTierNumber} Bits Badge Reward",{bitsTierNumber:Object(r.g)(n,{maximumFractionDigits:2}),channelDisplayName:i},"EmotePickerCardBitsEmoteUpsell")}),[n,i]),S=o.useCallback((function(){return Object(r.d)("Use {numBits} more Bits in {channelDisplayName}'s channel to permanently unlock this emote reward.",{numBits:Object(r.f)(b),channelDisplayName:i},"EmotePickerCardBitsEmoteUpsell")}),[i,b]),C=o.useCallback((function(e){var t=e.split(" ");return 6===t.length?t[2]:t[0]}),[]);return o.createElement(l.a,{display:u.g.Flex,flexDirection:u.h.Column},o.createElement(d.a,{padding:{top:.5}},o.createElement(m.a,{type:m.d.Text,icon:p.a.AngleLeft,onClick:v,size:m.b.Small},Object(r.d)("Back","EmotePickerCardBitsEmoteUpsell"))),o.createElement(d.a,{display:u.g.Flex,padding:{x:2,bottom:1}},o.createElement(l.a,{flexShrink:0,padding:{top:.5}},o.createElement(f.a,{src:C(k.srcSet),alt:k.displayName||k.token})),o.createElement(l.a,{padding:{left:1}},o.createElement(h.a,{bold:!0},E()),o.createElement(h.a,null,S()))),o.createElement(d.a,{display:u.g.Flex,padding:{top:.5,bottom:1},justifyContent:u.l.Center},o.createElement(m.a,{type:m.d.Primary,onClick:g,size:m.b.Small},Object(r.d)("Cheer Bits","EmotePickerCardBitsEmoteUpsell"))))},k=n("b5vT"),v=n("7SjK"),g=function(e){var t=null;return e.img&&(t=o.createElement(o.Fragment,null,e.img,o.createElement(l.a,{padding:{right:.5}}))),o.createElement(l.a,{position:u.n.Relative,padding:{x:1,top:.5,bottom:1}},o.createElement(d.a,{alignItems:u.b.Center,display:u.g.Flex,padding:{x:1,y:.5},className:"emote-grid-section__header-title"},t,o.createElement(h.a,{align:u.q.Middle,bold:!0,color:u.f.Alt},e.label)),o.createElement(v.a,{context:e.context,emotes:e.emotes,onClickEmote:e.onClickEmote,spaced:!0}))},E=n("4VQm"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkVisible=function(e,n){t.props.checkVisible(e,n)},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerReceiver(this)},t.prototype.componentWillUnmount=function(){this.unregister&&this.unregister()},t.prototype.render=function(){return o.createElement(o.Fragment,null,this.props.children)},t}(o.Component),C=Object(E.d)((function(e){return{registerReceiver:e.registerReceiver}}))(S),_=n("i4Ys"),y=n("7uM4"),N=function(e){return o.createElement(l.a,{position:u.n.Relative},o.createElement(_.a,{"data-a-target":e.label,onClick:e.onClick,blurAfterClick:!0,selected:e.isActive},o.createElement(l.a,{padding:1,display:u.g.InlineFlex},o.createElement(y.a,{asset:e.icon}))))},P=n("ANjH"),D=n("yR8l"),T=n("OMdY"),I=n("GnwI"),O=n("evnP"),U=n("ANDu"),w=n("DnOo"),B=n("a5fV"),F=n("CGUg"),j=(n("GLn2"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.channelSubEmotes,n=e.channelSubscriptionProducts,s=e.subUpsellClickedEmote,c=n.find((function(e){return e.emoteSetID===s.setID}));if(c||(c=n.find((function(e){var t;return!!(null===(t=e.emotes)||void 0===t?void 0:t.some((function(e){return e&&e.id===s.id})))}))),!c)return null;var b={};t.forEach((function(e){if(e.isLocked&&null!==e.setID&&void 0!==e.setID){var t=n.find((function(t){return t.emoteSetID===e.setID}));t&&(b[t.emoteSetID]=t)}}));var k=Object(U.b)(c),g=Object(r.d)("Subscribe at Tier {tierNumber}",{tierNumber:k},"EmotePickerCard"),E=[],S=[];t.forEach((function(e){var t=b[e.setID];t&&(Object(U.b)(t)<=k?S.push(Object(i.__assign)(Object(i.__assign)({},e),{isLocked:!1})):E.push(e))})),E.sort((function(e,t){var n=b[e.setID],i=b[t.setID],o=Object(U.b)(n);return Object(U.b)(i)-o}));var C=E.concat(S),_=S.length>1?Object(r.d)("{numUnlocked} Emotes Included",{numUnlocked:S.length},"EmotePickerCard"):Object(r.d)("1 Emote Included","EmotePickerCard");return o.createElement(l.a,{className:"emote-sub-upsell"},o.createElement(d.a,{padding:{top:.5}},o.createElement(m.a,{type:m.d.Text,icon:p.a.AngleLeft,onClick:this.props.onBackClick,size:m.b.Small},Object(r.d)("Back","EmotePickerCard"))),o.createElement(d.a,{display:u.g.Flex,padding:{x:2,bottom:1}},o.createElement(l.a,{flexGrow:0,flexShrink:0,padding:{top:.5}},o.createElement(f.a,{src:this.getBigImageSrc(s.srcSet),alt:s.displayName||""})),o.createElement(l.a,{flexGrow:1,flexShrink:1,padding:{left:1}},o.createElement(h.a,{bold:!0},this.renderCopyHeader(k.toString())),o.createElement(h.a,null,this.renderCopyBody(k.toString(),S.length)))),o.createElement(l.a,{display:u.g.Flex,alignItems:u.b.Center,justifyContent:u.l.Center,padding:{x:2}},o.createElement(w.a,{customSubscribeNowMessage:g,isSubbedToTier:!1,fullWidth:!0,tierPrice:Object(B.e)(c),handleSubAction:this.props.handleSubAction,productName:c.name,url:c.url})),o.createElement(F.a,null,o.createElement("hr",{className:"emote-sub-upsell__divider"})),o.createElement(a.b,{className:"emote-sub-upsell__content"},o.createElement(l.a,null,o.createElement(l.a,{padding:{x:2}},o.createElement(h.a,{bold:!0},_)),o.createElement(l.a,{padding:{x:1,top:.5,bottom:3}},o.createElement(v.a,{emotes:C,spaced:!0,onClickEmote:this.props.onClickEmote})))))},t.prototype.renderCopyHeader=function(e){return Object(r.d)("{channelDisplayName} - Tier {tierNumber} Subscription",{tierNumber:e,channelDisplayName:this.props.channelDisplayName},"EmotePickerCard")},t.prototype.renderCopyBody=function(e,t){return 1===t?Object(r.d)("To unlock 1 emote and more subscriber benefits, subscribe at Tier {tierNumber}",{tierNumber:e},"EmotePickerCard"):Object(r.d)("To unlock {numEmotes} emotes and more subscriber benefits, subscribe at Tier {tierNumber}.",{tierNumber:e,numEmotes:t},"EmotePickercard")},t.prototype.getBigImageSrc=function(e){var t=e.split(" ");return 6===t.length?t[2]:t[0]},t}(o.Component)),L=n("XQnt"),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.data&&(!this.props.data.loading||this.props.data.error)&&e.data&&e.data.loading&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return o.createElement(j,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelSubscriptionProducts:this.subscriptionProducts,handleSubAction:this.props.handleSubAction,onBackClick:this.props.onBackClick,onClickEmote:this.props.onClickEmote,subUpsellClickedEmote:this.props.subUpsellClickedEmote})},Object.defineProperty(t.prototype,"subscriptionProducts",{get:function(){return this.props.data&&this.props.data.user&&this.props.data.user.subscriptionProducts?Object(T.b)(this.props.data.user.subscriptionProducts):this.props.channelSubscriptionProducts},enumerable:!0,configurable:!0}),t}(o.Component),M=Object(P.d)(Object(D.a)(L,{options:function(e){return{variables:{channelID:e.channelID,withOffers:Object(O.b)()}}}}),Object(I.withLatencyTracking)("EmoteSubUpsell"))(A),G=n("zb36"),x=n("GzyO"),R=n("OpME"),V=n("4rCz"),q=n("jzo8"),H=n("0nsv"),K=(n("glr9"),function(e){return o.createElement(q.a,null,{message:o.createElement(H.a,{description:Object(V.d)("{emoteCount, plural, one {You unlocked # emote by subscribing to {channelDisplayName}!} other {You unlocked # emotes by subscribing to {channelDisplayName}!}}",{emoteCount:e.emoteCount,channelDisplayName:e.channelDisplayName},"SubBenefitCallout")}),closeButton:{ariaLabel:"Close",onClick:e.onDismiss},padding:1,figure:o.createElement(l.a,{className:"sub-benefit-callout__figure-container"},o.createElement("svg",{className:"sub-benefit-callout__figure",width:"100%",height:"100%",viewBox:"0 0 20 20"},o.createElement("circle",{cy:"10",cx:"10",r:"7.5",className:"sub-benefit-callout__figure__circle"}),o.createElement("svg",{className:"sub-benefit-callout__figure__emoticon"},p.b[p.a.Emoticons].path)))})}),W=n("HH5h"),z=n("ygYM"),Q=n("7d/q"),Y=n("3Law"),X=n("XQbB"),$=n("PL8s");n("JGCS");n.d(t,"a",(function(){return ee}));var J,Z;!function(e){e.FrequentlyUsedEmotes="FREQUENTLY_USED_EMOTES",e.ChannelEmotes="CHANNEL_EMOTES",e.AllEmotes="ALL_EMOTES"}(J||(J={})),function(e){e.FrequentlyUsed="FREQUENTLY_USED",e.ChannelUnlocked="CHANNEL_UNLOCKED",e.Channel="CHANNEL",e.Unlocked="UNLOCKED",e.Global="GLOBAL"}(Z||(Z={}));var ee=function(e){function t(t){var n,i=e.call(this,t)||this;return i.renderTriggerAndGridForChannelUnlockedEmotes=function(){var e=i.getUnlockedEmotes();return e&&null!==i.props.channelDisplayName?i.renderTriggerAndGridForEmoteSet(Z.ChannelUnlocked,e.emotes.length,i.getCurrentChannelUnlockedEmoteGrid):null},i.renderTriggerAndGridForChannelEmotes=function(){return o.createElement(l.a,{className:i.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:i.saveChannelEmotesRef},i.renderTriggerAndGridForEmoteSet(Z.Channel,i.props.sortedChannelEmotes.length,i.getCurrentChannelEmoteGrid))},i.renderTriggerAndGridForUnlockedEmotes=function(){return o.createElement(l.a,{refDelegate:i.saveAllEmotesRef},i.renderTriggerAndGridForEmoteSet(Z.Unlocked,i.props.unlockedEmotes.length,i.getUnlockedEmotesGrid))},i.renderTriggerAndGridForGlobalEmotes=function(){return i.renderTriggerAndGridForEmoteSet(Z.Global,i.props.globalEmotes.length,i.getGlobalEmotesGrid)},i.renderTriggerAndGridForSubsEmotes=function(){return i.props.isLoggedIn?i.props.otherChannelEmoteSets.filter((function(e){return e.owner&&e.owner.displayName&&e.emotes.length>0})).map((function(e){return i.renderTriggerAndGridForEmoteSet(e.owner.displayName,e.emotes.length,(function(){return i.getOtherSubEmoteGrid(e)}))})):null},i.getFrequentlyUsedEmoteGrid=function(){return 0===i.props.frequentlyUsedEmotes.length?null:o.createElement(l.a,{className:"emote-picker__content-block",refDelegate:i.saveFrequentlyUsedEmotesRef},o.createElement(g,{context:G.a.FrequentlyUsed,emotes:i.props.frequentlyUsedEmotes,label:Object(r.d)("Frequently Used","EmotePickerCard"),onClickEmote:i.onClickEmote}))},i.getCurrentChannelEmoteGrid=function(){return 0===i.props.sortedChannelEmotes.length||null===i.props.channelDisplayName?null:o.createElement(o.Fragment,null,i.props.shouldShowSubBenefitCallout&&o.createElement(l.a,{padding:{x:2,top:1}},o.createElement(K,{channelDisplayName:i.props.channelDisplayName,emoteCount:i.props.channelSubEmotes.filter((function(e){return!e.isLocked})).length,onDismiss:i.onDismissSubBenefitCallout})),o.createElement(g,{context:G.a.CurrentChannel,emotes:i.props.sortedChannelEmotes,img:o.createElement(W.a,{src:i.props.channelProfileImageURL,size:30,alt:i.props.channelDisplayName,userLogin:i.props.channelLogin}),label:i.props.channelDisplayName,onClickEmote:i.onClickEmote}))},i.getCurrentChannelUnlockedEmoteGrid=function(){var e=i.getUnlockedEmotes();return e&&null!==i.props.channelDisplayName?o.createElement(l.a,{className:i.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:i.saveChannelEmotesRef},o.createElement(g,{context:G.a.CurrentChannel,emotes:e.emotes,label:Object(r.d)("Unlocked with Channel Points","EmotePickerCard"),onClickEmote:i.onClickEmote})):null},i.getOtherSubEmoteGrid=function(e){return e.owner&&e.owner.displayName&&e.emotes.length>0?o.createElement(l.a,{key:"emote-grid--"+e.id+"-emotes",className:"emote-picker__content-block"},o.createElement(g,{context:G.a.OtherChannel,emotes:e.emotes,img:o.createElement(W.a,{src:e.owner.profileImageURL,size:30,alt:e.owner.displayName,userLogin:e.owner.login}),label:e.owner.displayName,onClickEmote:i.onClickEmote})):null},i.getUnlockedEmotesGrid=function(){return i.props.isLoggedIn&&0!==i.props.unlockedEmotes.length?o.createElement(l.a,{key:"emote-grid--unlocked-emotes",className:"emote-picker__content-block"},o.createElement(g,{context:G.a.Unlocked,emotes:i.props.unlockedEmotes,label:Object(r.d)("Unlocked","EmotePickerCard"),onClickEmote:i.onClickEmote})):null},i.getGlobalEmotesGrid=function(){return i.props.isLoggedIn&&0!==i.props.globalEmotes.length?o.createElement(l.a,{key:"emote-grid--global-emotes",className:"emote-picker__content-block"},o.createElement(g,{context:G.a.Global,emotes:i.props.globalEmotes,label:Object(r.d)("Global","EmotePickerCard"),onClickEmote:i.onClickEmote})):null},i.getUnlockedEmotes=function(){return i.props.allEmoteSets.find((function(e){return e.id===c.a}))},i.onTabNavClick=function(e){if(e.currentTarget.getAttribute("data-a-target")){var t=e.currentTarget.getAttribute("data-a-target");i.selectNavTab(t)}},i.selectNavTab=function(e){var t;i.setState({selectedNavTab:e});var n=i.getRefForTab(e);n&&(null===(t=i.scroll)||void 0===t?void 0:t.scrollContent)&&(i.scroll.scrollContent.scrollTop=n.offsetTop)},i.getRefForTab=function(e){switch(e){case J.FrequentlyUsedEmotes:if(i.frequentlyUsedEmotesRef)return i.frequentlyUsedEmotesRef;break;case J.ChannelEmotes:if(i.channelEmotesRef)return i.channelEmotesRef;break;case J.AllEmotes:if(i.allEmotesRef)return i.allEmotesRef}return null},i.onClickEmote=function(e,t){if(i.props.onClickToken&&!e.isLocked){i.props.onClickToken(e.displayName||e.token,e.id);var n={channel_id:i.props.channelID||void 0,chatroom_id:i.props.roomID,context:t,emote_picker_sid:i.props.emotePickerSessionID,emote_id:e.id,emoticon_set_id:e.setID,generated_by:i.props.emotePickerSource};r.o.track(s.SpadeEventType.EmotePickerClickthrough,n)}else e.isLocked&&(e.isBitsTierEmote?i.onClickBitsLockedEmote(e):i.props.areSubsDisabled||i.onClickLockedEmote(e))},i.collectDataScience=function(e){var t=G.b.EmotePicker;null!==i.state.bitsUpsellClickedEmote?t=G.b.EmotePickerBitsPreview:null!==i.state.subUpsellClickedEmote&&(t=G.b.EmotePickerSubscriptionPreview);var n={channel_id:i.props.channelID||null,emote_id:e.id,emote_picker_sid:i.props.emotePickerSessionID,emoticon_set_id:e.setID?e.setID:null,location:t,is_subscriber:!!i.props.subscriberTier&&i.props.subscriberTier>0,user_subscription_tier:i.props.subscriberTier?i.props.subscriberTier:null,bits_balance:i.props.bitsBalance};if(e.isBitsTierEmote){var o=e;n.bits_tier=o.bitsThreshold,n.additional_bits_needed=o.bitsLeftToUnlock}else{var r=i.props.channelSubscriptionProducts.find((function(t){if(t.emoteSetID&&t.emoteSetID===e.setID)return t}));r&&(n.emote_subscription_tier=Number(r.tier))}return n},i.saveScrollRef=function(e){return i.scroll=e},i.saveAllEmotesRef=function(e){return i.allEmotesRef=e},i.saveChannelEmotesRef=function(e){return i.channelEmotesRef=e},i.saveFrequentlyUsedEmotesRef=function(e){return i.frequentlyUsedEmotesRef=e},i.checkVisible=function(e,t){if(t){i.state.hasUserInteracted||i.setState({hasUserInteracted:!0});var n=i.state.selectedNavTab,o=i.allEmotesRef&&t.offset>=i.allEmotesRef.offsetTop;n=i.channelEmotesRef&&t.offset>=i.channelEmotesRef.offsetTop&&!o?J.ChannelEmotes:o?J.AllEmotes:J.FrequentlyUsedEmotes,i.state.selectedNavTab!==n&&i.setState({selectedNavTab:n})}},i.onClickLockedEmote=function(e){var t=i.collectDataScience(e);i.setState({subUpsellClickedEmote:e}),r.o.track(s.SpadeEventType.EmotePickerPreviewClick,t)},i.onClickBitsLockedEmote=function(e){var t=i.collectDataScience(e);i.setState({bitsUpsellClickedEmote:e}),r.o.track(s.SpadeEventType.EmotePickerPreviewClick,t)},i.onBackClick=function(){i.setState({subUpsellClickedEmote:null,bitsUpsellClickedEmote:null,selectedNavTab:J.FrequentlyUsedEmotes})},i.handleFilterChange=function(e){var t=e.target.value,n=t.toLowerCase();i.setState({filter:n,inputValue:t,filteredEmotes:i.filterEmoteSets(i.props.allEmoteSets,n),selectedNavTab:J.FrequentlyUsedEmotes})},i.filterEmoteSets=function(e,t){var n=[];e.forEach((function(e){e.emotes.filter((function(e){return!(!e.displayName||!e.displayName.toLowerCase().includes(t))||e.token.toLowerCase().includes(t)})).forEach((function(t){t.setID=e.id,n.push(t)}))}));var i=Object(x.f)(),o=0===Object.keys(i).length?void 0:i,r=Object(R.f)(n,t,o);return Object(R.e)(r)},i.onDismissSubBenefitCallout=function(){r.o.track(s.SpadeEventType.EmotePickerNotificationInteraction,{user_id:i.props.currentUserID,channel_id:i.props.channelID,action:"dismiss"}),i.props.dismissSubBenefitCallout&&i.props.dismissSubBenefitCallout()},i.state={filter:"",filteredEmotes:[],hasUserInteracted:!1,inputValue:"",selectedNavTab:J.FrequentlyUsedEmotes,subUpsellClickedEmote:null,bitsUpsellClickedEmote:null,visibleGrids:(n={},n[Z.FrequentlyUsed]=!0,n)},i}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){if(this.props.emotePickerSessionID&&this.props.channelID){var e={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};r.o.track(s.SpadeEventType.ViewedEmotePicker,e)}this.props.shouldShowSubBenefitCallout&&this.selectNavTab(J.ChannelEmotes)},t.prototype.componentDidUpdate=function(e){var t;if(this.props.channelID&&this.props.emotePickerSessionID&&!e.emotePickerSessionID){var n={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};r.o.track(s.SpadeEventType.ViewedEmotePicker,n)}var i=this.getRefForTab(this.state.selectedNavTab);(null===(t=this.scroll)||void 0===t?void 0:t.scrollContent)&&!this.state.hasUserInteracted&&i&&(this.scroll.scrollContent.scrollTop=i.offsetTop),!e.visible&&this.props.visible&&this.setState({inputValue:"",filter:"",subUpsellClickedEmote:null,bitsUpsellClickedEmote:null})},t.prototype.render=function(){return o.createElement(z.a,{"data-a-target":"emote-picker",direction:this.props.direction?this.props.direction:z.b.TopRight,size:this.props.size?this.props.size:z.c.Medium,noTail:!0,show:this.props.visible,offsetX:this.props.offsetX},o.createElement(l.a,{className:"emote-picker"},this.renderView()))},t.prototype.renderView=function(){var e=null;null===this.state.subUpsellClickedEmote&&null===this.state.bitsUpsellClickedEmote&&(e=o.createElement(o.Fragment,null,this.renderTopContent(),this.renderTabContent()));var t=null;null!==this.props.channelDisplayName&&null!==this.props.channelID&&null!==this.state.subUpsellClickedEmote&&(t=o.createElement(M,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelID:this.props.channelID,channelSubscriptionProducts:this.props.channelSubscriptionProducts,handleSubAction:this.props.handleSubAction,onBackClick:this.onBackClick,onClickEmote:this.onClickLockedEmote,subUpsellClickedEmote:this.state.subUpsellClickedEmote}));var n=null;if(null!==this.props.channelDisplayName&&null!==this.state.bitsUpsellClickedEmote){var i=this.state.bitsUpsellClickedEmote;n=o.createElement(b,{bitsBalance:this.props.bitsBalance,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,clickedEmote:i,bitsBadgeTier:i.bitsThreshold,numBitsToUnlock:i.bitsLeftToUnlock,onBackClick:this.onBackClick,onClickToken:this.props.onClickToken})}return o.createElement(o.Fragment,null,n,t,e)},t.prototype.renderTopContent=function(){return o.createElement(l.a,{padding:{top:3,x:2}},o.createElement(l.a,{position:u.n.Absolute,padding:{top:.5,right:.5},attachRight:!0,attachTop:!0},o.createElement(Q.a,{ariaLabel:Object(r.d)("Close emote picker","EmotePickerClose"),blurAfterClick:!0,"data-test-selector":"emote-picker-close",icon:p.a.Close,onClick:this.props.onClickClose,size:Q.b.Small,type:Q.c.Secondary})),o.createElement(Y.a,{autoFocus:!0,onChange:this.handleFilterChange,placeholder:Object(r.d)("Search for Emotes","EmotePickerCard"),value:this.state.inputValue}))},t.prototype.renderTabContent=function(){return this.props.gqlError?o.createElement(l.a,null,o.createElement(h.a,{"data-test-selector":"emote-picker-menu-error-text",color:u.f.Error},Object(r.d)("Unable to load available emotes.","EmotePickerCard"))):this.props.loading?o.createElement(l.a,{alignItems:u.b.Center,display:u.g.Flex,fullHeight:!0,fullWidth:!0,justifyContent:u.l.Center,padding:1},o.createElement(X.a,null)):""!==this.state.filter?this.renderSearchContent():o.createElement(o.Fragment,null,o.createElement(a.b,{scrollRef:this.saveScrollRef,className:"emote-picker__tab-content",contentClassName:"emote-picker__scroll-container"},o.createElement(l.a,{padding:{bottom:5}},o.createElement(C,{checkVisible:this.checkVisible},this.getFrequentlyUsedEmoteGrid(),this.renderTriggerAndGridForChannelUnlockedEmotes(),this.renderTriggerAndGridForChannelEmotes(),this.renderTriggerAndGridForSubsEmotes(),this.renderTriggerAndGridForUnlockedEmotes(),this.renderTriggerAndGridForGlobalEmotes()))),this.renderTabNav())},t.prototype.renderTriggerAndGridForEmoteSet=function(e,t,n){var i,r,s=this;if(this.isEmoteGridVisible(e))return n();var c=function(){s.showEmoteGrid(e)},l=6,u=38,d=38,m=document.getElementsByClassName(k.a)[0];m&&(u=m.clientHeight,d=m.clientWidth),(null===(r=null===(i=this.scroll)||void 0===i?void 0:i.root)||void 0===r?void 0:r.offsetWidth)&&(l=this.scroll.root.offsetWidth/u);var p=d*Math.max(t/l,1);return o.createElement(o.Fragment,{key:e},o.createElement(a.c,{pixelThreshold:20,visible:c}),o.createElement($.a,{height:p,lineCount:1}),o.createElement(a.c,{pixelThreshold:20,visible:c}))},t.prototype.showEmoteGrid=function(e){this.setState((function(t){var n;return{visibleGrids:Object(i.__assign)(Object(i.__assign)({},t.visibleGrids),(n={},n[e]=!0,n))}}))},t.prototype.isEmoteGridVisible=function(e){return this.state.visibleGrids[e]},t.prototype.renderSearchContent=function(){var e=Object(r.d)('No Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard");return this.state.filteredEmotes.length>0&&(e=Object(r.d)('Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard")),o.createElement(a.b,{className:"emote-picker__tab-content"},o.createElement(l.a,{position:u.n.Relative,padding:{x:1,top:1,bottom:3},className:"emote-picker__content-block"},o.createElement(d.a,{padding:{x:1}},o.createElement(h.a,{bold:!0,ellipsis:!0},e)),o.createElement(v.a,{emotes:this.state.filteredEmotes,onClickEmote:this.onClickEmote,spaced:!0})))},t.prototype.renderTabNav=function(){var e=null;this.props.sortedChannelEmotes.length>0&&(e=o.createElement(N,{isActive:this.state.selectedNavTab===J.ChannelEmotes,label:J.ChannelEmotes,icon:p.a.NavChannels,onClick:this.onTabNavClick}));var t=null;return this.props.isLoggedIn&&(t=o.createElement(N,{isActive:this.state.selectedNavTab===J.AllEmotes,label:J.AllEmotes,icon:p.a.EmoticonsAll,onClick:this.onTabNavClick})),e||t?o.createElement(d.a,{display:u.g.Flex,background:u.d.Alt,borderRadius:{bottomLeft:u.e.Medium,bottomRight:u.e.Medium},fullWidth:!0},o.createElement(N,{isActive:this.state.selectedNavTab===J.FrequentlyUsedEmotes,label:J.FrequentlyUsedEmotes,icon:p.a.GlyphLength,onClick:this.onTabNavClick}),e,t):null},t}(o.PureComponent)},VrOd:function(e,t,n){},WTcl:function(e,t,n){},XQnt:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_SubUpsell_PriceInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withOffers"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPriceInfoSubscriptionProduct"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerSubUpsellPriceInfoSubscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"offers"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withOffers"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subProductOfferFragment"},directives:[]}]}}]}}],loc:{start:0,end:692}};i.loc.source={body:'#import "twilight/features/emote-picker/components/emote-picker-menu/user-subscription-product-fragment.gql"\n#import "twilight/features/sub-modal/fragments/sub-product-offer.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nquery EmotePicker_SubUpsell_PriceInfo($channelID: ID! $withOffers: Boolean = false) {\nuser(id: $channelID) {\nid\nsubscriptionProducts {\n...emotePickerSubUpsellPriceInfoSubscriptionProduct\n}\n}\n}\nfragment emotePickerSubUpsellPriceInfoSubscriptionProduct on SubscriptionProduct {\n...emotePickerUserSubscriptionProduct\npriceInfo {\n...subscriptionProductPriceInfo\n}\noffers @include(if: $withOffers) {\n...subProductOfferFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!o[t]&&(o[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("ZhU4").definitions)),i.definitions=i.definitions.concat(r(n("Wd+u").definitions)),i.definitions=i.definitions.concat(r(n("35qb").definitions));var a={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.EmotePicker_SubUpsell_PriceInfo=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,o=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var c=r;r=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"EmotePicker_SubUpsell_PriceInfo")},YVOQ:function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),r=n("f00E"),a=n("4rCz"),s=n("1rIY"),c=n("8EUQ"),l=n("KriR"),u=n("br9A"),d={channel:{login:"",id:"",displayName:null},handleSubMenuAction:function(){},modalSessionId:"",subBadges:[],gifterBadges:[],canGiftInChannel:!0,channelId:null,giftingAnonymously:!1,hasPrime:!1,hidesGiftCount:!1,isNonStandardSub:!1,onAnonymousGiftingSelect:function(){return null},primeSubRenewalDate:null,sessionUser:void 0,subscriptionProducts:[],subscriptionBenefit:null,subscriptionGiftCount:0,tenure:null,streakTenure:null},m=Object(s.a)("SubModalContext",d),p=m.context,f=m.withContext,h=function(e){function t(n){var i=e.call(this,n)||this;return i.state=d,i.onAnonymousGiftingSelect=function(e){i.setState({giftingAnonymously:e.target.checked}),i.handleSubMenuAction({action:u.a.ClickAnonymousGiftCheckbox})},i.handleSubMenuAction=function(e){var t,n;new Set([u.a.ClickCheckout,u.a.BuyGiftSub,u.a.BuyMysteryGift,u.a.BuyCustomMysteryGift,u.a.BuyGiftToPaidUpgrade,u.a.BuyPaidUpgrade,u.a.BuyContinueSub,u.a.BuyPrimeToPaid,u.a.BuyQuickSub]).has(e.action)&&i.checkAndDisplaySubscriptionCheckout(e.wasShownMoreBundles,e.chargeInterval,e.offerID);var o=!!i.props.subscriptionBenefit;Object(u.c)({action:e.action||"",buttonCTA:e.buttonCTA||i.props.subButtonCTA,channelLogin:i.props.channel.login,channelID:i.props.channel.id,checkoutButtonTier:e.checkoutButtonTier,chargeInterval:e.chargeInterval,cumulativeTenureMonths:i.state.tenure?i.state.tenure.months:null,hasSubCredit:i.props.canPrimeSubscribe,hostChannelID:null===(t=i.props.hostChannel)||void 0===t?void 0:t.id,hostChannelLogin:null===(n=i.props.hostChannel)||void 0===n?void 0:n.login,isAnonymous:e.isAnonymous,isMenuOpen:e.action!==u.a.OpenSubMenu,isSingleMonth:e.isSingleMonth,mysteryGiftCount:e.mysteryGiftCount,sub_location:i.props.subLocation,modal:!o,modalLevel:o?"":"top_page",modalSessionId:i.state.modalSessionId,showPrimeContent:i.props.inPrimeRegion,giftRecipient:e.giftRecipient||null})},i.state={channel:{id:i.props.channel.id,login:i.props.channel.login,displayName:i.props.channel.displayName},countryCode:i.props.countryCode,subBadges:t.filterBadges(i.props.subBadges||[],i.props.globalBadges||[]),gifterBadges:t.filterGifterBadges(i.props.globalBadges||[]),subscriptionProducts:t.filterProducts(i.props.subscriptionProducts||[]),canGiftInChannel:t.canSendGift(i.props.subscriptionProducts||[]),channelId:i.props.channel.id,giftingAnonymously:!1,hasPrime:i.props.hasPrime,hidesGiftCount:i.props.hidesGiftCount,isNonStandardSub:t.isNonStandardSub(i.props.subscriptionProducts||[]),primeSubRenewalDate:i.props.primeSubRenewalDate,onAnonymousGiftingSelect:i.onAnonymousGiftingSelect,sessionUser:i.props.sessionUser,subscriptionGiftCount:i.props.subscriptionGiftCount,subscriptionBenefit:i.props.subscriptionBenefit,tenure:i.props.tenure,handleSubMenuAction:i.handleSubMenuAction,modalSessionId:i.props.modalSessionId||Object(r.c)(),streakTenure:i.props.streakTenure},i}return Object(i.__extends)(t,e),t.getDerivedStateFromProps=function(e,n){var i=n.modalSessionId;return i!==e.modalSessionId&&(i=e.modalSessionId?e.modalSessionId:Object(r.c)()),{channel:{id:e.channel.id,login:e.channel.login,displayName:e.channel.displayName},countryCode:e.countryCode,subBadges:t.filterBadges(e.subBadges||[],e.globalBadges||[]),gifterBadges:t.filterGifterBadges(e.globalBadges||[]),subscriptionProducts:t.filterProducts(e.subscriptionProducts||[]),canGiftInChannel:t.canSendGift(e.subscriptionProducts||[]),channelId:e.channel.id,isNonStandardSub:t.isNonStandardSub(e.subscriptionProducts||[]),hasPrime:e.hasPrime,modalSessionId:i,primeSubRenewalDate:e.primeSubRenewalDate,sessionUser:e.sessionUser,subscriptionGiftCount:e.subscriptionGiftCount||0,subscriptionBenefit:e.subscriptionBenefit,tenure:e.tenure,streakTenure:e.streakTenure}},t.filterProducts=function(e){return e.filter((function(e){return null!==e}))},t.filterBadges=function(e,t){var n,i=e.filter((function(e){return"subscriber"===(null==e?void 0:e.setID)})).sort((function(e,t){return Number((null==e?void 0:e.version)||0)-Number((null==t?void 0:t.version)||0)}));if("0"===(null===(n=i[0])||void 0===n?void 0:n.version))return i;var o=null==t?void 0:t.find((function(e){return"subscriber"===(null==e?void 0:e.setID)&&"0"===(null==e?void 0:e.version)}));return o&&i.unshift(o),i},t.filterGifterBadges=function(e){return e.filter((function(e){return"sub-gifter"===(null==e?void 0:e.setID)})).sort((function(e,t){return Number((null==e?void 0:e.version)||0)-Number((null==t?void 0:t.version)||0)}))},t.isNonStandardSub=function(e){return 1===e.length},t.canSendGift=function(e){var t,n;return!!(null===(n=null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.self)||void 0===n?void 0:n.canGiftInChannel)},t.prototype.componentDidMount=function(){this.handleSubMenuAction({action:u.a.SubMenuReady})},t.prototype.render=function(){return o.createElement(p.Provider,{value:this.state},this.props.children)},t.prototype.checkAndDisplaySubscriptionCheckout=function(e,t,n){var i=a.o.get(c.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(i){var o=this.props.extraSubProductNames;if(this.state.subscriptionProducts.find((function(e){return e.name===i}))||(null==o?void 0:o.includes(i))){var r=this.props,s=r.sessionUser,u=r.showLoginModal;if(s){var d=this.props.showSubscriptionCheckout,m=this.state.modalSessionId;d({isAnonymous:a.o.get(c.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),isOneTimePurchase:a.o.get(c.a.SUB_CHECKOUT__IS_ONE_TIME_PURCHASE,!1),mysteryGiftCount:Number(a.o.get(c.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:i,recipientLogin:a.o.get(c.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:l.a.ChannelSubscribeButton,tenantTracking:{sub_session_id:m,from_show_more_bundles:e}},chargeInterval:t,offerID:n})}else u()}else c.a.clearSubscriptionCheckoutKeys()}},t}(o.Component);n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}))},ZhU4:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductEmote"},directives:[]}]}}]}}],loc:{start:0,end:226}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-emote.gql"\nfragment emotePickerUserSubscriptionProduct on SubscriptionProduct {\nid\nemoteSetID\nname\nprice\ntier\nurl\nemotes {\n...subscriptionProductEmote\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};i.definitions=i.definitions.concat(n("dq0Q").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!o[t]&&(o[t]=!0,!0)}))),e.exports=i},a5fV:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var i=n("/7QA");function o(e,t){return e/Math.pow(10,t)}function r(e,t){return Object(i.f)(e,{style:"currency",currency:t})}function a(e){var t,n,i,o;if(c(e)||!e.priceInfo)return e.price;if(function(e){return"offers"in e}(e)&&e.offers){var r=null===(o=null===(i=null===(n=null===(t=e.offers.find((function(e){return e.eligibility.isEligible&&!!e.promotion})))||void 0===t?void 0:t.listing)||void 0===n?void 0:n.chargeModel)||void 0===i?void 0:i.internal)||void 0===o?void 0:o.previewPrice;if(null==r?void 0:r.discount)return s({exponent:r.exponent,currency:r.currency,total:r.discount.total})}return s(e.priceInfo)}function s(e){return r(o(e.total,e.exponent),e.currency)}function c(e){return!("priceInfo"in e)}function l(e,t){if(c(e)||!e.priceInfo)return e.price;var n=o(e.priceInfo.total,e.priceInfo.exponent);return r(n*=t,e.priceInfo.currency)}},b5vT:function(e,t,n){"use strict";var i,o,r=n("TSYQ"),a=n("q1tI"),s=n("/7QA"),c=n("C7sF"),l=n("7uM4"),u=n("Ws8v"),d=n("yymn");!function(e){e[e.LOCK=0]="LOCK",e[e.BITS=1]="BITS"}(o||(o={}));var m=((i={})[o.LOCK]=c.a.Lock,i[o.BITS]=c.a.Bits,i),p=function(e){var t=e.lockIcon,n=a.useMemo((function(){return a.createElement(l.a,{asset:m[t],height:10,width:10})}),[t]);return a.createElement(u.a,{background:d.d.Overlay,borderRadius:d.e.Small,className:"emote-button__lock","data-test-selector":"emote-button-lock",display:d.g.InlineFlex,justifyContent:d.l.Center,position:d.n.Absolute,zIndex:d.s.Above},n)},f=n("GnwI"),h=n("b7S+"),b=n("hnjF"),k=(n("GOKC"),function(e){var t=r("emote-button__link",{"emote-button__link--locked":!e.onClick}),n=e.emote,i=n.displayName,c=n.srcSet;if(!c)return null;var l=c.split(" ")[0],u=a.createElement("img",{className:"emote-picker__image",src:l,srcSet:c,alt:i});if(e.isCriticalImage){for(var m={},k=0,v=c.split(",");k<v.length;k++){var g=v[k].trim().split(" "),E=g[1],S=g[0];m[E]=S}u=a.createElement(f.CriticalImage,{className:"emote-picker__emote-image",src:l,srcSet:m,alt:i||""})}var C=a.createElement(p,{lockIcon:e.emote.isBitsTierEmote?o.BITS:o.LOCK});return a.createElement("div",{className:"emote-button"},a.createElement(h.a,{label:i||Object(s.d)("Emote","EmoteButton"),direction:h.c.Bottom},a.createElement(b.a,{display:d.g.Flex,alignItems:d.b.Center,justifyContent:d.l.Center},a.createElement("button",{"data-test-selector":"emote-button-clickable",className:t,"aria-label":i,name:i,onMouseEnter:e.onMouseEnter?e.onMouseEnter.bind(null,e.emote):void 0,onMouseLeave:e.onMouseLeave?e.onMouseLeave.bind(null,e.emote):void 0,onClick:e.onClick?e.onClick.bind(null,e.emote):void 0,"data-a-target":i},a.createElement("figure",null,e.emote.isLocked?C:null,e.showOptions&&a.createElement("div",{className:"emote-button__options"}),u)))))});n.d(t,"a",(function(){return"emote-button"})),n.d(t,"b",(function(){return k}))},br9A:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var i,o=n("mrSG"),r=n("/7QA"),a=n("2xye"),s=n("I6K6"),c=n("RuiO");!function(e){e.ChannelPage="channel_page",e.ChannelHome="channel_home",e.ChannelPageModal="channel_page_modal",e.EmoteCard="emote_card",e.TheatreMode="theatre_mode",e.SubsManagementPage="subscriptions_management_page",e.SquadPage="squad_page",e.ThankSubGifterCallout="thank_sub_gifter_callout",e.MegaGifterCallout="mega_gifter_callout",e.WatchPartyPage="watch_party_page"}(i||(i={}));var l={BuyContinueSub:"buy_continue_sub",BuyCustomMysteryGift:"buy_custom_mystery_gift",BuyGiftSub:"buy_gift_sub",BuyGiftToPaidUpgrade:"buy_gift_to_paid_upgrade",BuyMysteryGift:"buy_mystery_gift",BuyPaidUpgrade:"buy_paid_upgrade",BuyPrimeToPaid:"buy_prime_to_paid",BuyQuickSub:"buy_quick_sub",ChangeTier:"change_tier",ClickAnonymousGiftCheckbox:"anonymous_gift_click",ClickBack:"back_top_level",ClickCancelAndRefund:"click_cancel_and_refund",ClickCancelPaidUpgrade:"click_cancel_paid_upgrade",ClickChangePaymentMethod:"click_change_payment_method",ClickChangeSubTier:"click_change_sub_tier",ClickCheckout:"click_checkout_button",ClickCommunityGift:"click_community_gift",ClickDisableGift:"click_disable_gift_button",ClickDNRSub:"click_dnr_sub_button",ClickGiftSubOptions:"gift_options_click",ClickMoreSubOptions:"more_options_click",ClickMultiMonthOption:"multi_month_option_select",ClickMultiMonthInfo:"multi_month_info_click",ClickPaidUpgrade:"click_paid_upgrade",ClickPrimeFAQ:"click_prime_faq",ClickResubscribe:"click_resubscribe",ClickShowMoreEmotes:"click_show_more_emotes",ClickShowMoreGiftBundles:"click_show_more_gift_bundles",ClickShowMoreGiftBundlesFromBannerCTA:"click_show_more_gift_bundles_from_banner",ClickSignupForPrime:"click_signup_for_prime",ClickSingleGift:"click_single_gift",CloseSubMenu:"close_subscribe_menu",GiftASub:"gift_a_sub",OpenSubMenu:"open_subscribe_menu",SubMenuReady:"sub_menu_ready",SubWithPrime:"samus_spend_credit"};function u(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n,i,l,u,d,m,p,f,h,b,k,v;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:t=r.o.getVideoPlayerTrackingData().vodID,n=!!t,i={channelID:e.channelID,withVideo:!1},n&&(i.withVideo=!0,i.videoID=t),l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.p.apollo.client.query({query:c,variables:i})];case 2:return l=o.sent(),[3,4];case 3:return u=o.sent(),r.k.warn(u,"Failed to make query for channel info in FollowEvent reporting.",{channelID:e.channelID}),[3,4];case 4:return d=l&&l.data&&l.data.user||null,l&&!d&&r.k.warn("Query for channel info in SubEvent reporting returned no data.",{channelID:e.channelID}),m=null,l&&n&&((p=l&&l.data&&l.data.video)?m=Object(s.a)(p.broadcastType):r.k.warn("Query for video info in SubEvent reporting returned no data.",{currentVideoID:t})),f=d&&d.self,h=f?!!f.subscriptionBenefit:null,b=f&&f.subscriptionBenefit&&f.subscriptionBenefit.purchasedWithPrime||!1,k=f?f.canPrimeSubscribe:null,v={action:e.action,button_cta:e.buttonCTA,can_subscribe:k,channel:e.channelLogin,channel_id:e.channelID,charge_interval:e.chargeInterval,checkout_button_tier:e.checkoutButtonTier,cumulative_tenure_months:e.cumulativeTenureMonths,days_to_next_tenure_anniversary:e.daysToNextTenureAnniversary||null,has_sub_credit:e.hasSubCredit||null,host_channel:e.hostChannelLogin,host_channel_id:e.hostChannelID,is_anonymous:e.isAnonymous,is_menu_open:e.isMenuOpen||null,is_single_month:e.isSingleMonth,is_subscribed:h,is_subscribed_current_tier:f&&f.subscriptionBenefit&&f.subscriptionBenefit.tier,mystery_gift_count:e.mysteryGiftCount||null,sub_location:e.sub_location,sub_recipient:e.giftRecipient||null,modal:e.modal,modal_level:e.modalLevel||"",modal_session_id:e.modalSessionId||"",show_prime_content:e.showPrimeContent||!1,show_resub:d?k&&b:null,streak_number:e.streakNumber||null,vod_id:t,vod_type:m,viewport_height:window.innerHeight,viewport_width:window.innerWidth},r.o.track(a.SpadeEventType.Subscription,v),[2]}}))}))}},dq0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductEmote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:61}};n.loc.source={body:"fragment subscriptionProductEmote on Emote {\nid\nsetID\ntoken\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},evnP:function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),r=n("/7QA"),a=n("D7An"),s=n("YVOQ"),c=n("Mb07"),l=n("DnOo"),u=n("a5fV"),d=n("br9A"),m=n("sUnt"),p=n("yymn"),f=n("+80q"),h=n("C7sF"),b=n("hnjF"),k=(n("g0Jf"),"first_paid_sub_offer");var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e;if(!g())return null;var t=this.props,n=t.handleSubMenuAction,i=t.product,a=t.subscriptionBenefit,s=Object(c.b)(c.a.FirstPaidSubOffer,i);if(!s||!Object(c.d)(s))return null;var k=Object(u.e)(i),v=Object(c.c)(s),E=v.discountPercent,S=v.price;return E&&k&&S?o.createElement(m.a,{className:"first-paid-sub-offer__container",display:p.g.Flex,flexGrow:1,justifyContent:p.l.Between,margin:{x:"auto"},padding:{x:2,y:1}},o.createElement(m.a,{className:"first-paid-sub-offer__upsell",display:p.g.Flex,flexDirection:p.h.Column,justifyContent:p.l.Center},o.createElement(m.a,{margin:{bottom:.5}},o.createElement(f.a,{fontSize:p.j.Size4,lineHeight:f.b.Heading},Object(r.d)("First Sub, First Month: {offerPercentage}% off!",{offerPercentage:E},"FirstPaidSubOffer"))),o.createElement(f.a,{fontSize:p.j.Size7},Object(r.d)("Tier 1 only. Renews monthly at {renewalPrice}",{renewalPrice:S},"FirstPaidSubOffer"))),o.createElement(m.a,{alignItems:p.b.End,className:"first-paid-sub-offer__cta",display:p.g.Flex,flexDirection:p.h.Column,justifyContent:p.l.Center},o.createElement(l.a,{customSubscribeNowMessage:(null===(e=null==a?void 0:a.gift)||void 0===e?void 0:e.isGift)||(null==a?void 0:a.purchasedWithPrime)?Object(r.d)("Continue Sub","FirstPaidSubOffer"):Object(r.d)("Subscribe","FirstPaidSubOffer"),handleSubAction:n,icon:h.a.Star,isSubbedToTier:!1,overrideSubEventAction:d.a.BuyQuickSub,productName:i.name,tierPrice:String(k),url:i.url,offerID:s.id}),o.createElement(b.a,{className:"first-paid-sub-offer__cta--description",textAlign:p.p.Right},o.createElement(f.a,{fontSize:p.j.Size7},Object(r.d)("Was {renewalPrice}, {offerPercentage}% Off First Month",{offerPercentage:E,renewalPrice:S},"FirstPaidSubOffer"))))):null},t}(o.Component);function g(){return r.b.get(k,!1)&&"variant_fpso_20"===r.p.experiments.getAndTrackAssignment(a.c.MultiMonthSubs)}var E=Object(s.b)((function(e){return{subscriptionBenefit:e.subscriptionBenefit}}))(v);n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return E}))},g0Jf:function(e,t,n){},glr9:function(e,t,n){},mmRu:function(e,t,n){"use strict";n.r(t);var i=n("/MKj"),o=n("mrSG"),r=n("q1tI"),a=n("u5aL"),s=n("JkAt"),c=n("ANjH"),l=n("hbnN"),u=n("/7QA"),d=n("yR8l"),m=n("x7UT"),p=n("Mj6i"),f=n("OMdY"),h=n("/aPz"),b=n("1/iK"),k=n("kRBY"),v=n("+pBb"),g=n("P6kH"),E=n("w1PT"),S=n("8EUQ"),C=n("KriR"),_=n("GzyO"),y=n("OpME"),N=n("ANDu"),P=n("GnwI"),D=n("Lbs1"),T=n("br9A"),I=n("MkkA"),O=n("TUXZ"),U=n("DB+C"),w=function(e){function t(t){var n=e.call(this,t)||this;return n.getOwnedEmotes=Object(l.a)((function(e){var t=new Map;if(e&&e.emoteSets&&e.emoteSets.length>0)for(var n=0,i=e.emoteSets;n<i.length;n++){var o=i[n];(null==o?void 0:o.id)&&t.set(o.id,o)}return t})),n.getSubProductSetIDs=Object(l.a)((function(e){var t=new Set;if(e&&e.user&&e.user.subscriptionProducts)for(var n=0,i=e.user.subscriptionProducts;n<i.length;n++){var o=i[n];o&&void 0!==o.emoteSetID&&null!==o.emoteSetID&&t.add(o.emoteSetID)}return t})),n.getAllEmoteSets=Object(l.a)((function(e){return e&&e.emoteSets?Object(y.a)(e.emoteSets):[]})),n.getMappedEmotes=Object(l.a)((function(e,t,n){var i=[],o=[],r=[],a=[],s=[];return t.forEach((function(t){t.owner||"0"!==t.id?t.owner&&""!==t.owner.id?e&&e.user&&e.user.id===t.owner.id?Object(g.f)(t.id)?(t.emotes.forEach((function(e){e.isBitsTierEmote=!0})),s.push.apply(s,t.emotes)):e.user.id!==t.owner.id||n.has(t.id)||i.push.apply(i,t.emotes):r.push(t):a.push.apply(a,t.emotes):o.push.apply(o,t.emotes)})),e&&e.user&&e.user.cheer&&e.user.cheer.badgeTierEmotes&&e.user.cheer.badgeTierEmotes.forEach((function(e){var t,n,i,o,r;if(e&&e.id&&e.token){var a={id:e.id,setID:e.setID,token:e.token,isBitsTierEmote:!0,isLocked:!(null===(n=null===(t=e.bitsBadgeTierSummary)||void 0===t?void 0:t.self)||void 0===n?void 0:n.isUnlocked),bitsThreshold:null===(i=e.bitsBadgeTierSummary)||void 0===i?void 0:i.threshold,bitsLeftToUnlock:null===(r=null===(o=e.bitsBadgeTierSummary)||void 0===o?void 0:o.self)||void 0===r?void 0:r.numberOfBitsUntilUnlock};s.push(Object(y.b)(a))}})),{channelCampaignEmotes:i,globalEmotes:o,otherChannelEmoteSets:Object(N.a)(r),unlockedEmotes:a,channelBitsTierEmotes:s}})),n.getSubProducts=Object(l.a)((function(e){return e&&e.user&&e.user.subscriptionProducts?Object(f.b)(e.user.subscriptionProducts):[]})),n.getSortedChannelEmotes=Object(l.a)((function(e,t,n){var i=[],o=[];e.forEach((function(e){e.isLocked?i.push(e):o.push(e)}));var r=[],a=[];return n.forEach((function(e){e.isLocked?r.push(e):a.push(e)})),Object(y.e)(t.concat(o,a,i,r))})),n.getTier=function(){var e,t,i,o,r=null===(o=null===(i=null===(t=null===(e=n.props.channelData)||void 0===e?void 0:e.user)||void 0===t?void 0:t.self)||void 0===i?void 0:i.subscriptionBenefit)||void 0===o?void 0:o.tier;if(r){var a=Number(r);return isNaN(a)?null:a}return null},n.handleSubEvent=function(e){e.action===T.a.ClickCheckout&&n.checkAndDisplaySubscriptionCheckout();var t=n.props.channelData,i=null;if(t){var r=t.user;r&&r.self&&r.self.cumulativeTenure&&(i=r.self.cumulativeTenure.months)}Object(T.c)(Object(o.__assign)(Object(o.__assign)({},e),{action:T.a.ClickCheckout,channelID:t&&t.user&&t.user.id||"",channelLogin:t&&t.user&&t.user.displayName||"",cumulativeTenureMonths:i,isMenuOpen:null,hasSubCredit:null,sub_location:"emote_picker",modal:!1,showPrimeContent:!0,giftRecipient:null}))},n.state={frequentlyUsedEmotes:t.isLoggedIn?[]:Object(_.c)()},n}return Object(o.__extends)(t,e),Object.defineProperty(t.prototype,"gqlError",{get:function(){var e=this.props,t=e.emoteSetsData,n=e.channelData;return t&&!!t.error||n&&!!n.error||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gqlLoading",{get:function(){return!this.checkDataLoaded(this.props)},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){Object(_.d)(),this.checkDataLoaded(this.props)&&(this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)),this.props.latencyTracking.reportInteractive())},t.prototype.componentDidUpdate=function(e){if(this.gqlError||(e.pubsub.messages.subscriptionInfo===this.props.pubsub.messages.subscriptionInfo&&e.pubsub.messages.bitsBalanceUpdate===this.props.pubsub.messages.bitsBalanceUpdate||(this.props.channelData&&this.props.channelData.refetch(),this.props.emoteSetsData&&this.props.emoteSetsData.refetch()),this.checkDataLoaded(this.props)&&(this.props.latencyTracking.reportInteractive(),this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)))),e.visible!==this.props.visible){if(this.props.openEmotePicker(),this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap){var t=Object(_.e)(this.props.emoteSetsData.emoteMap);this.setState({frequentlyUsedEmotes:t})}}else e.visible&&!this.props.visible&&this.props.closeEmotePicker()},t.prototype.componentWillUnmount=function(){this.props.closeEmotePicker()},t.prototype.render=function(){if(!this.props.hasMenuOpened)return null;var e=this.props,t=e.channelData,n=e.emoteSetsData,i=t&&t.user?t.user.displayName:null,o=t&&t.user?t.user.profileImageURL:null,a=t&&t.user?t.user.login:null,s=t&&t.currentUser?t.currentUser.bitsBalance:null,c=this.getAllEmoteSets(n),l=this.getOwnedEmotes(n),u=this.getSubProducts(t),d=this.getMappedEmotes(t,c,this.getSubProductSetIDs(t)),m=d.channelCampaignEmotes,p=d.globalEmotes,f=d.otherChannelEmoteSets,h=d.unlockedEmotes,b=d.channelBitsTierEmotes,k=Object(N.c)(l,u);return r.createElement(O.a,{allEmoteSets:c,channelDisplayName:i,channelID:this.props.channelOwnerID,channelLogin:a,channelProfileImageURL:o,channelSubEmotes:k,channelSubscriptionProducts:u,currentUserID:this.props.currentUserID,direction:this.props.direction,emotePickerSessionID:this.props.emotePickerSessionID,emotePickerSource:this.props.emotePickerSource,frequentlyUsedEmotes:this.state.frequentlyUsedEmotes,globalEmotes:p,gqlError:this.gqlError,handleSubAction:this.handleSubEvent,areSubsDisabled:this.props.areSubsDisabled,isLoggedIn:this.props.isLoggedIn,loading:this.gqlLoading,offsetX:this.props.offsetX,onClickClose:this.props.onClickClose,onClickToken:this.props.onClickToken,otherChannelEmoteSets:f,roomID:this.props.roomID,size:this.props.size,sortedChannelEmotes:this.getSortedChannelEmotes(k,m,b),toggleVisibility:this.props.toggleVisibility,unlockedEmotes:h,visible:this.props.visible,shouldShowSubBenefitCallout:this.props.shouldShowSubBenefitCallout,dismissSubBenefitCallout:this.props.dismissSubBenefitCallout,subscriberTier:this.getTier(),bitsBalance:s})},t.prototype.checkDataLoaded=function(e){var t=!e.channelOwnerID||e.channelData&&!e.channelData.loading,n=!e.isLoggedIn||e.emoteSetsData&&!e.emoteSetsData.loading;return t&&n},t.prototype.checkForContent=function(e){var t=e.emoteSetsData,n=e.channelData;return!!(t&&t.emoteSets&&t.emoteSets.length>0)||!!(n&&n.user&&n.user.subscriptionProducts)&&Object(f.b)(n.user.subscriptionProducts).filter(this.subscriptionProductHasEmotes).length>0},t.prototype.subscriptionProductHasEmotes=function(e){return null!==e.emoteSetID&&!!e.emotes&&e.emotes.length>0},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=u.n.get(S.a.SUB_CHECKOUT__PRODUCT_KEY,""),t=u.n.get(S.a.SUB_CHECKOUT__RECIPIENT_KEY,""),n=u.n.get(S.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,""),i=Number(n);e&&(this.props.channelData&&this.props.channelData.user&&this.props.channelData.user.subscriptionProducts&&this.props.channelData.user.subscriptionProducts.map((function(e){return e?e.name:null})).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({recipientLogin:t,productName:e,mysteryGiftCount:i,trackingContext:{source:C.a.EmotePicker}}):this.props.showLoginModal():S.a.clearSubscriptionCheckoutKeys())},t}(r.PureComponent);var B=Object(c.d)(Object(i.b)((function(e){return{currentUserID:e.session.user&&e.session.user.id,emotePickerSessionID:e.chat&&e.chat.emotePickerSessionID||null,sessionUser:e.session.user,isLoggedIn:Object(k.f)(e)}}),(function(e){return Object(c.b)({closeEmotePicker:v.A,openEmotePicker:v.M,showLoginModal:S.a.showLoginModalWithCheckoutDispatch(b.a.EmotePickerSubscriptionButton),showSubscriptionCheckout:E.a},e)})),Object(d.a)(U,{name:"channelData",skip:function(e){return!e.channelOwnerID},options:function(e){return{variables:{channelOwnerID:e.channelOwnerID}}}}),Object(m.a)([{topic:function(e){return"user-subscribe-events-v1."+e.currentUserID},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!e.currentUserID}},{topic:function(e){return e.currentUserID?Object(h.R)(e.currentUserID):""},mapMessageTypesToProps:{"*":"bitsBalanceUpdate"},skip:function(e){return!(e.currentUserID&&e.channelData&&e.channelData.user&&e.channelData.user.cheer&&e.channelData.user.cheer.badgeTierEmotes)}}]),Object(P.withLatencyTracking)("EmotePicker"),Object(p.a)(),Object(I.withWatchPartyContext)(I.mapWatchPartyContextToSubsProps),Object(D.b)({channelID:function(e){return e.channelOwnerID},mapProps:function(e){return{shouldShowSubBenefitCallout:e.shouldShowEmotePickerCallout,dismissSubBenefitCallout:e.dismissEmotePickerCallout}}}))(w),F=n("sUnt"),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInteracted:!1,hasOpenedEmotePicker:!1,isEmotePickerMenuVisible:!1,isEmotePickerButtonVisible:!1},t.onClickOut=function(){t.setState({isEmotePickerMenuVisible:!1})},t.onClickToken=function(e){t.props.onClickToken&&t.props.onClickToken(e)},t.toggleEmotePicker=function(){t.setState((function(e){return{isEmotePickerMenuVisible:!e.isEmotePickerMenuVisible,hasOpenedEmotePicker:!0}}))},t.onEmotePickerDataLoaded=function(e){e&&t.setState({isEmotePickerButtonVisible:!0})},t.onInteraction=function(){return t.setState({hasInteracted:!0})},t}return Object(o.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.inputRef&&(this.props.inputRef.addEventListener("mouseenter",this.onInteraction),this.props.inputRef.addEventListener("focus",this.onInteraction))},t.prototype.componentWillUnmount=function(){this.props.inputRef&&(this.props.inputRef.removeEventListener("mouseenter",this.onInteraction),this.props.inputRef.removeEventListener("focus",this.onInteraction))},t.prototype.render=function(){var e=null;this.state.isEmotePickerButtonVisible&&(e=r.createElement(s.a,{buttonDisabled:this.props.buttonDisabled,onClick:this.toggleEmotePicker,isActive:this.state.isEmotePickerMenuVisible}));var t=null;this.hasInteractedOrPageload&&(t=r.createElement(B,{channelOwnerID:this.props.channelOwnerID,emotePickerSource:this.props.emotePickerSource,onClickClose:this.toggleEmotePicker,onClickToken:this.onClickToken,onLoad:this.onEmotePickerDataLoaded,offsetX:this.props.offsetX,toggleVisibility:this.toggleEmotePicker,visible:this.state.isEmotePickerMenuVisible,direction:this.props.direction,hasMenuOpened:this.state.hasOpenedEmotePicker}));var n=r.createElement(F.a,Object(o.__assign)({className:"emote-picker-and-button"},this.layoutProps),e,t);return this.props.shouldCloseOnClickOut?r.createElement(a.a,{onClickOut:this.onClickOut},n):n},Object.defineProperty(t.prototype,"hasInteractedOrPageload",{get:function(){return!(!this.props.firstPageLoaded&&!this.state.hasInteracted)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutProps",{get:function(){var e={attachTop:!!this.props.attachTop,attachRight:!!this.props.attachRight,attachBottom:!!this.props.attachBottom,attachLeft:!!this.props.attachLeft,padding:this.props.padding};return this.props.position&&(e.position=this.props.position),e},enumerable:!0,configurable:!0}),t}(r.Component),L=Object(P.withLatencyTracking)("EmotePicker")(j);var A=Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(L),M=n("cpJf"),G=n("dF3q");n.d(t,"EmotePicker",(function(){return A})),n.d(t,"EmotePickerMenu",(function(){return B})),n.d(t,"EmotePickerSource",(function(){return M.a})),n.d(t,"topTwitchEmotes",(function(){return M.c})),n.d(t,"RARE_EMOTE_IDS",(function(){return M.b})),n.d(t,"EmotePickerButton",(function(){return G.a}))},rljb:function(e,t,n){},w1PT:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("/7QA"),o=n("ZS2+"),r=n("SDEh"),a=n("XDCx"),s=n("IZXT"),c=n("8EUQ"),l="core.ui.CHECKOUT_SHOWN";function u(e){if(Object(r.b)()){try{c.a.clearSubscriptionCheckoutKeys(),function(e){if(!e.productName)return void i.k.warn("No productName provided");var t=new URL("https://www.twitch.tv/products/"+e.productName);e.recipientLogin?t.searchParams.append("recipient",e.recipientLogin):e.mysteryGiftCount&&t.searchParams.append("gift_count",e.mysteryGiftCount.toString());e.isAnonymous&&t.searchParams.append("is_anonymous",e.isAnonymous.toString());e.isOneTimePurchase&&t.searchParams.append("is_one_time_purchase",e.isOneTimePurchase.toString());window.open(t.toString(),"_blank")}(e)}catch(e){Object(s.d)()?i.k.warn("Failed to open subscription checkout externally"):i.k.errorAndReport(e,"Failed to open subscription checkout externally")}return function(e){e({type:l})}}return function(t){t(Object(a.e)(o.a,{component:"CheckoutModal",loader:function(){return Promise.all([n.e(0),n.e(72)]).then(n.bind(null,"KJv/"))},componentProps:e}))}}},zb36:function(e,t,n){"use strict";var i,o;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),function(e){e.FrequentlyUsed="frequently_used",e.CurrentChannel="current_channel",e.OtherChannel="other_subbed_channel",e.Unlocked="unlocked",e.Global="global"}(i||(i={})),function(e){e.EmotePicker="emote_picker",e.EmotePickerSubscriptionPreview="emote_picker_subscription_preview",e.EmotePickerBitsPreview="emote_picker_bits_preview"}(o||(o={}))}}]);