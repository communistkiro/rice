(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{OUpJ:function(e,t,n){var i;i=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function i(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var r,o=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),d=/CrOS/.test(t),h=/silk/i.test(t),l=/sailfish/i.test(t),f=/tizen/i.test(t),m=/(web|hpw)(o|0)s/i.test(t),p=/windows phone/i.test(t),v=(/SamsungBrowser/i.test(t),!p&&/windows/i.test(t)),g=!o&&!h&&/macintosh/i.test(t),y=!a&&!l&&!f&&!m&&/linux/i.test(t),E=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),S=n(/version\/(\d+(\.\d+)?)/i),k=/tablet/i.test(t)&&!/tablet pc/i.test(t),b=!k&&/[^-]mobi/i.test(t),T=/xbox/i.test(t);/opera/i.test(t)?r={name:"Opera",opera:e,version:S||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?r={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||S}:/SamsungBrowser/i.test(t)?r={name:"Samsung Internet for Android",samsungBrowser:e,version:S||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?r={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?r={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?r={name:"Opera Coast",coast:e,version:S||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?r={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?r={name:"Yandex Browser",yandexbrowser:e,version:S||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?r={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?r={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?r={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?r={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?r={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?r={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},E?(r.msedge=e,r.version=E):(r.msie=e,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?r={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?r={name:"Microsoft Edge",msedge:e,version:E}:/vivaldi/i.test(t)?r={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||S}:l?r={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(r={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=e,r.osname="Firefox OS")):h?r={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?r={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:S||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:m?(r={name:"WebOS",osname:"WebOS",webos:e,version:S||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=e)):/bada/i.test(t)?r={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:f?r={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||S}:/qupzilla/i.test(t)?r={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||S}:/chromium/i.test(t)?r={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||S}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:S}:/safari|applewebkit/i.test(t)?(r={name:"Safari",safari:e},S&&(r.version=S)):o?(r={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},S&&(r.version=S)):r=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||S}:{name:n(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(r.name=r.name||"Blink",r.blink=e):(r.name=r.name||"Webkit",r.webkit=e),!r.version&&S&&(r.version=S)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=e,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!a&&!r.silk?!r.windowsphone&&o?(r[o]=e,r.ios=e,r.osname="iOS"):g?(r.mac=e,r.osname="macOS"):T?(r.xbox=e,r.osname="Xbox"):v?(r.windows=e,r.osname="Windows"):y&&(r.linux=e,r.osname="Linux"):(r.android=e,r.osname="Android");var C="";r.windows?C=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?C=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?C=(C=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):o?C=(C=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?C=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?C=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?C=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?C=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(C=n(/tizen[\/\s](\d+(\.\d+)*)/i)),C&&(r.osversion=C);var w=!r.windows&&C.split(".")[0];return k||c||"ipad"==o||a&&(3==w||w>=4&&!b)||r.silk?r.tablet=e:(b||"iphone"==o||"ipod"==o||a||u||r.blackberry||r.webos||r.bada)&&(r.mobile=e),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.whale&&1===s([r.version,"1.0"])||r.mzbrowser&&1===s([r.version,"6.0"])||r.focus&&1===s([r.version,"1.0"])||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=e:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=e:r.x=e,r}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function i(e){return e.split(".").length}function r(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function s(e){for(var t=Math.max(i(e[0]),i(e[1])),n=r(e,(function(e){var n=t-i(e);return r((e+=new Array(n+1).join(".0")).split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function o(e,i,r){var o=n;"string"==typeof i&&(r=i,i=void 0),void 0===i&&(i=!1),r&&(o=t(r));var a=""+o.version;for(var u in e)if(e.hasOwnProperty(u)&&o[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return s([a,e[u]])<0}return i}return n.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in n)return!0}return!1},n.isUnsupportedBrowser=o,n.compareVersions=s,n.check=function(e,t,n){return!o(e,t,n)},n._detect=t,n.detect=t,n},e.exports?e.exports=i():n("B9Yq")("bowser",i)},"Uvn+":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i,r,s=n("OUpJ"),o=/^(\d+)\.(\d+)\.(\d+)[+|-]?(.*)?$/,a=/^(\d+)\.(\d+)[+|-]?(.*)?$/,u=/^(\d+)$/,c=s._detect(navigator.userAgent),d=(i=String(c.version),r=o.exec(i)||a.exec(i)||u.exec(i)||[],{major:parseInt(r[1],10)||0,minor:parseInt(r[2],10)||0,patch:parseInt(r[3],10)||0}),h={chrome:c.chrome,chromecast:navigator.userAgent.toLowerCase().indexOf("crkey")>-1,domain:window.location.host.split(".").slice(-2).join("."),family:c.name.toLowerCase(),firefox:c.firefox,host:window.location.host,major:d.major,minor:d.minor,msedge:c.msedge,msie:c.msie,name:navigator.appVersion,opera:c.opera,osName:c.osname,osVersion:String(c.osversion),patch:d.patch,safari:c.safari,url:window.location.href,userAgent:navigator.userAgent}},dWAo:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var i=n("Uvn+"),r=function(){function t(e){var n=this;this.listener=e,t.prepareCastContext().then((function(){n.remotePlayer=new cast.framework.RemotePlayer,n.remotePlayerController=new cast.framework.RemotePlayerController(n.remotePlayer)})).catch((function(){n.listener.onSessionError()}))}t.canCast=function(){return i.a.chrome},t.lookForRemotePlaybackDevices=function(e){var n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,regeneratorRuntime.awrap(t.prepareCastContext());case 3:(n=i.sent).addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,(function(t){switch(t.castState){case cast.framework.CastState.NO_DEVICES_AVAILABLE:e.onRemoteDevice(!1);break;case cast.framework.CastState.NOT_CONNECTED:e.onRemoteDevice(!0);break;case cast.framework.CastState.CONNECTED:var i=n.getCurrentSession();i&&i.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&e.onRemoteReconnect()}})),n.setOptions({receiverApplicationId:"F993ACB3",autoJoinPolicy:chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED}),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),e.onRemoteDevice(!1);case 11:case"end":return i.stop()}}),null,null,[[0,8]])},t.prepareCastContext=function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.cast||!window.cast.framework){t.next=2;break}return t.abrupt("return",Promise.resolve(cast.framework.CastContext.getInstance()));case 2:return t.abrupt("return",new Promise((function(t,n){if(e.__onGCastApiAvailable=function(e,i){e?t(cast.framework.CastContext.getInstance()):n()},!document.getElementById("pc-chromecast-sender")){var i=document.createElement("script");i.id="pc-chromecast-sender",i.onerror=function(){document.body.removeChild(i),e.__onGCastApiAvailable=function(){},n()},i.async=!0,i.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(i)}})));case 3:case"end":return t.stop()}}))};var n=t.prototype;return n.configure=function(e){var n,i,r,s,o,a;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=e.path,u.prev=1,u.next=4,regeneratorRuntime.awrap(t.prepareCastContext());case 4:if(i=u.sent,r=i.getCurrentSession()){u.next=13;break}return u.next=9,regeneratorRuntime.awrap(i.requestSession());case 9:r=i.getCurrentSession(),this.setupRemotePlayerListeners(r,this.remotePlayerController),u.next=14;break;case 13:r.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&this.setupRemotePlayerListeners(r,this.remotePlayerController);case 14:return(s=new chrome.cast.media.MediaInfo(n,"")).streamType=chrome.cast.media.StreamType.BUFFERED,o=new chrome.cast.media.GenericMediaMetadata,s.metadata=o,s.customData={analytics:{chromecast_sender:"player-core",platform:"web"}},this.remotePlayerController.stop(),a=new chrome.cast.media.LoadRequest(s),this.seekTime>0&&(a.currentTime=this.seekTime,this.seekTime=0),u.next=24,regeneratorRuntime.awrap(r.loadMedia(a));case 24:u.next=29;break;case 26:return u.prev=26,u.t0=u.catch(1),u.abrupt("return",this.handleError(u.t0));case 29:case"end":return u.stop()}}),null,this,[[1,26]])},n.stopMedia=function(e){var n,i;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===e&&(e=!0),r.next=3,regeneratorRuntime.awrap(t.prepareCastContext());case 3:n=r.sent,(i=n.getCurrentSession())&&i.getSessionState()!==cast.framework.SessionState.SESSION_RESUMED&&i.endSession(e);case 6:case"end":return r.stop()}}))},n.enqueue=function(){},n.endOfStream=function(){},n.setTimestampOffset=function(){},n.onSourceDurationChanged=function(){},n.play=function(){this.remotePlayer&&this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},n.pause=function(){this.remotePlayer&&!this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},n.reinit=function(){},n.remove=function(){},n.seekTo=function(e){this.remotePlayer&&(this.remotePlayer.playerState!==chrome.cast.media.PlayerState.IDLE?(this.remotePlayer.currentTime=e,this.remotePlayerController.seek()):this.seekTime=e)},n.setPlaybackRate=function(e){},n.addCue=function(){},n.bufferDuration=function(){return 0},n.buffered=function(){return{start:0,end:0}},n.decodedFrames=function(){return 0},n.droppedFrames=function(){return 0},n.framerate=function(){return 0},n.getDisplayWidth=function(){return 0},n.getDisplayHeight=function(){return 0},n.getPlaybackRate=function(){return 0},n.getCurrentTime=function(){return this.remotePlayer?this.remotePlayer.currentTime:0},n.delete=function(){this.remotePlayer&&this.stopMedia()},n.setMuted=function(e){this.remotePlayer&&e!==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()},n.isMuted=function(){return!!this.remotePlayer&&this.remotePlayer.isMuted},n.setVolume=function(e){this.remotePlayer&&(this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel())},n.getVolume=function(){return this.remotePlayer?this.remotePlayer.volumeLevel:0},n.captureGesture=function(){},n.getDevice=function(){var e,n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(t.prepareCastContext());case 2:if(e=i.sent,!(n=e.getCurrentSession())){i.next=6;break}return i.abrupt("return",n.getCastDevice().friendlyName);case 6:case"end":return i.stop()}}))},n.setupRemotePlayerListeners=function(e,t){var n=this,i=function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.getMediaSession()&&n.listener.onSinkTimeUpdate();case 2:case"end":return t.stop()}}))},r=function(){switch(n.remotePlayer.playerState){case chrome.cast.media.PlayerState.BUFFERING:n.listener.onSinkIdle();break;case chrome.cast.media.PlayerState.PLAYING:n.listener.onSinkPlaying(!1);break;case chrome.cast.media.PlayerState.IDLE:var t=e.getMediaSession();t&&t.idleReason===chrome.cast.media.IdleReason.FINISHED&&n.listener.onSinkEnded()}},s=function(){n.listener.onSinkVolumeChanged(n.remotePlayer.volumeLevel)},o=function(){n.listener.onSinkMutedChanged(n.remotePlayer.isMuted)},a=function(){n.listener.onSinkDurationChanged(n.remotePlayer.duration)},u=function(){n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,i),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,r),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,s),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,o),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,a),n.listener.onSessionStop()};e.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,(function(){n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,i),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,r),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,s),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,o),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,a),n.listener.onSessionStarted(e.getCastDevice().friendlyName)}));var c=e.getSessionObj();c.addUpdateListener((function(){c.status===chrome.cast.SessionStatus.STOPPED&&u()})),c.addMediaListener(u)},n.handleError=function(e){if(chrome.cast)switch(e){case chrome.cast.ErrorCode.SESSION_ERROR:this.listener.onSessionError();break;case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:this.listener.onRemoteDevice(!1);break;case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:this.listener.onLoadMediaError();break;case chrome.cast.ErrorCode.CANCEL:this.listener.onUserCancel();break;default:this.listener.onSinkError({value:1,code:0,message:"Error requesting chromecast session"})}else this.listener.onSinkError({value:1,code:0,message:"Error loading chromecast SDK"})},t}()}).call(this,n("yLpj"))},rrr2:function(e,t,n){"use strict";n.r(t);var i=n("Uvn+");function r(){return"undefined"!=typeof MediaSource}function s(){if("Windows"!==i.a.osName)return Promise.resolve(!1);if(r()){if("mediaCapabilities"in navigator){return navigator.mediaCapabilities.decodingInfo({type:"media-source",video:{contentType:'video/mp4;codecs="vp09.00.41.08"',width:1920,height:1080,bitrate:8e6,framerate:60}}).then((function(e){return e.supported&&e.smooth}))}return Promise.resolve(MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"'))}return Promise.resolve(!1)}var o,a={keySystem:"org.w3.clearkey",uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"},u={keySystem:"com.apple.fps.2_0",certUrl:"https://fp-keyos-twitch.licensekeyserver.com/cert/a17fd33d3843df9b17679ccf50a419b2.der",licenseUrl:"https://fp-keyos-twitch.licensekeyserver.com/getkey",uuid:"94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"},c={keySystem:"com.microsoft.playready",licenseUrl:"https://pr-keyos-twitch.licensekeyserver.com/core/rightsmanager.asmx",uuid:"9a04f079-9840-4286-ab92-e65be0885f95"},d={keySystem:"com.widevine.alpha",licenseUrl:"https://wv-keyos-twitch.licensekeyserver.com",uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"},h={CLEARKEY:a,FAIRPLAY:u,PLAYREADY:c,WIDEVINE:d},l={"com.widevine.alpha":d,"com.microsoft.playready":c,"com.apple.fps.2_0":u,"org.w3.clearkey":a},f={NO_CDM_SUPPORT:{value:4,message:"Your browser does not support any DRM Content Decryption Modules"},SESSION_UPDATE:{value:4,message:"There was an issue while updating DRM License"},LICENSE_REQUEST:{value:2,message:"Error while requesting DRM license"},KEY_SESSION_CREATION:{value:4,message:"Error creating key session"},KEY_SESSION_INTERNAL:{value:4,message:"Encryption key not usable because of internal error in CDM"},NO_PSSH_FOUND:{value:4,message:"Unable to find valid CDM support on media"},AUTH_XML_REQUEST:{value:2,message:"Request for AuthXML failed"},CERT_REQUEST:{value:2,message:"Request for DRM certificate failed"}};function m(e,t){if((e=p(e))===(t=p(t)))return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),r=0;r<n.byteLength;r++)if(n.getUint8(r)!==i.getUint8(r))return!1;return!0}function p(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e}function v(e){return function(e){var t=[];return e.forEach((function(e){Object.keys(h).forEach((function(n){var i=h[n];i.uuid===e&&t.push(i)}))})),t}(function(e){if(null===e)return[];var t=new DataView(e.buffer||e),n=[],i=0;for(;;){var r,s,o,a=void 0;if(i>=t.buffer.byteLength)break;if(r=t.getUint32(i),s=i+r,i+=4,t.getUint32(i)===S("pssh"))if(i+=4,0===(o=t.getUint8(i))||1===o){i++,i+=3,a="";for(var u=0;u<4;u++)a+=k(t.getUint8(i+u));i+=4,a+="-";for(var c=0;c<2;c++)a+=k(t.getUint8(i+c));i+=2,a+="-";for(var d=0;d<2;d++)a+=k(t.getUint8(i+d));i+=2,a+="-";for(var h=0;h<2;h++)a+=k(t.getUint8(i+h));i+=2,a+="-";for(var l=0;l<6;l++)a+=k(t.getUint8(i+l));i+=6,a=a.toLowerCase();t.getUint32(i);i+=4,n.push(a),i=s}else i=s;else i=s}return n}(e))}function g(e,t){return new Promise((function(n,i){var r=new XMLHttpRequest;for(var s in r.open(t.method,e,!0),t.headers)t.headers.hasOwnProperty(s)&&r.setRequestHeader(s,t.headers[s]);r.responseType=t.responseType,r.onload=function(){200===r.status&&n(r.response)},r.onloadend=function(){i(r.status)},r.send(t.body)}))}function y(e){var t=E(b(JSON.parse(String.fromCharCode.apply(null,e)).sinf[0]),"schi");return function(e){var t="",n=e,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}t+=k(s)}return t}(E(t,"tenc").subarray(8,24))}function E(e,t){for(var n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=S(t),r=0;r<e.byteLength;){var s=n.getUint32(r);if(n.getUint32(r+4)===i)return e.subarray(r+8,r+s);r+=s}return new Uint8Array(e)}function S(e){return(e.charCodeAt(0)<<24)+(e.charCodeAt(1)<<16)+(e.charCodeAt(2)<<8)+e.charCodeAt(3)}function k(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function b(e){for(var t=atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}function T(e){return decodeURIComponent(e.replace(/\+/g," "))}!function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.AUTO_SWITCH_QUALITY_CHANGED="PlayerAutoSwitchQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TRACKING="PlayerTracking",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.PROFILE="PlayerProfile",e.SESSION_DATA="PlayerSessionData",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUES="TextCues"}(o||(o={}));var C=null,w=null;function P(e){var t=e.type===o.ANALYTICS_EVENT,n=e.arg&&"video_error"===e.arg.name;if(t&&n){if(!C&&!w){var i=document.createElement("canvas"),r=i.getContext("webgl")||i.getContext("experimental-webgl");if("getExtension"in r){var s=r.getExtension("WEBGL_debug_renderer_info");"getParameter"in r&&(C=r.getParameter(s.UNMASKED_RENDERER_WEBGL),w=r.getParameter(s.UNMASKED_VENDOR_WEBGL))}}e.arg.properties.gl_renderer=C,e.arg.properties.gl_vendor=w}return e}var R,M,D,A,L=function(){function e(){var t=this;this.processor=this.processor.bind(this),e.isSupported()&&window.navigator.getBattery().then((function(e){t.batteryManager=e}))}return e.isSupported=function(){return window&&window.navigator&&!!window.navigator.getBattery},e.prototype.processor=function(e){var t=e.type===o.ANALYTICS_EVENT,n=e.arg&&"minute-watched"===e.arg.name;return t&&n&&null!==this.batteryManager&&(e.arg.properties.battery_percent=this.batteryManager.level),e},e}();!function(e){e.ID3="MetaID3",e.CAPTION="MetaCaption"}(R||(R={})),function(e){e.PLAYER_LOADED_IN_WORKER="player_loaded_in_worker",e.HLS_MASTER_PLAYLIST_REQUEST="master_manifest_request",e.HLS_MASTER_PLAYLIST_READY="master_manifest_ready",e.HLS_MEDIA_PLAYLIST_REQUEST="variant_request",e.HLS_MEDIA_PLAYLIST_READY="variant_ready",e.MIN_BUFFER_READY="min_buffer_ready",e.VIDEO_ELEMENT_PLAY="video_element_play"}(M||(M={})),function(e){e.AVAILABLE="RemotePlayerAvailable",e.UNAVAILABLE="RemotePlayerUnavailable",e.SESSION_STARTED="RemotePlayerSessionStarted",e.SESSION_ENDED="RemotePlayerSessionEnded"}(D||(D={})),function(e){e.IDLE="Idle",e.READY="Ready",e.BUFFERING="Buffering",e.PLAYING="Playing",e.ENDED="Ended"}(A||(A={}));var I=n("dWAo");function _(e){var t=null;if(e.getElementsByTagName("Challenge").length>0&&e.getElementsByTagName("Challenge")[0]){var n=e.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;n&&(t=atob(n))}return t}function O(e){for(var t={},n=e.getElementsByTagName("name"),i=e.getElementsByTagName("value"),r=0;r<n.length;r++)t[n[r].childNodes[0].nodeValue]=i[r].childNodes[0].nodeValue;return t}function N(e){var t=String.fromCharCode.apply(null,new Uint16Array(e)),n=(new DOMParser).parseFromString(t,"application/xml");return{headers:O(n),body:_(n)}}var U=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],x=function(){function e(e){var t=this;this.video=e.video,this.listener=e.listener,this.cdmSupport=null,this.selectedCDM=null,this.mediaKeys=void 0,this.pendingSessions=[],this.reset(),this.video.addEventListener("encrypted",(function(e){return t.handleEncrypted(e)})),this.video.addEventListener("webkitneedkey",(function(e){return t.handleWebKitEncrypted(e)}))}var t=e.prototype;return t.configure=function(e){var t=this;if(!this.authXml){var n=new URL(e).pathname.split("/"),i=n[n.length-1].split(".")[0],r=function(e){var t=new URL(e).searchParams,n={};return t.forEach((function(e,t){n[T(t)]=e?T(e):""})),n}(e),s=r.token,o=r.sig,a="https://usher.ttvnw.net/api/authxml/"+i+"?token="+encodeURIComponent(s)+"&sig="+o;this.authXml=g(a,{method:"GET",responseType:"text"}).catch((function(e){t.handleError(Object.assign({code:e},f.AUTH_XML_REQUEST))}))}},t.reset=function(){this.authXml=null,this.sessions=[]},t.isProtected=function(){return null!==this.authXml},t.handleError=function(e){this.listener.onSinkError({value:e.value||4,code:e.code||0,message:e.message||""})},t.hasSession=function(e){var t=this.sessions,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var s=r;if(s.initData&&m(s.initData,e))return!0}return!1},t.createKeySystemSupportChain=function(){if(null===this.cdmSupport||0===this.cdmSupport.length)return Promise.reject(f.NO_PSSH_FOUND);var e=Promise.reject();return this.cdmSupport.forEach((function(t){e=e.catch((function(){return navigator.requestMediaKeySystemAccess(t.keySystem,U)}))})),e=e.catch((function(){return Promise.reject(f.NO_CDM_SUPPORT)}))},t.handleEncrypted=function(e){var t,n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.hasSession(e.initData)){i.next=2;break}return i.abrupt("return");case 2:if(this.sessions.push(e),"sinf"!==e.initDataType){i.next=6;break}return this.handleWebKitEncrypted(e),i.abrupt("return");case 6:if(null===this.cdmSupport&&(this.cdmSupport=v(e.initData)),void 0!==this.mediaKeys){i.next=24;break}return this.mediaKeys=null,i.prev=9,i.next=12,regeneratorRuntime.awrap(this.createKeySystemSupportChain());case 12:return t=i.sent,this.selectedCDM=l[t.keySystem],i.next=16,regeneratorRuntime.awrap(t.createMediaKeys());case 16:return n=i.sent,i.next=19,regeneratorRuntime.awrap(this.setMediaKeys(n));case 19:i.next=24;break;case 21:i.prev=21,i.t0=i.catch(9),this.handleError(i.t0);case 24:this.addSession(e);case 25:case"end":return i.stop()}}),null,this,[[9,21]])},t.setMediaKeys=function(e){var t=this;return this.mediaKeys=e,this.pendingSessions.forEach((function(e){return t.createSessionRequest(e)})),this.pendingSessions=[],this.video.setMediaKeys(this.mediaKeys)},t.addSession=function(e){var t=this;this.mediaKeys?this.createSessionRequest(e).catch((function(){t.handleError(f.KEY_SESSION_CREATION)})):this.pendingSessions.push(e)},t.createSessionRequest=function(e){var t=this,n=e.initDataType,i=e.initData,r=this.mediaKeys.createSession();return r.addEventListener("message",(function(e){return t.handleMessage(e)})),r.addEventListener("keystatuseschange",(function(e){return t.handleKeyStatusesChange(e,i)})),r.generateRequest(n,i)},t.handleKeyStatusesChange=function(e,t){var n=this,i=e.target,r=!1;i.keyStatuses.forEach((function(e){switch(e){case"expired":r=!0;break;case"internal-error":n.handleError(f.KEY_SESSION_INTERNAL)}})),r&&i.close().then((function(){return n.removeSession(t)}))},t.removeSession=function(e){for(var t=0;t<this.sessions.length;t++){if(this.sessions[t].initData===e)return void this.sessions.splice(t,1)}},t.handleMessage=function(e){var t,n,i=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.target,r.next=3,regeneratorRuntime.awrap(this.generateLicense(e.message));case 3:n=r.sent,t.update(n).catch((function(){i.handleError(f.SESSION_UPDATE)}));case 5:case"end":return r.stop()}}),null,this)},t.generateLicense=function(e){var t,n,i,r;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(this.selectedCDM!==h.CLEARKEY){s.next=7;break}return t=JSON.parse((new TextDecoder).decode(e)),n=t.kids.map((function(e){return{kty:"oct",alg:"A128KW",kid:e,k:e}})),i=(new TextEncoder).encode(JSON.stringify({keys:n})),s.abrupt("return",Promise.resolve(i));case 7:if(!this.authXml){s.next=14;break}return s.next=10,regeneratorRuntime.awrap(this.authXml);case 10:return r=s.sent,s.abrupt("return",this.requestLicense(e,r));case 14:this.handleError(f.AUTH_XML_REQUEST);case 15:case"end":return s.stop()}}),null,this)},t.requestLicense=function(e,t){var n,i,r=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n={method:"POST",responseType:"arraybuffer",body:e,headers:{customdata:t,"Content-Type":"application/octet-stream"}},this.selectedCDM===h.PLAYREADY&&(i=N(e),n.body=i.body,n.headers=Object.assign(n.headers,i.headers)),s.abrupt("return",g(this.selectedCDM.licenseUrl,n).catch((function(){r.handleError(Object.assign({code:status},f.LICENSE_REQUEST))})));case 3:case"end":return s.stop()}}),null,this)},t.handleWebKitEncrypted=function(e){var t,n=this;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return this.selectedCDM=h.FAIRPLAY,i.prev=1,i.next=4,regeneratorRuntime.awrap(g(h.FAIRPLAY.certUrl,{method:"GET",responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}}));case 4:t=i.sent,this.setupWebKitMediaKeys(e,t).catch((function(e){return n.handleError(e)})),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),this.handleError(Object.assign({code:i.t0},f.CERT_REQUEST));case 11:case"end":return i.stop()}}),null,this,[[1,8]])},t.setupWebKitMediaKeys=function(e,t){var n=this;this.video.webkitKeys||this.video.webkitSetMediaKeys(new window.WebKitMediaKeys(h.FAIRPLAY.keySystem));var i=y(e.initData),r=this.video.webkitKeys.createSession("video/mp4",e.initData);return r.contentId=i,new Promise((function(e,s){if(n.video.webkitKeys||s("Issue setting fairplay media keys"),!r)return s("Could not create key session");r.addEventListener("webkitkeymessage",(function(e){var r=e.target;"certificate"===String.fromCharCode.apply(null,e.message)?r.update(new Uint8Array(t)):n.getWebkitLicense(e.message,i).then((function(e){var t=e.trim();"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),r.update(b(t))})).catch(s)})),r.addEventListener("webkitkeyadded",e),r.addEventListener("webkitkeyerror",s)}))},t.getWebkitLicense=function(e,t){return this.authXml?this.authXml.then((function(n){var i;return g(h.FAIRPLAY.licenseUrl,{method:"POST",body:"spc="+(i=e,btoa(String.fromCharCode.apply(null,new Uint16Array(i))))+"&assetId="+t,responseType:"text",headers:{"Content-Type":"application/x-www-form-urlencoded",customdata:n}}).catch((function(e){return Promise.reject(Object.assign({code:e},f.LICENSE_REQUEST))}))})):Promise.reject(f.AUTH_XML_REQUEST)},e}(),V=.1,B=1<<30;function F(e){return"number"==typeof e.webkitDecodedFrameCount?e.webkitDecodedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().totalVideoFrames:"number"==typeof e.mozDecodedFrames?e.mozDecodedFrames:-1}function W(e){return"number"==typeof e.webkitDroppedFrameCount?e.webkitDroppedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().droppedVideoFrames:-1}function H(e,t){for(var n=e.buffered,i=e.currentTime,r=0;r<n.length;r++){var s=n.start(r),o=n.end(r);if(!(o<=i)){if(s-t>i)break;for(var a=r+1;a<n.length&&!(n.start(a)-o>t);a++)o=n.end(a);for(var u=r-1;u>=0&&!(s-n.end(u)>t);u--)s=n.start(u);return{start:Math.min(s,i),end:o}}}return{start:i,end:i}}function K(e,t){void 0===t&&(t=V);var n=H(e,t).end-e.currentTime>t,i=e.buffered;if(i.length>1||!n)for(var r=e.currentTime,s=0;s<i.length;s++){var o=i.start(s),a=i.end(s);if(r<o&&a-o>t)return o+t}return n?e.currentTime+t:e.currentTime}function G(e,t,n){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}var Y=function(e,t){var n=e.muted,i=[];return i.push(G(e,"volumechange",(function(){var i=e.muted;n!==i?(n=i,t.onSinkMutedChanged(i)):t.onSinkVolumeChanged(e.volume)}))),i.push(G(e,"ratechange",(function(){t.onSinkPlaybackRateChanged(e.playbackRate)}))),{unsub:function(){i.forEach((function(e){return e()}))}}},Q=n("B/eG"),j=self.Promise||Q.default,q=function(){function e(e,t){var n=this;this.playAttempt=!1,this.seeking=!1,this.video=e,this.listener=t,this.onDelete={},this.intervalId=0,this.idle=!0,this.paused=!0,this.lastPlayhead=0,this.lastBufferEnd=0,this.fps=0,this.lastDecodedFrames=0,this.lastTimeUpdate=performance.now(),this.idleTimeout=-1,this.addListener("play",(function(){return n.onVideoPlay()})),this.addListener("pause",(function(){return n.onVideoPause()})),this.addListener("timeupdate",(function(){return n.onVideoTimeUpdate()})),this.addListener("ended",(function(){return n.onVideoEnded()})),this.addListener("error",(function(){return n.onVideoError()})),this.addListener("playing",(function(){return n.onVideoPlaying()})),this.addListener("seeking",(function(){return n.onVideoSeeking()}))}var t=e.prototype;return t.delete=function(){Object.values(this.onDelete).forEach((function(e){return e()})),clearInterval(this.intervalId)},t.play=function(){this.paused=!1;var e=this.video.buffered;if(e.length>0){var t=e.start(e.length-1);(e.end(e.length-1)<this.video.currentTime||this.video.currentTime<t)&&(console.warn("Moving to buffered region",t),this.seekTo(t))}this.playInternal(),this.listener.onSinkPlay()},t.pause=function(){this.paused=!0,this.video.pause()},t.endOfStream=function(){this.idle=!1,clearTimeout(this.idleTimeout),this.idleTimeout=-1},t.framerate=function(){return this.fps},t.seekTo=function(e){this.video.seekable.length&&e!==this.video.currentTime&&(this.seeking=!0,this.video.currentTime=e)},t.onVideoPlay=function(){var e=this;this.playAttempt?(this.lastPlayhead=this.video.currentTime,clearInterval(this.intervalId),this.intervalId=self.setInterval((function(){return e.heartbeat()}),2e3)):(this.pause(),this.listener.play()),this.playAttempt=!1},t.onVideoPause=function(){this.checkStopped(!1),clearInterval(this.intervalId)},t.onVideoTimeUpdate=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1;var e=F(this.video),t=performance.now();this.fps=1e3*Math.max(e-this.lastDecodedFrames,0)/(t-this.lastTimeUpdate),this.lastDecodedFrames=e,this.lastTimeUpdate=t,this.listener.onSinkTimeUpdate();var n=H(this.video,V);this.checkBufferUpdate(n),this.updateIdle(n)},t.onVideoEnded=function(){this.listener.onSinkEnded()},t.onVideoPlaying=function(){this.video.paused||this.listener.onSinkPlaying(this.paused)},t.onVideoSeeking=function(){this.seeking?this.seeking=!1:this.listener.seekTo(this.video.currentTime)},t.onVideoError=function(){var e=this.video.error,t=e.code,n=e.message,i=void 0===n?"":n;this.listener.onSinkError({value:t,code:t,message:i})},t.heartbeat=function(){var e=H(this.video,V);if(this.video.paused)clearInterval(this.intervalId);else if(this.video.currentTime===this.lastPlayhead){var t=K(this.video,V);t!==this.video.currentTime&&(console.warn("jumping "+(t-this.video.currentTime)+"s gap"),this.seekTo(t)),this.updateIdle(e)}else this.checkBufferUpdate(e),this.lastPlayhead=this.video.currentTime;this.videoDisplaySizeUpdate()},t.videoDisplaySizeUpdate=function(){var e=this.video.clientWidth*window.devicePixelRatio,t=this.video.clientHeight*window.devicePixelRatio;this.listener.onSinkVideoDisplaySizeChanged(e,t)},t.checkBufferUpdate=function(e){var t=e.end;t!==this.lastBufferEnd&&(this.lastBufferEnd=t,this.listener.onSinkBufferUpdate())},t.updateIdle=function(e){var t=this,n=(e.start,e.end);if(this.video.paused)this.idle=!0;else{var i=n-this.video.currentTime<V;i&&!this.idle&&(this.idleTimeout=self.setTimeout((function(){return t.onBufferingTimeout()}),12e4),this.listener.onSinkIdle()),this.idle=i}},t.onBufferingTimeout=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1,this.listener.onSinkError({value:101,code:101,message:"Buffering timeout"})},t.checkStopped=function(e){!this.video.paused||this.video.ended||this.video.error||this.paused||this.listener.onSinkStop(e)},t.playInternal=function(){var e=this;this.playAttempt=!0,j.resolve(this.video.play()).catch((function(){e.playAttempt=!1,e.checkStopped(!0)}))},t.addListener=function(e,t){this.onDelete[e]=G(this.video,e,t)},e}(),z=function(){function e(){this.buffer=[],this.head=0,this.tail=0}var t=e.prototype;return t.push=function(e){this.tail===this.buffer.length?this.buffer.push(e):this.buffer[this.tail]=e,this.tail++},t.pop=function(){var e=this.buffer[this.head];return this.buffer[this.head]=null,this.head++,this.empty()&&(this.head=0,this.tail=0),e},t.size=function(){return this.tail-this.head},t.empty=function(){return this.head>=this.tail},e}(),X=function(){function e(e,t){this.video=e,this.srcBuf=t,this.pending=new z,this.srcBuf.addEventListener("updateend",this.process.bind(this))}var t=e.prototype;return t.appendBuffer=function(e){this.schedule((function(t){try{t.appendBuffer(e)}catch(e){if("QuotaExceededError"===e.name){var n=t.buffered,i=n.start(0),r=n.end(n.length-1),s=(i+r)/2;t.remove(s,r)}}}))},t.setTimestampOffset=function(e){this.schedule((function(t){t.timestampOffset=e}))},t.remove=function(e,t){this.schedule((function(n){var i=n.buffered;if(i.length){var r=Math.max(e,i.start(0)),s=Math.min(t,i.end(i.length-1));r<s&&n.remove(r,s)}}))},t.schedule=function(e){this.pending.empty()&&!this.updating()?e(this.srcBuf):(this.pending.push(e),this.process())},t.process=function(){for(;!this.pending.empty()&&!this.updating();)this.pending.pop()(this.srcBuf)},t.updating=function(){return!this.srcBuf||this.srcBuf.updating||null!==this.video.error},e}();function J(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Z(e){return""===e.codecs||"undefined"==typeof MediaSource||MediaSource.isTypeSupported('video/mp4;codecs="'+e.codecs+'"')}function $(e){var t,n;return void 0!==e.hidden?(t="hidden",n="visibilitychange"):void 0!==e.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==e.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),{hidden:t,visibilityChange:n}}function ee(e,t,n){return Math.min(n,Math.max(t,e))}function te(e){e.removeAttribute("src")}var ne=function(){function e(e,t,n){this.video=t,this.metaTrack=n,this.codecs=Object.create(null),this.listener=e,this.playbackMonitor=new q(t,e),this.mediaSource=null,this.tracks=Object.create(null),this.trackOffsets=Object.create(null),this.removeTimeupdateListener=ie}var t=e.prototype;return t.configure=function(e){var t=e.trackID,n=e.codec;this.codecs[t]=n,this.mediaSource||(this.mediaSource=re(this.video)),this.tracks[t]||this.addSourceBuffer(t,n,0)},t.enqueue=function(e){var t=e.trackID,n=e.buffer,i=this.tracks[t];i&&i.then((function(e){return e.appendBuffer(n)}),ie)},t.endOfStream=function(){var e=this;this.scheduleUpdate().then((function(){return e.playbackMonitor.endOfStream()}))},t.setTimestampOffset=function(e){var t=e.trackID,n=e.offset,i=this.tracks[t];i&&(this.trackOffsets[t]=n,i.then((function(e){return e.setTimestampOffset(n)}),ie))},t.onSourceDurationChanged=function(e){var t=this;this.mediaSource.then((function(n){var i=function(e,t,n){var i=null;e===1/0?n&&t!==1/0?i=e:n||t===B||(i=B):e!==t&&(i=e);return i}(e,n.duration,t.video.controls);null!==i&&t.updateMediaSourceDuration(n,i)})),this.removeTimeupdateListener(),this.removeTimeupdateListener=G(this.video,"timeupdate",(function(){return t.onSourceDurationChanged(e)}))},t.play=function(){var e=this;this.scheduleUpdate().then((function(){return e.playbackMonitor.play()}))},t.pause=function(){var e=this;this.scheduleUpdate().then((function(){return e.playbackMonitor.pause()}))},t.remove=function(e){var t=e.start,n=e.end,i=function(e){return e.remove(t,n)};for(var r in this.tracks)this.tracks[r].then(i);this.metaTrack.remove(t,n)},t.seekTo=function(e){var t=this,n=H(this.video,V),i=n.start,r=n.end;e>=i&&e<r?this.scheduleUpdate().then((function(){return t.playbackMonitor.seekTo(e)})):this.playbackMonitor.seekTo(e)},t.setVolume=function(e){this.video.volume!==e&&(this.video.volume=e)},t.getVolume=function(){return this.video.volume},t.isMuted=function(){return this.video.muted},t.setMuted=function(e){this.video.muted!==e&&(this.video.muted=e)},t.getDisplayWidth=function(){return this.video.clientWidth},t.getDisplayHeight=function(){return this.video.clientHeight},t.setPlaybackRate=function(e){this.video.playbackRate=e},t.getPlaybackRate=function(){return this.video.playbackRate},t.getCurrentTime=function(){return this.video.currentTime},t.addCue=function(e,t,n){t<=e&&(t=e+V);var i=new(window.VTTCue||window.TextTrackCue)(e,t,"");i.onenter=function(){return n(!0)},i.onexit=function(){return n(!1)},this.metaTrack.addCue(i)},t.buffered=function(){return H(this.video,V)},t.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.video.currentTime)},t.decodedFrames=function(){return F(this.video)},t.droppedFrames=function(){return W(this.video)},t.framerate=function(){return this.playbackMonitor.framerate()},t.captureGesture=function(){this.playbackMonitor.play(),this.playbackMonitor.pause()},t.delete=function(){if(this.removeTimeupdateListener(),this.playbackMonitor.delete(),this.metaTrack.remove(0,1/0),this.video.src){var e=this.video.src;te(this.video),this.video.load(),URL.revokeObjectURL(e)}},t.addSourceBuffer=function(e,t,n){var i=this,r=this.mediaSource.then((function(e){var r=e.addSourceBuffer("video/mp4;"+t);return r.timestampOffset=n,new X(i.video,r)}));r.catch((function(e){return i.listener.onSinkError({value:4,code:4,message:e.toString()})})),this.tracks[e]=r},t.scheduleUpdate=function(){function e(e){return new j((function(t){return e.schedule(t)}))}var t=[];for(var n in this.tracks)t.push(this.tracks[n].then(e));return j.all(t).catch(ie)},t.updateMediaSourceDuration=function(e,t){var n=this;if("open"===e.readyState)e.duration=t;else var i=G(e,"sourceopen",(function(){i(),"open"===e.readyState&&n.scheduleUpdate().then((function(){e.duration=t}))}))},e}();function ie(){}function re(e){return new j((function(t,n){var i=new MediaSource;i.addEventListener("sourceopen",(function e(){i.removeEventListener("sourceopen",e),"open"===i.readyState?(i.duration=B,t(i)):n(new Error("MediaSource not opened"))}));var r=e.playbackRate;e.src=URL.createObjectURL(i),e.playbackRate=r}))}var se=function(){function e(e,t){var n=this;this.listener=e,this.videoElement=t,this.unsubList=[],this.fps=0,this.intervalId=-1,this.paused=!0,this.attemptingToPlay=!1,this.hasReloadedOnDecodeError=!1;var i=$(document).visibilityChange;this.unsubList=[G(this.videoElement,"waiting",(function(){return n.onVideoWaiting()})),G(this.videoElement,"timeupdate",(function(){return n.onVideoTimeUpdate()})),G(this.videoElement,"durationchange",(function(){return n.onVideoDurationChange()})),G(this.videoElement,"error",(function(){return n.onVideoError()})),G(this.videoElement,"play",(function(){return n.onVideoPlay()})),G(this.videoElement,"pause",(function(){return n.onVideoPause()})),G(this.videoElement,"ended",(function(){return n.onVideoEnded()})),G(this.videoElement,"playing",(function(){return n.onVideoPlaying()})),G(document,i,(function(){return n.onVisibilityChange()}))]}var t=e.prototype;return t.configure=function(e){var t=e.path;this.hasReloadedOnDecodeError=!1,this.videoElement.src=t},t.play=function(){var e=this,t=this.videoElement.buffered;if(t.length>0){var n=t.start(t.length-1),i=t.end(t.length-1);(this.videoElement.duration===1/0&&i<this.videoElement.currentTime||-1===this.videoElement.src.indexOf(".mp4")&&this.videoElement.currentTime<n)&&(console.warn("Moving to buffered region"),this.videoElement.currentTime=n)}this.paused=!1,this.attemptingToPlay=!0,Promise.resolve(this.videoElement.play()).then((function(){e.attemptingToPlay=!1})).catch((function(){e.attemptingToPlay=!1,e.checkStopped(!0)})),this.listener.onSinkPlay()},t.pause=function(){this.paused=!0,this.videoElement.pause(),clearTimeout(this.intervalId)},t.seekTo=function(e){this.videoElement.currentTime=e},t.setPlaybackRate=function(e){this.videoElement.playbackRate=e},t.setVolume=function(e){this.videoElement.volume=e},t.getVolume=function(){return this.videoElement.volume},t.buffered=function(){return H(this.videoElement,V)},t.decodedFrames=function(){return F(this.videoElement)},t.droppedFrames=function(){return W(this.videoElement)},t.framerate=function(){return this.fps},t.delete=function(){this.unsubList.forEach((function(e){return e()})),this.videoElement.src="",this.videoElement.load()},t.isMuted=function(){return this.videoElement.muted},t.setMuted=function(e){this.videoElement.muted=e},t.getDisplayWidth=function(){return this.videoElement.clientWidth},t.getDisplayHeight=function(){return this.videoElement.clientHeight},t.getPlaybackRate=function(){return this.videoElement.playbackRate},t.getCurrentTime=function(){return this.videoElement.currentTime},t.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.videoElement.currentTime)},t.enqueue=function(){},t.endOfStream=function(){},t.setTimestampOffset=function(){},t.addCue=function(e,t,n){},t.remove=function(){},t.onSourceDurationChanged=function(e){},t.captureGesture=function(){Promise.resolve(this.videoElement.play()).catch((function(){})),this.videoElement.pause()},t.onVideoWaiting=function(){var e=this;if(H(this.videoElement,V).end-this.videoElement.currentTime<V){this.listener.onSinkIdle();var t=self.setTimeout((function(){e.listener.onSinkError({value:101,code:101,message:"Buffering timeout"})}),12e4),n=G(this.videoElement,"timeupdate",(function(){n(),clearTimeout(t)}))}var i=G(this.videoElement,"timeupdate",(function(){4===e.videoElement.readyState&&(i(),e.onVideoPlaying())}))},t.onVideoTimeUpdate=function(){this.listener.onSinkTimeUpdate(),this.listener.onSinkVideoDisplaySizeChanged(this.videoElement.clientWidth*self.devicePixelRatio,this.videoElement.clientHeight*self.devicePixelRatio)},t.onVideoDurationChange=function(){this.listener.onSinkDurationChanged(this.videoElement.duration)},t.onVideoError=function(){var e=this.videoElement.error,t=this.videoElement.error,n=t.code,i=t.message,r=void 0===i?"":i;3!==e.code||this.hasReloadedOnDecodeError?this.listener.onSinkError({value:n,code:n,message:r}):this.hasReloadedOnDecodeError||(this.hasReloadedOnDecodeError=!0,console.warn("Reload video element on MEDIA_ERR_DECODE 3"),this.videoElement.load())},t.onVideoPlay=function(){var e=this,t=this.videoElement.currentTime;clearTimeout(this.intervalId),this.intervalId=self.setTimeout((function(){return e.heartbeat(t)}),2e3)},t.onVideoPause=function(){clearTimeout(this.intervalId),this.attemptingToPlay||this.checkStopped(!1)},t.onVideoEnded=function(){this.listener.onSinkEnded()},t.onVideoPlaying=function(){this.listener.onSinkPlaying(this.paused),this.trackFPS(F(this.videoElement),performance.now()),this.trackBufferUpdate(H(this.videoElement,V).end)},t.onVisibilityChange=function(){var e=$(document).hidden;document[e]&&(this.hasReloadedOnDecodeError=!1)},t.heartbeat=function(e){var t,n,i,r,s,o=this,a=this.videoElement.currentTime;if(a===e){if(t=this.videoElement,i=H(t,n=V).end,r=t.currentTime,s=i-r,!(t.ended||t.duration-r<n)&&s<n)return void this.listener.onSinkIdle();var u=K(this.videoElement,V);u!==a&&(console.warn("jumping "+(u-a)+"s gap"),this.videoElement.currentTime=u,a=this.videoElement.currentTime)}this.intervalId=self.setTimeout((function(){return o.heartbeat(a)}),2e3)},t.checkStopped=function(e){!this.videoElement.paused||this.videoElement.ended||this.videoElement.error||this.paused||this.listener.onSinkStop(e)},t.trackFPS=function(e,t){var n=this,i=F(this.videoElement),r=performance.now();this.fps=(i-e)/(r-t)*1e3;var s=G(this.videoElement,"timeupdate",(function(){s(),n.trackFPS(i,r)}))},t.trackBufferUpdate=function(e){var t=this,n=this.buffered().end;n!==e&&this.listener.onSinkBufferUpdate();var i=G(this.videoElement,"timeupdate",(function(){i(),t.trackBufferUpdate(n)}))},e}(),oe=function(){function e(e){this.video=e,this.tracks=[e.addTextTrack("metadata")]}var t=e.prototype;return t.addCue=function(e){var t,n=this.tracks,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s,a=o.cues;if(!a.length||a[a.length-1].startTime<e.startTime&&a[a.length-1].endTime!==e.endTime){t=o;break}}if(this.tracks.length>100)console.warn("max text tracks created");else{t||(t=this.video.addTextTrack("metadata"),this.tracks.push(t));try{t.addCue(e)}catch(t){console.warn(t);var u=this.video.addTextTrack("metadata");this.tracks.push(u);try{u.addCue(e)}catch(t){console.warn("Player could not add cue at start ",e.startTime,"end ",e.endTime)}}}},t.remove=function(e,t){this.tracks.forEach((function(n){for(var i=n.cues,r=i.length-1;r>=0;r--){var s=i[r];if(s.startTime<e)break;s.endTime<t&&n.removeCue(s)}}))},e}(),ae=function(){function e(e,t){this.video=t||document.createElement("video"),this.metaTrack=new oe(this.video),this.listener=e,this.drmManager=new x({video:this.video,listener:e}),this.codecs=Object.create(null),this.sink=new ue(this.video),I.a.lookForRemotePlaybackDevices(this.listener),this.observerUnsubscribe=Y(this.video,e).unsub}var t=e.prototype;return t.delete=function(){this.sink.delete(),this.drmManager.reset()},t.configure=function(e){var t=e.mode,n=e.codec,i=e.trackID;this.sink instanceof ue&&(this.sink="chromecast"===t?new I.a(this.listener):"passthrough"===t?new se(this.listener,this.video):new ne(this.listener,this.video,this.metaTrack)),n?this.codecs[i]=n:e.codec=this.codecs[i],this.sink.configure(e);var r=e.path,s=e.isProtected;r&&s&&this.drmManager.configure(r)},t.applyRPC=function(e){var t=e.name,n=e.arg;this.sink[t].call(this.sink,n)},t.getCurrentSink=function(){return this.sink},t.reset=function(){this.delete(),this.sink=new ue(this.video),this.listener.onSinkTimeUpdate(),this.listener.onSinkBufferUpdate()},t.videoElement=function(){return this.video},t.isProtected=function(){return this.drmManager.isProtected()},t.captureGesture=function(){this.video.played.length||this.sink.captureGesture()},t.destroy=function(){this.observerUnsubscribe(),this.delete()},e}(),ue=function(){function e(e){this.video=e}var t=e.prototype;return t.configure=function(e){},t.enqueue=function(e){},t.endOfStream=function(){},t.setTimestampOffset=function(e){},t.onSourceDurationChanged=function(e){},t.play=function(){},t.pause=function(){},t.remove=function(e){},t.seekTo=function(e){},t.setPlaybackRate=function(e){this.video.playbackRate=e},t.setVolume=function(e){this.video.volume=e},t.addCue=function(e,t,n){},t.buffered=function(){return{start:0,end:0}},t.decodedFrames=function(){return 0},t.droppedFrames=function(){return 0},t.framerate=function(){return 0},t.delete=function(){},t.getVolume=function(){return this.video.volume},t.isMuted=function(){return this.video.muted},t.setMuted=function(e){this.video.muted=e},t.getDisplayWidth=function(){return 0},t.getDisplayHeight=function(){return 0},t.getPlaybackRate=function(){return this.video.playbackRate},t.getCurrentTime=function(){return 0},t.bufferDuration=function(){return 0},t.captureGesture=function(){},e}();var ce=n("fiWp"),de=function(){function e(){this.emitter=new ce.EventEmitter}var t=e.prototype;return t.on=function(e,t){this.emitter.on(String(e),t)},t.removeListener=function(e,t){this.emitter.removeListener(String(e),t)},t.emit=function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.emitter).emit.apply(t,[String(e)].concat(i))},e}(),he=n("3OWR"),le=n.n(he),fe=n("Xdxp"),me=n.n(fe),pe=function(){function e(e){var t=e.isIPv4,n=e.onResultsReady;this.trackingProperties={},this.isIPv4=t,this.onResultsReady=n;try{this.createPeerConnection()}catch(e){this.sendSpadeEvent()}}var t=e.prototype;return t.createPeerConnection=function(){var e=this;this.peerConnection=new RTCPeerConnection,this.peerConnection.onicecandidate=this.onIceCandidate.bind(this),this.peerConnection.onnegotiationneeded=function(){e.peerConnection.createOffer().then((function(t){e.peerConnection.setLocalDescription(t)}))},this.dataChannel=this.peerConnection.createDataChannel("datachannel")},t.onIceCandidate=function(e){var t=this;if(null===e.candidate){var n=btoa(JSON.stringify(this.peerConnection.localDescription));this.makeHTTPRequest(n).then((function(e){t.recordTrackingProperty("webrtc_attempt_id",e.webrtc_attempt_id);var n=e.offer_base64;try{var i=JSON.parse(atob(n));t.checkUDP(i)}catch(e){t.sendSpadeEvent()}}),this.sendSpadeEvent.bind(this))}},t.makeHTTPRequest=function(e){var t=this;return this.recordTrackingProperty("webrtc_http_start",Date.now()),new Promise((function(n,i){var r=t.isIPv4?"https://ipv4.webrtc-test.ttvnw.net/data-channel-handshake":"https://ipv6.webrtc-test.ttvnw.net/data-channel-handshake";fetch(r,{method:"POST",body:e,headers:{"Content-Type":"text/plain"}}).then((function(e){t.recordTrackingProperty("webrtc_http_success",Date.now()),n(e.json())})).catch((function(e){t.recordTrackingProperty("webrtc_http_error",Date.now()),i()})),window.setTimeout(i,1e4)}))},t.checkUDP=function(e){var t=this;this.recordTrackingProperty("webrtc_udp_start",Date.now()),new Promise((function(n,i){t.dataChannel.onopen=function(){t.recordTrackingProperty("webrtc_udp_success",Date.now())},t.dataChannel.onmessage=function(e){me()(e.data),t.recordTrackingProperty("webrtc_message",Date.now()),n()},t.dataChannel.onerror=function(){t.recordTrackingProperty("webrtc_udp_error",Date.now()),i()},window.setTimeout(i,1e4),t.peerConnection.setRemoteDescription(e)})).then(this.sendSpadeEvent.bind(this),this.sendSpadeEvent.bind(this))},t.recordTrackingProperty=function(e,t){this.trackingProperties[e]=t},t.sendSpadeEvent=function(){var e=le()({},{webrtc_v6:!this.isIPv4},this.trackingProperties);this.onResultsReady("webrtc_client_ping",e),this.destroy()},t.destroy=function(){this.trackingProperties={},this.dataChannel&&this.dataChannel.close(),this.peerConnection&&this.peerConnection.close()},e}(),ve=function(){function e(e){var t=e.isIPv4,n=e.onResultsReady;this.isIPv4=t,this.onResultsReady=n,this.initialDelay=Math.round(1e3*Math.random()),this.timeoutId=window.setTimeout(this.runExperiment.bind(this),this.initialDelay)}var t=e.prototype;return t.runExperiment=function(){this.clearExperimentModule(),this.experiment=new pe({isIPv4:this.isIPv4,onResultsReady:this.onResultsReady}),this.timeoutId=window.setTimeout(this.runExperiment.bind(this),6e4)},t.clearExperimentModule=function(){this.experiment&&this.experiment.destroy(),this.experiment=null},t.destroy=function(){window.clearTimeout(this.timeoutId),this.clearExperimentModule()},e}(),ge=function(){function e(e){this.listener=e,this.dataChannelMap=new Map}var t=e.prototype;return t.createDataChannel=function(e,t){var n,i=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e&&(e="data"),void 0===t&&(t={id:0,negotiated:!0,ordered:!1,reliable:!1,maxRetransmits:0}),!this.peerConnection){this.peerConnection=new RTCPeerConnection({sdpSemantics:"unified-plan",rtcpMuxPolicy:"require"});try{this.peerConnection.onnegotiationneeded=function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(i.peerConnection.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1}));case 2:return e=t.sent,t.next=5,regeneratorRuntime.awrap(i.peerConnection.setLocalDescription(e));case 5:i.listener.onOffer(e.type,e.sdp);case 6:case"end":return t.stop()}}))}}catch(e){this.listener.onError("connection","error")}}(n=this.peerConnection.createDataChannel(e,t)).binaryType="arraybuffer",this.dataChannelMap.set(e,n),n.onmessage=function(t){i.listener.onMessage(e,t.data)},n.onopen=function(){return i.listener.onOpen(e)},n.onclose=function(){return i.listener.onClose(e)},n.onerror=function(t){return i.listener.onError(e,t.message)};case 10:case"end":return r.stop()}}),null,this)},t.close=function(e){this.peerConnection&&this.peerConnection.close()},t.setRemoteDescription=function(e){this.peerConnection||this.listener.onError("connection","No peer connection"),this.peerConnection.setRemoteDescription(e)},e}(),ye=function(){function e(e,t){var n=this;this.workerPort={postMessage:this.postMessageFromWorker.bind(this),onmessage:function(){}},this.emitter=new ce.EventEmitter,this.messageQueue=new z,this.terminated=!1,this.loadScript(e,(function(e){return n.applyWorkerEnv(e,t)}))}var t=e.prototype;return t.postMessage=function(e){this.messageQueue?this.messageQueue.push(e):this.postMessageToWorker(e)},t.terminate=function(){this.terminated=!1},t.addEventListener=function(e,t){this.emitter.on(e,t)},t.removeEventListener=function(e,t){this.emitter.off(e,t)},t.loadScript=function(e,t){var n=this,i=new XMLHttpRequest;i.open("GET",e),i.addEventListener("load",(function(){i.status>=200&&i.status<400?t(i.response):n.emitter.emit("error",new Error(i.statusText))})),i.addEventListener("error",(function(e){n.emitter.emit("error",e)})),i.send()},t.applyWorkerEnv=function(e,t){try{Function("self","messageHandler",e)(window,this.workerPort)}catch(e){return void this.emitter.emit("error",e)}for(;!this.messageQueue.empty();)this.postMessageToWorker(this.messageQueue.pop());this.messageQueue=null},t.postMessageFromWorker=function(e){var t=this;setTimeout((function(){t.emitter.emit("message",{data:e})}),0)},t.postMessageToWorker=function(e){var t=this;setTimeout((function(){t.workerPort.onmessage({data:e})}),0)},e}(),Ee="object"==typeof window.WebAssembly&&"function"==typeof window.WebAssembly.instantiate,Se="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');function ke(e,t){var n;return(n=i.a.msie?new ye(e,window):new Worker(URL.createObjectURL(new Blob(["importScripts('"+e+"')"])))).postMessage({wasmBinaryUrl:t}),n}var be,Te,Ce,we=i.a.chrome&&63===i.a.major||i.a.opera,Pe=function(){function e(t,n){var s,o=this;if(this.worker=n,this.id=e.instanceId++,this.emitter=new de,this.seekTime=null,this.paused=!0,this.isLoaded=!1,this.autoplay=!1,this.expectingMutedChanged=!1,this.isQualitySupported=t.isQualitySupported||Z,this.onvisibilitychange=function(){return o.onVisibilityChange()},this.onmessage=function(e){return o.onWorkerMessage(e)},this.mediaSinkManager=new ae(this),this.webRTCDataChannelManager=new ge({onClose:function(e){return o.postMessage("onWebRTCDataChannelClose",[e])},onError:function(e,t){return o.postMessage("onWebRTCDataChannelError",[e,t])},onMessage:function(e,t){return o.postMessage("onWebRTCDataChannelMessage",[e,t],[t])},onOpen:function(e){return o.postMessage("onWebRTCDataChannelOpen",[e])},onOffer:function(e,t){return o.postMessage("onWebRTCPeerConnectionOffer",[e,t])}}),this.experiments=null,this.workerMessageProcessors=[P],L.isSupported()){var a=new L;this.workerMessageProcessors.push(a.processor)}this.state={looping:!1,autoSwitchQuality:!0,volume:1},this.stats={},this.resetState(),this.attachHandlers(),this.postMessage("create",[{logLevel:String(t.logLevel),mseSupported:r(),keySystem:void 0!==t.keySystem?t.keySystem:(s=i.a,"function"==typeof navigator.requestMediaKeySystemAccess?s.safari?"":s.msie||s.msedge?h.PLAYREADY.uuid:h.WIDEVINE.uuid:""),browserContext:i.a,codecs:e.isVP9Supported()?["vp09"]:[]}])}e.isVP9Supported=function(){return"Windows"===i.a.osName&&r()&&MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')};var t=e.prototype;return t.delete=function(){var e=$(document).visibilityChange;this.postMessage("delete"),this.webRTCConnectivityManagerIPv4&&(this.webRTCConnectivityManagerIPv4.destroy(),this.webRTCConnectivityManagerIPv4=null),this.webRTCConnectivityManagerIPv6&&(this.webRTCConnectivityManagerIPv6.destroy(),this.webRTCConnectivityManagerIPv6=null),this.worker.removeEventListener("message",this.onmessage),document.removeEventListener(e,this.onvisibilitychange),this.mediaSinkManager.getCurrentSink().delete(),this.emitter=null},t.attachHTMLVideoElement=function(e){this.mediaSinkManager&&this.mediaSinkManager.destroy(),this.mediaSinkManager=new ae(this,e),this.processVideoElementAttributes(e)},t.getHTMLVideoElement=function(){return this.mediaSinkManager.videoElement()},t.load=function(e,t){void 0===t&&(t=""),this.postMessage("load",[e,t]),this.resetState()},t.play=function(){this.mediaSinkManager.captureGesture(),this.paused=!1,this.attemptPlay()},t.setAutoplay=function(e){this.autoplay=e},t.getExperiments=function(){return this.experiments},t.setExperiment=function(e,t){this.postMessage("setExperiment",[e,t])},t.pause=function(){this.paused=!0,this.postMessage("pause")},t.isPaused=function(){return this.paused},t.seekTo=function(e){this.getDuration()>.5&&(e=Math.min(e,this.getDuration()-.5)),e=Math.max(0,e),this.seekTime=e,this.postMessage("seekTo",[e])},t.isSeeking=function(){return null!==this.seekTime},t.getAutoplay=function(){return this.autoplay},t.getDuration=function(){return this.state.duration},t.getStartOffset=function(){return this.state.startOffset||0},t.getPosition=function(){return null===this.seekTime?this.mediaSinkManager.getCurrentSink().getCurrentTime():this.seekTime},t.getBuffered=function(){return this.mediaSinkManager.getCurrentSink().buffered()},t.getBufferDuration=function(){return this.mediaSinkManager.getCurrentSink().bufferDuration()},t.getPlayerState=function(){return this.state.playerState},t.getState=function(){return this.state.playerState},t.getVideoWidth=function(){return this.mediaSinkManager.videoElement().videoWidth},t.getVideoHeight=function(){return this.mediaSinkManager.videoElement().videoHeight},t.getVideoFrameRate=function(){return this.mediaSinkManager.getCurrentSink().framerate()},t.getVideoBitRate=function(){return this.stats.videoBitRate},t.getAverageBitrate=function(){return this.stats.averageBitrate},t.getBandwidthEstimate=function(){return this.stats.bandwidthEstimate},t.getVersion=function(){return"0.9.5-92226dd2"},t.isLiveLowLatency=function(){return Boolean(this.state.sessionData.FUTURE)},t.isLooping=function(){return this.state.looping},t.setLooping=function(e){this.postMessage("setLooping",[e]),this.state.looping=e},t.isMuted=function(){return this.mediaSinkManager.getCurrentSink().isMuted()},t.setMuted=function(e){this.isMuted()!==e&&(this.expectingMutedChanged=!0),this.mediaSinkManager.getCurrentSink().setMuted(e)},t.setVolume=function(e){this.state.volume=e,this.postMessage("setVolume",[this.state.volume])},t.getVolume=function(){return this.state.volume},t.getQuality=function(){return this.state.quality},t.setQuality=function(e,t){void 0===t&&(t=!1),this.mediaSinkManager.videoElement().controls||(this.postMessage("setQuality",[e,t]),this.state.autoSwitchQuality=!1)},t.getQualities=function(){return this.state.qualities},t.setAuthToken=function(e){this.postMessage("setAuthToken",[e])},t.getAutoSwitchQuality=function(){return this.state.autoSwitchQuality},t.setAutoSwitchQuality=function(e){this.state.autoSwitchQuality=e,this.postMessage("setAutoSwitchQuality",[e])},t.setAutoInitialBitrate=function(e){this.postMessage("setAutoInitialBitrate",[e])},t.setAutoMaxBitrate=function(e){this.postMessage("setAutoMaxBitrate",[e])},t.setAutoMaxVideoSize=function(e,t){this.postMessage("setAutoMaxVideoSize",[e,t])},t.setAutoViewportSize=function(e,t){this.postMessage("setAutoViewportSize",[e,t])},t.getPlaybackRate=function(){return this.mediaSinkManager.getCurrentSink().getPlaybackRate()},t.setPlaybackRate=function(e){return this.mediaSinkManager.getCurrentSink().setPlaybackRate(e)},t.setClientId=function(e){this.postMessage("setClientId",[e])},t.setDeviceId=function(e){this.postMessage("setDeviceId",[e])},t.setLiveSpeedUpRate=function(e){this.postMessage("setLiveSpeedUpRate",[e])},t.setPlayerType=function(e){this.postMessage("setPlayerType",[e])},t.setLiveMaxLatency=function(e){this.postMessage("setLiveMaxLatency",[e])},t.setLiveLowLatencyEnabled=function(e){this.postMessage("setLiveLowLatencyEnabled",[e])},t.setMinBuffer=function(e){this.postMessage("setMinBuffer",[e])},t.setMaxBuffer=function(e){this.postMessage("setMaxBuffer",[e])},t.setRebufferToLive=function(e){this.postMessage("setRebufferToLive",[e])},t.setVisible=function(e){this.postMessage("setVisible",[e])},t.setAnalyticsEndpoint=function(e){this.postMessage("setAnalyticsEndpoint",[e])},t.setAnalyticsSendEvents=function(e){this.postMessage("setAnalyticsSendEvents",[e])},t.addEventListener=function(e,t){this.emitter.on(e,t)},t.removeEventListener=function(e,t){this.emitter.removeListener(e,t)},t.getDroppedFrames=function(){return this.mediaSinkManager.getCurrentSink().droppedFrames()},t.getDecodedFrames=function(){return this.mediaSinkManager.getCurrentSink().decodedFrames()},t.getDisplayWidth=function(){return this.mediaSinkManager.getCurrentSink().getDisplayWidth()},t.getDisplayHeight=function(){return this.mediaSinkManager.getCurrentSink().getDisplayHeight()},t.getSessionId=function(){return this.state.sessionId},t.getSessionData=function(){return this.state.sessionData},t.getLiveLatency=function(){return this.stats.broadcasterLatency},t.getTranscoderLatency=function(){return 1e3*this.stats.transcoderLatency},t.isProtected=function(){return this.mediaSinkManager.isProtected()},t.startRemotePlayback=function(){this.postMessage("startRemotePlayback")},t.endRemotePlayback=function(){this.postMessage("endRemotePlayback")},t.onSinkTimeUpdate=function(){var e=this.mediaSinkManager.getCurrentSink();null===this.seekTime&&(this.postMessage("onClientSinkUpdate",[{currentTime:e.getCurrentTime(),decodedFrames:e.decodedFrames(),droppedFrames:e.droppedFrames(),framerate:e.framerate()}]),this.emitter.emit(o.TIME_UPDATE))},t.onSinkBufferUpdate=function(){this.emitter.emit(o.BUFFER_UPDATE)},t.onSinkDurationChanged=function(e){this.postMessage("onClientSinkDurationChanged",[e])},t.onSinkEnded=function(){this.postMessage("onClientSinkEnded")},t.onSinkIdle=function(){this.postMessage("onClientSinkIdle")},t.onSinkPlaying=function(e){this.postMessage("onClientSinkPlaying"),e&&this.play()},t.onSinkStop=function(e){var t=$(document).hidden;document[t]?this.postMessage("pause"):e?this.isMuted()?(this.pause(),this.emitter.emit(o.PLAYBACK_BLOCKED)):(this.setMuted(!0),this.mediaSinkManager.getCurrentSink().play(),this.emitter.emit(o.AUDIO_BLOCKED)):this.pause()},t.onSinkError=function(e){var t=e.value,n=e.code,i=e.message;this.postMessage("onClientSinkError",[t,n,i])},t.onSinkPlay=function(){this.emitter.emit(o.PROFILE,M.VIDEO_ELEMENT_PLAY)},t.onSinkVideoDisplaySizeChanged=function(e,t){this.setAutoViewportSize(e,t)},t.onSinkVolumeChanged=function(e){this.mediaSinkManager.videoElement().controls&&(this.state.volume=e),this.emitter.emit(o.VOLUME_CHANGED)},t.onSinkMutedChanged=function(e){this.expectingMutedChanged=!1,this.postMessage("setMuted",[e]),this.emitter.emit(o.MUTED_CHANGED)},t.onSinkPlaybackRateChanged=function(e){this.postMessage("setPlaybackRate",[e])},t.onRemoteDevice=function(e){this.emitter.emit(e?D.AVAILABLE:D.UNAVAILABLE)},t.onRemoteReconnect=function(){this.startRemotePlayback()},t.onSessionError=function(){this.postMessage("onClientSinkError",[1,0,"Chromecast session error"])},t.onLoadMediaError=function(){this.postMessage("onClientSinkError",[1,0,"Chromecast load media failed"])},t.onUserCancel=function(){this.endRemotePlayback(),this.emitter.emit(D.SESSION_ENDED)},t.onSessionStop=function(){this.endRemotePlayback(),this.emitter.emit(D.SESSION_ENDED)},t.onSessionStarted=function(e){this.emitter.emit(D.SESSION_STARTED,e)},t.startWarpExperiment=function(e){e?this.webRTCConnectivityManagerIPv4=new ve({isIPv4:!0,onResultsReady:this.onWebRTCExperimentResultsReady.bind(this)}):this.webRTCConnectivityManagerIPv6=new ve({isIPv4:!1,onResultsReady:this.onWebRTCExperimentResultsReady.bind(this)})},t.onWebRTCExperimentResultsReady=function(e,t){this.postMessage("triggerAnalyticsEvent",[e,JSON.stringify(t)])},t.attemptPlay=function(){var e=$(document).hidden;!document[e]&&this.isLoaded&&this.postMessage("play")},t.getDecodingInfo=function(e){var t=this;navigator.mediaCapabilities.decodingInfo(e).then((function(e){t.postMessage("onMediaDecodingInfoResult",[e])}))},t.postMessage=function(e,t,n){void 0===n&&(n=[]),this.worker.postMessage({id:this.id,funcName:e,args:t},n)},t.resetState=function(){J(this.state,{playerState:A.IDLE,quality:{name:"",group:"",codecs:"",bitrate:0,width:0,height:0,framerate:0},qualities:[],duration:0,startOffset:0,sessionData:{},volume:1}),J(this.stats,{averageBitrate:0,videoBitRate:0,bandwidthEstimate:0,broadcasterLatency:0,transcoderLatency:0,networkProfile:[]}),this.emitter.emit(o.DURATION_CHANGED,{duration:0}),this.seekTime=null,this.isLoaded=!1},t.onConfigure=function(e){this.mediaSinkManager.configure(e),this.expectingMutedChanged&&this.onSinkMutedChanged(this.isMuted())},t.attachHandlers=function(){var e=this;this.worker.addEventListener("message",this.onmessage);var t=$(document).visibilityChange;document.addEventListener(t,this.onvisibilitychange);var n=this.emitter,i=function(t){return J(e.state,t)};n.on(o.QUALITY_CHANGED,i),n.on(o.AUTO_SWITCH_QUALITY_CHANGED,i),n.on(o.DURATION_CHANGED,i),n.on(o.VOLUME_CHANGED,(function(){return e.onVolumeChanged()})),n.on(o.MUTED_CHANGED,(function(){return e.onMutedChanged()})),n.on(o.SEEK_COMPLETED,(function(){return e.onSeekCompleted()})),n.on(o.ERROR,(function(){return e.onError()})),n.on(o.SESSION_DATA,(function(t){return e.onSessionData(t)})),n.on(1,(function(t){return J(e.stats,t)})),n.on(0,(function(t){return e.onStateChanged(t)})),n.on(6,(function(t){return e.mediaSinkManager.applyRPC(t)})),n.on(2,(function(t){return e.onConfigure(t)})),n.on(3,(function(){return e.mediaSinkManager.reset()})),n.on(4,(function(t){return e.addCue(t)})),n.on(5,(function(t){return e.getDecodingInfo(t)})),n.on(R.ID3,(function(t){return e.onID3(t)})),n.on(7,(function(t){e.experiments=t})),n.on(8,(function(t){e.state.sessionId=t})),n.on(9,(function(t){var n=t.label;return e.webRTCDataChannelManager.createDataChannel(n)})),n.on(10,(function(t){var n=t.label;return e.webRTCDataChannelManager.close(n)})),n.on(11,(function(t){var n=t.answer;return e.webRTCDataChannelManager.setRemoteDescription(n)}))},t.onVolumeChanged=function(){var e=$(document).hidden;we&&document[e]&&0===this.getVolume()&&this.postMessage("pause")},t.onMutedChanged=function(){var e=$(document).hidden;we&&document[e]&&this.isMuted()&&this.postMessage("pause")},t.onSeekCompleted=function(){this.seekTime=null},t.onError=function(){this.paused=!0},t.onStateChanged=function(e){var t=this;switch(e.playerState){case A.READY:var n=function(e,t){var n=[],i=[];return e.forEach((function(e){t(e)?n.push(e):i.push(e)})),{supported:n,unsupported:i}}(e.qualities,this.isQualitySupported);e.qualities=n.supported,n.unsupported.forEach((function(e){return t.postMessage("removeQuality",[e])})),this.isLoaded=!0,this.autoplay&&this.play(),this.paused||this.attemptPlay();break;case A.ENDED:this.paused=!0}J(this.state,e),this.emitter.emit(e.playerState)},t.addCue=function(e){var t=this,n=e.id,i=e.start,r=e.end;this.mediaSinkManager.getCurrentSink().addCue(i,r,(function(e){t.postMessage("onClientSinkCue",[n,e])}))},t.onID3=function(e){var t=this;e.forEach((function(e){if("TXXX"===e.id&&"segmentmetadata"===e.desc&&e.info.length){var n=function(e){try{return JSON.parse(e)}catch(t){return console.error("Failed JSON parse:",e),{}}}(e.info[0]);if(n.hasOwnProperty("stream_offset")){var i=Number(n.stream_offset);isNaN(i)||(t.state.startOffset=i-t.getPosition())}}}))},t.onVisibilityChange=function(){var e=$(document).hidden;this.paused||document[e]||this.attemptPlay(),we&&!this.paused&&document[e]&&(this.isMuted()||0===this.getVolume())&&this.postMessage("pause"),i.a.firefox||this.postMessage("setVisible",[!document[e]])},t.onSessionData=function(e){J(this.state,e)},t.onWorkerMessage=function(e){var t=e.data;if(t&&t.id===this.id){var n=this.workerMessageProcessors.reduce((function(e,t){return t(e)}),t),i=n.type,r=n.arg;void 0!==t.arg?this.emitter.emit(i,r):this.emitter.emit(i)}},t.processVideoElementAttributes=function(e){if(e.hasAttribute("autoplay")&&(e.removeAttribute("autoplay"),this.setAutoplay(!0)),e.hasAttribute("playbackRate")){var t=parseFloat(e.getAttribute("playbackRate"));if(!isNaN(t)){var n=ee(t,.25,2);this.setPlaybackRate(n)}e.removeAttribute("playbackRate")}if(e.hasAttribute("src")){var i=e.src;te(e),this.load(i)}if(e.hasAttribute("loop")&&(e.removeAttribute("loop"),this.setLooping(!0)),e.hasAttribute("muted")&&(e.removeAttribute("muted"),this.setMuted(!0)),e.hasAttribute("volume")){var r=parseFloat(e.getAttribute("volume"));isNaN(r)||this.setVolume(ee(r,0,1)),e.removeAttribute("volume")}},e}();function Re(e){var t=e.streamId,n=e.streamType,i=e.clientId,r=e.oAuthToken,s=["client_id="+i,"player_type="+e.playerType,"player_backend="+e.playerBackend,"platform="+e.platform];r&&s.push("oauth_token="+r);var o="https://api.twitch.tv/api/"+n+"s/"+t+"/access_token?"+s.join("&");return new Promise((function(e,t){var n=new XMLHttpRequest;n.open("GET",o),n.onerror=t,n.onload=function(){if(n.status>=200&&n.status<300)try{e(JSON.parse(n.responseText))}catch(e){t(e)}else t(new Error(n.responseText))},n.send()}))}function Me(e,t){var n,i=e.streamId,r=e.streamType,s=e.playerType,o=e.playerBackend,a=t.token,u=t.sig,c=["playlist_include_framerate=true","allow_source=true","player_type="+s,"player_backend="+o];return"vod"===r?(n="vod",c.push("nauth="+encodeURIComponent(a),"nauthsig="+u)):(n="api/channel/hls",c.push("token="+encodeURIComponent(a),"sig="+u)),"https://usher.ttvnw.net/"+n+"/"+i+".m3u8?"+c.join("&")}Pe.createWorker=ke,Pe.instanceId=0,function(e){e.UNKNOWN="Unspecified",e.FILE="File",e.PLAYLIST="Playlist",e.SEGMENT="Segment",e.SOURCE="Source",e.DECODER="Decode",e.RENDERER="Render"}(be||(be={})),function(e){e.GENERIC="Error",e.NOT_SUPPORTED="ErrorNotSupported",e.NO_SOURCE="ErrorNoSource",e.INVALID_DATA="ErrorInvalidData",e.INVALID_STATE="ErrorInvalidState",e.INVALID_PARAMETER="ErrorInvalidParameter",e.TIMEOUT="ErrorTimeout",e.INVALID_OUTPUT="ErrorInvalidOutput",e.INTERNAL="ErrorInternal",e.NETWORK="ErrorNetwork",e.NETWORK_IO="ErrorNetworkIO",e.AUTHORIZATION="ErrorAuthorization",e.NOT_AVAILABLE="ErrorNotAvailable"}(Te||(Te={})),function(e){e[e.GEOBLOCKED=1]="GEOBLOCKED",e[e.UNSUPPORTED_DEVICE=2]="UNSUPPORTED_DEVICE",e[e.ANONYMIZER_BLOCKED=3]="ANONYMIZER_BLOCKED",e[e.CELLULAR_NETWORK_PROHIBITED=4]="CELLULAR_NETWORK_PROHIBITED",e[e.UNAUTHORIZATION_ENTITLEMENTS=5]="UNAUTHORIZATION_ENTITLEMENTS",e[e.VOD_RESTRICTED=6]="VOD_RESTRICTED"}(Ce||(Ce={})),n.d(t,"isWasmSupported",(function(){return Ee})),n.d(t,"canPlay",(function(){return Se})),n.d(t,"createWorker",(function(){return ke})),n.d(t,"MediaPlayer",(function(){return Pe})),n.d(t,"ErrorSource",(function(){return be})),n.d(t,"ErrorType",(function(){return Te})),n.d(t,"AuthorizationError",(function(){return Ce})),n.d(t,"MetadataEvent",(function(){return R})),n.d(t,"PlayerEvent",(function(){return o})),n.d(t,"ProfileEvent",(function(){return M})),n.d(t,"RemotePlayerEvent",(function(){return D})),n.d(t,"PlayerState",(function(){return A})),n.d(t,"getAccessToken",(function(){return Re})),n.d(t,"createMasterPlaylistUrl",(function(){return Me})),n.d(t,"isMSESupported",(function(){return r})),n.d(t,"isVP9Supported",(function(){return s}))}}]);