(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{"+3jx":function(e,t,n){},"+Pj0":function(e,t,n){"use strict";var r=n("mrSG"),i=n("q1tI"),a=n("eirU"),o=n("bRfm"),s=n("XQbB"),l=n("LYZ5");function c(e){return function(t){var n,c,d,u,m=Object(a.d)(l,{fetchPolicy:"network-only"}),p=m.loading,h=m.data;return Object(o.b)(window.navigator.userAgent).browser.isSafari()?null:p?i.createElement(s.a,null):i.createElement(e,Object(r.__assign)({isEligibleForRewardedVideo:!!(null===(c=null===(n=null==h?void 0:h.currentUser)||void 0===n?void 0:n.rewardedVideo)||void 0===c?void 0:c.isEligible),shouldCaptcha:!!(null===(u=null===(d=null==h?void 0:h.currentUser)||void 0===d?void 0:d.rewardedVideo)||void 0===u?void 0:u.shouldCaptcha)},t))}}n.d(t,"a",(function(){return c}))},"0iXB":function(e,t,n){},"222m":function(e,t,n){},"2rlx":function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("o0o1"),o=n.n(a),s=n("yXPU"),l=n.n(s),c=n("lSNA"),d=n.n(c),u=n("VbXa"),m=n.n(u),p=n("q1tI"),h=n("fNzW"),f=n("hnjF"),b=n("yymn"),g=n("hCFK");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).refHandler=function(e){t.props.refDelegate&&t.props.refDelegate(e,t.props.id)},t.onExitComplete=function(){t.props.onExitComplete&&t.props.onExitComplete(t.props.id)},t.onTransformEnd=function(){t.props.onTransformEnd&&t.props.onTransformEnd(t.props.id)},t}return m()(t,e),t.prototype.render=function(){var e=this.props.transition.duration||g.b.Medium,t=!this.props.moveStyles&&!this.props.prepareForTransform,n={};return!1===this.props.transition.show&&void 0===this.props.exitStyles?n.position="absolute":!1===this.props.transition.show&&this.props.exitStyles?n=this.props.exitStyles:this.props.moveStyles&&(n=this.props.moveStyles),p.createElement(g.a,{key:this.props.id,show:!!this.props.transition.show,type:this.props.transition.type||g.c.ScaleOver,transitionInitialMount:!!this.props.transition.transitionInitialMount,duration:e,onExitComplete:this.onExitComplete,injectChild:!0},p.createElement("div",{key:this.props.id,ref:this.refHandler,style:v({},n,{transitionProperty:t?"transform, opacity":"opacity",transitionTimingFunction:"ease"}),onTransitionEnd:this.onTransformEnd},this.props.child))},t}(p.Component);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}k.displayName="TransitionGroupItem",n.d(t,"a",(function(){return B}));var B=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).state={childMap:{},initialRenderComplete:!1},t.containerRef=void 0,t.childRefMap={},t.currentlyTransitioningKeys=[],t.setContainerRef=function(e){t.containerRef=e},t.setItemRef=function(e,n){e&&(t.childRefMap[n]=e)},t.onTransformEnd=function(e){t.currentlyTransitioningKeys=t.currentlyTransitioningKeys.filter((function(t){return t!==e}))},t.deleteChild=function(e){e in t.state.childMap&&(delete t.childRefMap[e],t.setState((function(t){var n=E({},t.childMap);return delete n[e],{childMap:n}})))},t.measureItems=function(e){var n={};return e.filter((function(e){return e in t.childRefMap})).forEach((function(e){e in n||(n[e]=t.childRefMap[e].getBoundingClientRect())})),n},t.setTransforms=function(){var e=l()(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.setState((function(e){var r=E({},e.childMap),i=n.moved,a=n.exited,o=n.container,s=i,l=t.measureItems(Object.keys(i));return Object.keys(s).forEach((function(e){var t=s[e].left-l[e].left,n=s[e].top-l[e].top;r[e].moveStyles={transform:"translate3d("+t+"px, "+n+"px,0)"},r[e].prepareForTransform=!1})),Object.keys(a).forEach((function(e){var t=a[e],n=t.left-(o?o.left:0),i=t.top-(o?o.top:0);r[e].exitStyles={top:i+"px",left:n+"px",position:"absolute",width:t.width+"px",height:t.height+"px"}})),{childMap:r}}),e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.clearMoveStyles=function(e){t.setState((function(t){var n=E({},t.childMap);return e.forEach((function(e){return n[e].moveStyles=void 0})),{childMap:n}}))},t.ensureLayoutReflow=function(){var e=t.childRefMap[Object.keys(t.childRefMap)[0]];e&&e.scrollTop},t}m()(t,e),t.getDerivedStateFromProps=function(e,t){var n,r,i=t.childMap,a=(n=e.children,r={},p.Children.map(n,(function(e){return e})).forEach((function(e){if(null!==e.key){var t={id:e.key,transition:{show:!0},child:e};r[e.key]=t}})),r);if(!t.initialRenderComplete)return{childMap:a,initialRenderComplete:!0};var o=function(e,t){var n=Object.keys(e).filter((function(t){return!0===e[t].transition.show}));return Object.keys(t).filter((function(t,r){return n[r]!==t&&t in e}))}(i,a),s=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(i,a);return Object.keys(s).forEach((function(e){var t=e in i,n=e in a,r=o.includes(e);t&&(s[e].moveStyles=i[e].moveStyles,s[e].exitStyles=i[e].exitStyles,s[e].transition=i[e].transition),s[e].prepareForTransform=r,n&&!t?(s[e].transition.show=!0,s[e].transition.transitionInitialMount=!0):!n&&t?s[e].transition.show=!1:n&&t&&!1===s[e].transition.show&&(s[e].transition.show=!0,s[e].exitStyles=void 0)})),{childMap:s}};var n=t.prototype;return n.getSnapshotBeforeUpdate=function(){var e=this.state.childMap,t=Object.keys(e).filter((function(t){return!0===e[t].prepareForTransform})),n=Object.keys(e).filter((function(t){return!1===e[t].transition.show&&!e[t].exitStyles}));return 0===t.length&&0===n.length?null:{moved:this.measureItems([].concat(t,this.currentlyTransitioningKeys)),exited:this.measureItems(n),container:n.length&&this.containerRef?this.containerRef.getBoundingClientRect():void 0}},n.componentDidUpdate=function(e,t,n){var r=this;if(n&&0!==Object.keys(n).length){var i=Object.keys(n.moved);this.setTransforms(n).then((function(){i&&(r.ensureLayoutReflow(),r.clearMoveStyles(i),r.currentlyTransitioningKeys=i.filter((function(e){return!(e in n.exited)})))}))}},n.render=function(){var e=this;if(!this.state.childMap)return null;var t=Object.keys(this.state.childMap).map((function(t){var n=e.state.childMap[t];return p.createElement(k,i()({},n,{key:t,transition:E({},n.transition,{duration:e.props.duration,type:e.props.transitionType}),refDelegate:e.setItemRef,onExitComplete:e.deleteChild,onTransformEnd:e.onTransformEnd}))}));return p.createElement(f.a,{position:b.n.Relative},p.createElement("div",{className:Object(h.a)(this.props.className,"tw-transition-group"),ref:this.setContainerRef},this.props.component?p.cloneElement(this.props.component,void 0,t):t))},t}(p.Component);B.displayName="TransitionGroup"},"3CMh":function(e,t,n){"use strict";var r,i=n("TSYQ"),a=n("q1tI"),o=n("ANjH"),s=n("/7QA"),l=n("bBAb"),c=n("5zXJ"),d=n("XmgI"),u=n("4h+t"),m=n("x1M1"),p=n("yymn"),h=n("hnjF");n("0iXB");!function(e){e[e.Large=4]="Large",e[e.Medium=3]="Medium",e[e.Small=2]="Small",e[e.ExtraSmall=1.5]="ExtraSmall",e[e.ExtremelySmall=1]="ExtremelySmall"}(r||(r={}));var f=Object(o.d)(Object(l.b)((function(e){return{bitsConfig:e.bitsConfig}})))((function(e){var t,n=e.bitsConfig&&e.bitsConfig.indexedActions[e.prefix.toLowerCase()];n||(n=Object(u.b)("Cheer"));var o=e.amount||c.l,l=n.orderedTiers.find((function(e){return e.bits<=o}));l||(l=n.orderedTiers[0]);var f=null===(t=e.bitsConfig)||void 0===t?void 0:t.tiers.find((function(e){return e.bits<=o}));f||(f=e.bitsConfig.tiers[0]);var b=e.display===p.g.Inline||e.display===p.g.InlineFlex||e.display===p.g.InlineBlock,g=null,C=i("cheermote-for-amount__cheer-amount",{"cheermote-for-amount__display--table-cell":!b},{"cheermote-for-amount__cheer-amount--medium":e.size===r.Medium},{"cheermote-for-amount__cheer-amount--small":e.size===r.Small||e.size===r.ExtraSmall},{"cheermote-for-amount__cheer-amount--extremely-small":e.size===r.ExtremelySmall});if(void 0!==e.amount&&e.showAmount){var v=e.formattedNumber?Object(s.f)(e.amount):e.amount;g=a.createElement(h.a,{padding:e.size===r.Small?0:void 0,textAlign:e.size===r.Small?p.p.Center:void 0},a.createElement("strong",{className:C,style:{color:f.color}},v))}var k=i("cheermote-for-amount__cheer-image",{"cheermote-for-amount__display--table-cell":!b},{"cheermote-for-amount__cheer--inline":b},{"cheermote-for-amount__cheer-image--small":e.size===r.Small},{"cheermote-for-amount__cheer-image--extra-small":e.size===r.ExtraSmall},{"cheermote-for-amount__cheer-image--extremely-small":e.size===r.ExtremelySmall}),y=a.createElement(m.a,{className:k,sources:Object(d.d)(n,l.bits,e.size||r.Large,e.animated)});return e.showImage||(y=null),a.createElement(h.a,{className:"cheermote-for-amount",alignItems:e.alignItems,display:e.display},a.createElement("span",null,y,g))}));n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return f}))},"5Czc":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsUserSettings"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsUserSettings"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstCheerTutorial"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasAbandoned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasSkipped"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:96}};n.loc.source={body:"fragment bitsUserSettings on BitsUserSettings {\nfirstCheerTutorial {\nhasAbandoned\nhasSkipped\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"5cw2":function(e,t,n){},"7APm":function(e,t,n){},"8BsE":function(e,t,n){},"8nkl":function(e,t,n){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetBitsUserSettings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetBitsUserSettingsInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setBitsUserSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsUserSettings"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:237}};r.loc.source={body:'#import "twilight/features/bits/models/bits-user-settings-fragment.gql"\nmutation SetBitsUserSettings($input: SetBitsUserSettingsInput!){\nsetBitsUserSettings(input: $input) {\ncurrentUser {\nid\nbitsUserSettings {\n...bitsUserSettings\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};r.definitions=r.definitions.concat(n("5Czc").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=r,e.exports.SetBitsUserSettings=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,i=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){i.has(e)||(i.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return i.forEach((function(t){var r=o(e,t);r&&n.definitions.push(r)})),n}(r,"SetBitsUserSettings")},"Aa/l":function(e,t,n){},AcdH:function(e,t,n){},BrgZ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchAdModal_CreateRewardedVideoToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateRewardedVideoTokenInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createRewardedVideoToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation WatchAdModal_CreateRewardedVideoToken($input:CreateRewardedVideoTokenInput!) {\ncreateRewardedVideoToken(input:$input) {\ntoken\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.WatchAdModal_CreateRewardedVideoToken=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var r=i(e,t);r&&n.definitions.push(r)})),n}(n,"WatchAdModal_CreateRewardedVideoToken")},ECxT:function(e,t,n){},"FZ/2":function(e,t,n){"use strict";var r,i=n("/MKj"),a=n("XDQu"),o=n("mrSG"),s=n("q1tI"),l=n("/7QA"),c=n("/0dD"),d=n("5zXJ"),u=n("ebRM"),m=n("RiD7"),p=n("Ws8v"),h=n("yymn"),f=n("sUnt"),b=n("+80q"),g=n("uG/k"),C=n("dEDE");n("UrjJ");!function(e){e.PromoSection="spring-sale-promo",e.PromoDetails="promo-details",e.PromoButton="promo-button"}(r||(r={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePromoBuy=function(){var e=Object(u.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:t.props.channelID,trackingID:t.props.trackingID,checkoutID:t.props.checkoutID,purchaseUrl:t.props.offer.url,bitsAmount:t.props.offer.bits,location:m.d.ChatTooltip});e&&t.props.onPromoBuyClose(e)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e="",t="";return this.props.isBitsCard?(t=d.g+"/spring-sale-2019/BitsCard_Cheermotes.png",e="spring-sale-promo-light-bits-card",this.props.theme===c.a.Dark&&(e="spring-sale-promo-dark-bits-card")):(t=d.g+"/spring-sale-2019/GetBitsBtn_Cheermotes.png",e="spring-sale-promo-light-buy-card",this.props.theme===c.a.Dark&&(e="spring-sale-promo-dark-buy-card")),s.createElement(p.a,{className:e,"data-test-selector":r.PromoSection,display:h.g.Flex,flexGrow:1,flexDirection:h.h.Column,justifyContent:h.l.Center,alignItems:h.b.Center,padding:1,borderRadius:{topLeft:h.e.Large,topRight:h.e.Large}},s.createElement(f.a,{padding:{bottom:1}},s.createElement(b.a,{fontSize:h.j.Size4,bold:!0},Object(l.d)("Limited Time Offer!","Bits--SpringSaleIntro"))),s.createElement(g.a,{src:t,alt:Object(l.d)("Spring Sale Cheermotes","Bits--SpringSaleIntro")}),s.createElement(f.a,{padding:{top:1,left:5,right:5},textAlign:h.p.Center},s.createElement(b.a,{"data-test-selector":r.PromoDetails},Object(l.d)("From now through {date}, get {bitsAmount} Bits for {price}.",{date:Object(l.c)(new Date("2019-03-31T23:59:59Z"),{month:"numeric",day:"numeric"}),bitsAmount:this.props.offer.bits,price:Object(l.f)(this.props.offer.amount,{style:"currency",currency:this.props.offer.currencyCode})},"Bits--SpringSaleIntro"))),s.createElement(f.a,{padding:{top:1,bottom:1}},s.createElement(C.a,{"data-test-selector":r.PromoButton,onClick:this.handlePromoBuy},Object(l.d)("Purchase {bitsAmount} Bits",{bitsAmount:this.props.offer.bits},"Bits--SpringSaleIntro"))),s.createElement(f.a,{textAlign:h.p.Center},s.createElement(b.a,{fontSize:h.j.Size7},Object(l.d)("Limit one purchase per customer.","Bits--SpringSaleIntro"))))},t}(s.Component);n.d(t,"a",(function(){return k}));var k=Object(i.b)((function(e){return{theme:Object(a.a)(e)}}))(v)},Gcqi:function(e,t,n){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_Bits"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsUserSettings"},directives:[]}]}}]}}]}}],loc:{start:0,end:187}};r.loc.source={body:'#import "twilight/features/bits/models/bits-user-settings-fragment.gql"\nquery BitsCard_Bits {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsUserState\nbitsUserSettings {\n...bitsUserSettings\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};r.definitions=r.definitions.concat(n("5Czc").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=r,e.exports.BitsCard_Bits=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,i=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){i.has(e)||(i.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return i.forEach((function(t){var r=o(e,t);r&&n.definitions.push(r)})),n}(r,"BitsCard_Bits")},H0r1:function(e,t,n){},KO0n:function(e,t,n){},LYZ5:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RewardedVideoEligibility"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rewardedVideo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEligible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shouldCaptcha"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:96}};n.loc.source={body:"query RewardedVideoEligibility {\ncurrentUser {\nid\nrewardedVideo {\nisEligible\nshouldCaptcha\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.RewardedVideoEligibility=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var r=i(e,t);r&&n.definitions.push(r)})),n}(n,"RewardedVideoEligibility")},NvZ5:function(e,t,n){},QYdK:function(e,t,n){var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBadge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserSelfBitsBadge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}],loc:{start:0,end:174}};r.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nfragment bitsBadge on UserSelfBitsBadge {\nid\ntotalBits\nnextBits\nprogress\ncurrent {\n...badge\n}\nnext {\n...badge\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};r.definitions=r.definitions.concat(n("IKE4").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}))),e.exports=r},SRov:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r;!function(e){e[e.Control=0]="Control",e[e.A=1]="A",e[e.B=2]="B",e[e.C=3]="C",e[e.D=4]="D"}(r||(r={}));var i=function(e){switch(e){case null:return r.Control;case"A":return r.A;case"B":return r.B;case"C":return r.C;case"D":return r.D;default:return r.Control}},a=function(e,t){if(t===r.Control||e.length<6)return e;var n=e.sort((function(e,t){return e.bitsOffer.bits-t.bitsOffer.bits}));switch(t){case r.A:return n.slice(0,3);case r.B:return n.slice(1,4);case r.C:return n.slice(2,5);case r.D:return n.slice(3,6);default:return e}}},UajW:function(e,t,n){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_MainCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"autoRefill"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profiles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"threshold"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"offerID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCheerBombEventEnabled"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}}}]}]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBadge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:533}};r.loc.source={body:'#import "twilight/features/bits/models/bits-badge-fragment.gql"\n#import "twilight/features/bits/models/bits-offer-fragment.gql"\nquery BitsCard_MainCard($name: ID! $withCheerBombEventEnabled: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsOffers {\n...bitsOffer\n}\nautoRefill {\nprofiles {\nid\nthreshold\nofferID\nisEnabled\n}\n}\n}\nuser(id: $name) {\nid\ndisplayName\ncheer {\nid\nsettings {\nid\nemoteMinimumBits\ncheerMinimumBits\nevent\nisCheerBombEventEnabled @include(if: $withCheerBombEventEnabled)\n}\n}\nself {\nbitsBadge {\n...bitsBadge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}))}r.definitions=r.definitions.concat(a(n("QYdK").definitions)),r.definitions=r.definitions.concat(a(n("wmIm").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=r,e.exports.BitsCard_MainCard=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=o[t]||new Set,i=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){i.has(e)||(i.add(e),(o[e]||new Set).forEach((function(e){a.add(e)})))}))}return i.forEach((function(t){var r=s(e,t);r&&n.definitions.push(r)})),n}(r,"BitsCard_MainCard")},UqM8:function(e,t,n){var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBundleOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPromo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"includesVAT"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currencyCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBundleOfferPromotion"},directives:[]}]}}]}}],loc:{start:0,end:236}};r.loc.source={body:'#import "twilight/features/bits/models/bits-bundle-offer-promotion-fragment.gql"\nfragment bitsBundleOffer on BitsBundleOffer {\nid\ntype\nbits\namount\ndiscount\nisPromo\nurl\nincludesVAT\ncurrencyCode\npromotion {\n...bitsBundleOfferPromotion\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};r.definitions=r.definitions.concat(n("hRAX").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}))),e.exports=r},UrjJ:function(e,t,n){},VR5Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchAdModal_Redeeem"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemTrueXAdInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemTrueXAd"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantedBits"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:105}};n.loc.source={body:"mutation WatchAdModal_Redeeem($input:RedeemTrueXAdInput!) {\nredeemTrueXAd(input:$input) {\ngrantedBits\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.WatchAdModal_Redeeem=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var r=i(e,t);r&&n.definitions.push(r)})),n}(n,"WatchAdModal_Redeeem")},VeT4:function(e,t,n){"use strict";var r=n("q1tI"),i=n("/7QA"),a=n("/0dD"),o=n("5zXJ"),s=n("XmgI"),l=n("4h+t"),c=n("x1M1");n("5cw2");function d(e){var t,n=Object(i.d)("{bitsAmount} Bits",{bitsAmount:e.count.toString()},"Bits--BitsCount");if(e.withImage){var d=e.bitsConfig&&e.bitsConfig.indexedActions[o.k];d||(d=Object(l.b)("Cheer"));var u=void 0;if(0===e.count)u=o.l;else for(var m=0,p=d.orderedTiers;m<p.length;m++){var h=p[m];if(h.bits<=e.count){u=h.bits;break}}if(u){var f=Object(s.d)(d,u,void 0,e.animated);return void 0!==e.themeOverride&&(e.themeOverride===a.a.Light?f.dark=f.light:f.light=f.dark),t=r.createElement(c.a,{className:"bits-count--img",sources:f}),r.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},r.createElement("span",null,t," ",e.withText?n:""))}}return r.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},r.createElement("span",null,n))}n.d(t,"a",(function(){return d}))},Y18C:function(e,t,n){},Yr1V:function(e,t,n){},ZfCj:function(e,t,n){},ao1a:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n("wUQP"),i=n("DMoW"),a=n("4rCz"),o=function(e,t){return t===i.t.ACQUIRED&&function(e){var t=a.q.dynamicSettings.get("ruby_is_the_cutest_dog_ever",r.b.Off);return t===r.b.On||e&&t===r.b.StaffOnly}(e)},s=function(e){return e===i.t.NEW_USER},l=function(e,t){return!(!t||!t.firstCheerTutorial||t.firstCheerTutorial.hasSkipped||!s(e))},c=function(e,t){return!(!t||!t.firstCheerTutorial||t.firstCheerTutorial.hasAbandoned||t.firstCheerTutorial.hasSkipped||!s(e))},d=function(e,t,n){return!(!n||!n.firstCheerTutorial||n.firstCheerTutorial.hasSkipped||!o(e,t))}},bYOw:function(e,t,n){"use strict";var r,i=n("q1tI"),a=n("8/mp"),o=n("DMoW"),s=n("mrSG"),l=n("/MKj"),c=n("ANjH"),d=n("/7QA"),u=n("SDEh"),m=n("lB7/"),p=n("3CMh"),h=n("+Pj0"),f=n("RiD7"),b=n("Ws8v"),g=n("yymn"),C=n("sUnt"),v=n("dEDE");!function(e){e.SubText="sub-text",e.Description="description"}(r||(r={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onWatchAdClick=function(){t.props.trackBitsCardInteraction(f.c.WatchAd),t.props.onWatchAdClick(t.props.shouldCaptcha)},t}return Object(s.__extends)(t,e),t.prototype.render=function(){var e=null;return this.props.isEligibleForRewardedVideo||(e=Object(d.d)("Try again later","Bits--WatchAdOffer")),i.createElement(b.a,{className:"bits-buy-card__offer-row",display:g.g.Flex,flexShrink:0,borderBottom:!0,justifyContent:g.l.Between,flexWrap:g.i.NoWrap,padding:{x:2,y:1}},i.createElement(C.a,{"data-test-selector":r.Description,padding:{right:4}},i.createElement("strong",null,Object(d.d)("Get {minBitsCount} or more Bits by watching short ads",{minBitsCount:this.props.minPayout},"Bits--WatchAdOffer"))),i.createElement(C.a,{flexShrink:0,display:g.g.Flex,flexDirection:g.h.Column,alignItems:g.b.End},i.createElement(v.a,{type:v.d.Secondary,"data-a-target":"bits-watch-ad",onClick:this.onWatchAdClick,disabled:!this.props.isEligibleForRewardedVideo},Object(d.d)("Watch Ad","Bits--WatchAdOffer")),e&&i.createElement(C.a,{"data-test-selector":r.SubText,className:"bits-buy-card__sub-text",alignSelf:g.c.Stretch,textAlign:g.p.Center,margin:{top:.5}},e)))},t}(i.Component),y=Object(h.a)(k),E=n("ebRM"),B=n("jNOR"),S=n("+80q"),O=(n("byRF"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBuyClick=function(){t.openBitsCheckout({forcePopup:!1})},t.onBuyClickExtraSmall=function(){t.openBitsCheckout({forcePopup:!0})},t.openBitsCheckout=function(e){var n=e.forcePopup||Object(u.b)(),r=t.props.channelID||"",i=t.props.offer,a=Object(E.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:r,trackingID:t.props.trackingID,checkoutID:t.props.checkoutID,purchaseUrl:i.url,bitsAmount:i.bits,closeAllBits:t.props.closeAllBits,location:t.props.location,offerID:t.props.offer.id,checkoutFormDispatch:t.props.showCheckoutFormModal,forcePopup:n});a&&(t.props.onBuyPopupClose(a),t.props.onClose())},t}return Object(s.__extends)(t,e),t.prototype.render=function(){if(this.props.offer.type===o.p.AD)return this.props.channelLogin?i.createElement(y,{key:"wateb",minPayout:this.props.offer.bits,onWatchAdClick:this.props.handleWatchAdClick,trackBitsCardInteraction:this.props.trackBitsCardInteraction}):null;if(this.props.offer.type===o.p.BUNDLE){var e=this.props.offer,t=null;Object(E.c)(e)&&(t=i.createElement(C.a,{className:"bits-buy-card-offer-row__bonus-text bits-buy-card-offer-row__bonus-text-headline","data-test-selector":"first-time-promo-form",padding:{bottom:1}},i.createElement(S.a,{type:S.e.Strong,fontSize:g.j.Size6},Object(d.d)("Special Offer: 1st Time Buyers","Bits--BuyCard")))),Object(E.f)(e)&&(t=i.createElement(C.a,{className:"bits-buy-card-offer-row__bonus-text bits-buy-card-offer-row__bonus-text-headline","data-test-selector":"spring-sale-2019-promo-form",padding:{bottom:1}},i.createElement(S.a,{type:S.e.Strong,fontSize:g.j.Size6},Object(d.d)("Special Offer!","Bits--BuyCard"))));var n=null;e.discount&&(n=i.createElement(C.a,{className:"bits-buy-card-offer-row__sub-text","data-test-selector":"discount-subtext-form"},Object(d.d)("{percentOff,number,percent} discount",{percentOff:e.discount},"Bits--BuyCard")));var r=null;return(Object(E.c)(e)||Object(E.e)(e)||Object(E.f)(e))&&(r=i.createElement(C.a,{"data-test-selector":"one-per-account-form"},i.createElement(S.a,{color:g.f.Alt2},Object(d.d)("one per account","Bits--BuyCard")))),i.createElement(C.a,{className:"bits-buy-card-offer-row",flexShrink:0,display:g.g.Flex,justifyContent:g.l.Center,flexDirection:g.h.Column,padding:{x:2,y:1}},t,i.createElement(C.a,{display:g.g.Flex,justifyContent:g.l.Between,alignItems:g.b.Center},i.createElement(C.a,{flexGrow:1},i.createElement(S.a,{type:S.e.H5,color:g.f.Base,bold:!0},Object(d.d)("{bits} Bits",{bits:Object(d.f)(e.bits)},"Bits--BuyCard")),i.createElement(m.a,{bitsConfig:this.props.bitsConfig,amount:e.bits,size:p.b.ExtraSmall})),i.createElement(C.a,{flexShrink:0,display:g.g.Flex,flexDirection:g.h.Column,alignItems:g.b.End},i.createElement(C.a,{display:g.g.Hide,breakpointExtraSmall:{display:g.g.Block}},i.createElement(v.a,{onClick:this.onBuyClick,"data-a-target":"bits-purchase-button-"+e.bits},Object(d.f)(e.amount,{style:"currency",currency:e.currencyCode}))),i.createElement(C.a,{display:g.g.Block,breakpointExtraSmall:{display:g.g.Hide}},i.createElement(v.a,{onClick:this.onBuyClickExtraSmall,"data-a-target":"bits-purchase-button-xs-"+e.bits},Object(d.f)(e.amount,{style:"currency",currency:e.currencyCode}))),(n||r)&&i.createElement(C.a,{alignSelf:g.c.Stretch,textAlign:g.p.Right,margin:{top:.5}},n,r))))}return null},t}(i.Component));var w,x,A=Object(l.b)(null,(function(e){return Object(c.b)({showCheckoutFormModal:B.a},e)}))(O),N=function(e){return i.createElement(C.a,{display:g.g.Flex,flexDirection:g.h.Row,justifyContent:g.l.Center,padding:{bottom:1}},i.createElement(v.a,{blurAfterClick:!0,type:v.d.Text,onClick:e.onClick},i.createElement(S.a,null,Object(d.d)("Show more","ShowMoreBitsOffers"))))},T=n("SRov"),I=n("2rlx"),j=n("hCFK");!function(e){e.Fullsize="full-size",e.Smallnoscroll="no-scroll--small",e.Scrollview="scroll-view"}(w||(w={})),function(e){e.BITS_OFFER_ROW="bits-offer-row"}(x||(x={}));var D=function(e){var t=Object(i.useState)(!1),n=t[0],r=t[1],s=Object(i.useRef)(null),l=e.trackBitsCardInteraction,c=e.location,d=e.skusReductionVariant,u=Object(i.useCallback)((function(){r(!0),d!==T.a.C&&d!==T.a.D||s.current&&s.current.scrollToTop(),l(f.c.BitsSkusExpShowMore,{actionType:f.a.Click,location:c})}),[d,l,c]),m=[],p=[],h=null;e.offers.forEach((function(t){var n=i.createElement(b.a,{key:t.id,borderTop:!0},i.createElement(A,{offer:t,bitsConfig:e.bitsConfig,channelID:e.channelID,trackingID:e.trackingID,checkoutID:e.checkoutID,channelLogin:e.channelLogin,currentUserSHA:e.currentUserSHA,location:e.location,onClose:e.onClose,onBuyPopupClose:e.onBuyPopupClose,handleWatchAdClick:e.handleWatchAdClick,closeAllBits:e.closeAllBits,trackBitsCardInteraction:e.trackBitsCardInteraction,showBitsTiers:e.location===f.d.GetBitsButtonTopNav})),r=Object(E.d)(t),a=Object(E.c)(t)||Object(E.f)(t),s=t.type===o.p.AD;a&&!e.hidePromos?m.push(n):r&&!a?m.push(n):s&&!e.hideWateb?h=n:s||r||p.push({bitsOffer:t,bitsOfferRow:n})}));var v=e.skusReductionVariant!==T.a.Control&&!n,k=v?Object(T.c)(p,e.skusReductionVariant||T.a.Control):p,y=i.createElement(I.a,{transitionType:j.c.Fade,duration:j.b.Long},k.map((function(e){return e.bitsOfferRow}))),B=v?i.createElement(N,{onClick:u}):null;switch(e.size){case w.Scrollview:return i.createElement(a.b,{ref:s},i.createElement(C.a,{flexGrow:1,flexWrap:g.i.NoWrap,display:g.g.Flex,flexDirection:g.h.Column},h,m,y,B));case w.Smallnoscroll:return i.createElement(C.a,{className:"bits-buy-card-offers__no-scroll--small",flexGrow:1,flexWrap:g.i.NoWrap,display:g.g.Flex,flexDirection:g.h.Column},h,m,y,B);default:return i.createElement(C.a,{className:"bits-buy-card-offers__full-size",flexGrow:1,flexWrap:g.i.NoWrap,display:g.g.Flex,flexDirection:g.h.Column,fullWidth:!0},h,m,y,B)}};n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return D}))},byRF:function(e,t,n){},"c+1r":function(e,t,n){},"dx/T":function(e,t,n){"use strict";var r=n("q1tI"),i=n("/7QA"),a=n("5zXJ"),o=n("x1M1"),s=n("sUnt"),l=n("yymn"),c=n("+80q"),d=(n("222m"),{themed:!0,dark:{"1x":a.f+"/dark/animated/1/cheertutorial.gif"},light:{"1x":a.f+"/light/animated/1/cheertutorial.gif"}}),u=function(){return r.createElement(s.a,{display:l.g.Flex,padding:{top:5,bottom:3},flexGrow:1,flexDirection:l.h.Column,justifyContent:l.l.Center,alignItems:l.b.Center},r.createElement(c.a,{type:c.e.H4,bold:!0},r.createElement(o.a,{className:"cheermote-help__tutorial-image",sources:d}),Object(i.d)("How to Cheer","Bits--CheermoteHelp")),r.createElement(s.a,{padding:{x:3}},r.createElement(c.a,null,Object(i.d)('Type "cheer" + the number of Bits you want to Cheer.',"Bits--CheermoteHelp"))))};n.d(t,"a",(function(){return u}))},ecb7:function(e,t,n){},hRAX:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBundleOfferPromotion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:62}};n.loc.source={body:"fragment bitsBundleOfferPromotion on BitsPromotion {\nid\ntype\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jNOR:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ZS2+"),i=n("XDCx");function a(e){return function(t){t(Object(i.e)(r.a,{component:"CheckoutFormModal",loader:function(){return Promise.all([n.e(0),n.e(71)]).then(n.bind(null,"Ukpy"))},componentProps:e}))}}},"lB7/":function(e,t,n){"use strict";var r=n("q1tI"),i=n("3CMh"),a=n("5zXJ"),o=n("4h+t"),s=n("sUnt"),l=n("yymn");n("rAoL");function c(e){var t=(e.bitsConfig&&e.bitsConfig.indexedActions[a.k]||Object(o.b)("Cheer")).orderedTiers.filter((function(t){return t.bits<=e.amount})).reverse().map((function(t){return r.createElement(s.a,{display:l.g.Block,className:"bits-available-tiers__tier-bits-image",key:t.id},r.createElement(i.a,{size:e.size,amount:t.bits,prefix:a.k,showImage:!0,showAmount:!1,animated:!1}))}));return r.createElement(s.a,{display:l.g.Flex,padding:{y:.5},className:"bits-available-tiers__tier-bits-images"},t)}n.d(t,"a",(function(){return c}))},mZsS:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Ready=0]="Ready",e[e.Dimensions=1]="Dimensions",e[e.RequestAd=2]="RequestAd",e[e.OnStart=3]="OnStart",e[e.OnCredit=4]="OnCredit",e[e.OnFinish=5]="OnFinish",e[e.OnClose=6]="OnClose",e[e.OnError=7]="OnError",e[e.Adblock=8]="Adblock",e[e.LimitReached=9]="LimitReached"}(r||(r={}))},opIq:function(e,t,n){"use strict";var r,i=n("/MKj"),a=n("XDCx"),o=n("YV3K"),s=n("kRBY"),l=n("mrSG"),c=n("q1tI"),d=n("ANjH"),u=n("/7QA"),m=n("cZKs"),p=n("atdg"),h=n("yR8l"),f=n("geRD"),b=n("ZS2+"),g=n("sUnt"),C=n("yymn"),v=(n("+3jx"),b.a.wrap((function(){return n.e(54).then(n.bind(null,"koZt"))}),"FunCaptcha")),k=function(e){var t=e.onCaptchaComplete;return c.createElement(g.a,{alignItems:C.b.Center,display:C.g.Flex,justifyContent:C.l.Center,className:"wateb-funcaptcha-form__funcaptcha"},c.createElement(v,{onCaptchaComplete:t}))};!function(e){e[e.ExitEarly=0]="ExitEarly",e[e.Unknown=1]="Unknown",e[e.Adblock=2]="Adblock",e[e.LimitReached=3]="LimitReached"}(r||(r={}));var y=n("mZsS"),E=n("RiD7"),B=n("Ws8v"),S=n("+80q"),O=n("BrgZ"),w=n("VR5Q"),x=(n("yGGv"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={initializedFromProps:!1},t.hasAwarded=!1,t.checkCaptchaState=function(){return t.state.initializedFromProps||t.setState({needsCaptcha:t.props.needsCaptcha,initializedFromProps:!0}),t.state.needsCaptcha},t.onCaptchaComplete=function(){return t.setState({needsCaptcha:!1})},t.messageHandler=function(e){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,n,i,a,o,s,c,d,m,p,h;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:if(e.origin!==window.location.origin)return[2];if(!(t=e.data)||"trueXAd"!==t.msgSrc)return[2];switch(t.type){case y.a.Ready:return[3,1];case y.a.RequestAd:return[3,6];case y.a.Dimensions:return[3,7];case y.a.OnStart:return[3,8];case y.a.OnCredit:return[3,9];case y.a.OnClose:case y.a.OnFinish:case y.a.LimitReached:case y.a.Adblock:case y.a.OnError:return[3,13]}return[3,14];case 1:n="",l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.props.createRewardedVideoToken(Object(f.a)({userID:this.props.userId}))];case 3:return s=l.sent(),n=(null===(m=s.data.createRewardedVideoToken)||void 0===m?void 0:m.token)||"",[3,5];case 4:return i=l.sent(),u.k.warn("Error creating truex client token",i),null===(h=(p=this.props).onError)||void 0===h||h.call(p,r.Unknown),[2];case 5:return n?(a={msgSrc:"wateb-ad-modal",hashedUserId:this.props.hashedUserId,token:n},e.source&&e.source.postMessage(a,"*"),[2]):[2];case 6:try{if(!(o=JSON.parse(t.activityJSON)))return[2];Object(E.k)({campaignID:o.campaign_id.toString(),requestID:t.requestID,requestMethod:this.props.requestRef})}catch(e){}return[2];case 7:return t.height&&t.width&&this.setState({customDimensions:{height:t.height,width:t.width}}),[3,14];case 8:try{if(!(o=JSON.parse(t.activityJSON)))return[2];Object(E.j)({requestID:t.requestID,adblock:!1,campaignID:o.campaign_id.toString()})}catch(e){}return[2];case 9:return l.trys.push([9,11,,12]),[4,this.props.redeemTrueXAd(Object(f.a)({args:t.engagement.signature_argument_string,signature:t.engagement.signature,trueXAd:{creativeID:t.engagement.ad.creative_id,campaignID:t.engagement.ad.campaign_id,name:t.engagement.ad.name,currencyAmount:t.engagement.ad.currency_amount},targetID:this.props.channelID}))];case 10:return s=l.sent(),null!==(c=s.data.redeemTrueXAd&&s.data.redeemTrueXAd.grantedBits)&&(this.hasAwarded=!0,this.props.onBitsAwarded&&this.props.onBitsAwarded(c)),[3,12];case 11:return d=l.sent(),u.k.warn("Error while redeeming bits for truex ad",d),this.props.onError&&this.props.onError(r.Unknown),[3,12];case 12:return[3,14];case 13:return this.props.onError&&(t.type===y.a.LimitReached?this.props.onError(r.LimitReached):t.type===y.a.Adblock?this.props.onError(r.Adblock):t.type===y.a.OnError?this.props.onError(r.Unknown):this.hasAwarded||this.props.onError(r.ExitEarly)),this.props.closeModal(),[3,14];case 14:return[2]}}))}))},t}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.messageHandler)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.messageHandler)},t.prototype.render=function(){return c.createElement(B.a,{background:C.d.Base},c.createElement(g.a,{display:C.g.HideAccessible},c.createElement(S.a,{id:p.a},Object(u.d)("Watch Ad","Bits--WatchAdModal"))),c.createElement("div",{className:"t-watch-ads-modal",style:this.state.customDimensions},c.createElement(m.a,null),!this.checkCaptchaState()&&c.createElement("iframe",{src:"/products/bits/ad"}),this.checkCaptchaState()&&c.createElement(k,{onCaptchaComplete:this.onCaptchaComplete})))},t}(c.Component));var A,N=Object(d.d)(Object(i.b)(null,(function(e){return Object(d.b)({closeModal:a.d},e)})),Object(h.a)(w,{name:"redeemTrueXAd"}),Object(h.a)(O,{name:"createRewardedVideoToken"}))(x),T=n("TSYQ"),I=n("8/mp"),j=n("edgk"),D=n("D7An"),_=n("DMoW"),F=n("jv9u"),U=n("bBAb"),M=n("+Pj0"),P=n("3CMh"),R=n("hnjF"),L=n("dEDE");!function(e){e.Header="header",e.Description="description",e.StartCheering="start-cheering-button",e.WatchAd="watch-ad-button"}(A||(A={}));var H,W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onWatchAnother=function(){t.props.trackBitsCardInteraction(E.c.WatchAnotherAd),t.props.onWatchAnother&&t.props.onWatchAnother()},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(g.a,{display:C.g.Flex,flexGrow:1,flexDirection:C.h.Column,alignItems:C.b.Center,fullWidth:!0,flexWrap:C.i.NoWrap,padding:{y:1}},c.createElement(P.a,{prefix:"cheer",amount:this.props.amount,showAmount:!0,showImage:!0}),c.createElement(g.a,{display:C.g.Flex,padding:{top:1},flexGrow:1,flexDirection:C.h.Column,alignItems:C.b.Center,flexWrap:C.i.NoWrap},c.createElement(S.a,{"data-test-selector":A.Header,type:S.e.H4,bold:!0},Object(u.d)("You got {bitsAmount,number} Bits!",{bitsAmount:this.props.amount},"Bits--WatchAdAward")),c.createElement(R.a,{padding:{top:1}},c.createElement(S.a,{"data-test-selector":A.Description,color:C.f.Alt2},Object(u.d)("{bitsAmount,number} Bits were added to your Bit inventory.",{bitsAmount:this.props.amount},"Bits--WatchAdAward"),c.createElement("br",null),Object(u.d)("You can use these Bits to Cheer!","Bits--WatchAdAward")))),c.createElement(g.a,{display:C.g.Flex,padding:{x:1,top:3},alignSelf:C.c.Stretch,justifyContent:C.l.Between},c.createElement(L.a,{"data-test-selector":A.StartCheering,onClick:this.props.onStartCheering},Object(u.d)("Start Cheering","Bits--WatchAdAward")),c.createElement(L.a,{"data-test-selector":A.WatchAd,type:L.d.Secondary,"data-a-target":"bits-watch-another-ad",onClick:this.onWatchAnother,disabled:!this.props.isEligibleForRewardedVideo},Object(u.d)("Watch Another","Bits--WatchAdAward"))))},t}(c.Component),V=Object(M.a)(W),q=n("5zXJ");n("7APm");!function(e){e.Footer="footer",e.TryAgain="try-again-button",e.Close="close-button",e.Header="header",e.Description="description",e.Image="image"}(H||(H={}));var z=function(e){var t=Object(u.d)("Something's wrong!","Bits--WatchAdError"),n=Object(u.d)("Something went wrong. Wait a while and try again.","Bits--WatchAdError"),i="adserrorgeneric";switch(e.type){case r.Adblock:i="adserroradblock",n=Object(u.d)("We can't load this Ad, probably because Ad Blocking software is running. To watch an ad and get Bits, please disable all Ad Blocking software.","Bits--WatchAdError");break;case r.LimitReached:i="adserrorlimit",t=Object(u.d)("Ad Limit Reached","Bits--WatchAdError"),n=Object(u.d)("That's all the Ads we have for now. Try again tomorrow!","Bits--WatchAdError");break;case r.ExitEarly:n=Object(u.d)("To get Bits, you must view and interact with the Ad for the minimum amount of time.","Bits--WatchAdError")}var a=c.createElement(g.a,{"data-test-selector":H.Footer,className:"watch-ad-error__footer",display:C.g.Flex,padding:{top:2},alignSelf:C.c.Stretch,justifyContent:C.l.Center},c.createElement(L.a,{"data-test-selector":H.TryAgain,onClick:e.onTryAgain},Object(u.d)("Try Again","Bits--WatchAdError")));return e.type===r.LimitReached&&(a=c.createElement(g.a,{"data-test-selector":H.Footer,className:"watch-ad-error__footer",display:C.g.Flex,padding:{top:2},alignSelf:C.c.Stretch,justifyContent:C.l.Between},c.createElement(L.a,{"data-test-selector":H.Close,onClick:e.onClose},Object(u.d)("Got It","Bits--WatchAdError")),c.createElement(L.a,{"data-test-selector":H.TryAgain,onClick:e.onTryAgain,type:L.d.Secondary},Object(u.d)("Buy Bits","Bits--WatchAdError")))),c.createElement(g.a,{padding:{x:1},display:C.g.Flex,flexGrow:1,flexDirection:C.h.Column,alignItems:C.b.Center,fullWidth:!0,flexWrap:C.i.NoWrap},c.createElement(g.a,{padding:{y:2}},c.createElement("img",{"data-test-selector":H.Image,alt:"",className:"watch-ad-error__error-image",src:q.f+"/light/static/1/"+i+".png"})),c.createElement(g.a,{padding:{bottom:1}},c.createElement(S.a,{"data-test-selector":H.Header,type:S.e.H4,bold:!0},t)),c.createElement(S.a,{"data-test-selector":H.Description,color:C.f.Alt2},n),a)},G=n("lhih"),Y=n("SRov"),Q=n("GnwI"),X=n("7uM4"),K=n("C7sF"),Z=n("Jsra"),J=n("zmay"),$=n("bYOw"),ee=function(e){var t=c.createElement(S.a,{type:S.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold>",{"x:bold":function(e){return c.createElement(S.a,{type:S.e.Span,bold:!0},e)},currencyCode:e.currencyCode},"Bits--BuyCard"));e.pricesIncludeVAT&&(t=c.createElement(S.a,{"data-test-selector":"prices-include-vat-selector",type:S.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold> and <x:bold>include VAT</x:bold>",{"x:bold":function(e){return c.createElement(S.a,{type:S.e.Span,bold:!0},e)},currencyCode:e.currencyCode},"Bits--BuyCard")));var n=null;e.minBitsToCheer&&e.minBitsToCheer>1&&(n=c.createElement(S.a,{"data-test-selector":"min-bits-to-cheer-selector",color:C.f.Alt},Object(u.d)("{displayName} requires {minBits} Bits to Cheer in this channel.",{displayName:e.displayName,minBits:e.minBitsToCheer},"Bits--BuyCard")));var r=null;return void 0!==e.bitsBalance&&null!==e.bitsBalance&&(r=c.createElement(S.a,{"data-test-selector":"bits-balance-header-selector",color:C.f.Alt},Object(u.d)("You have {totalBits} Bits",{totalBits:c.createElement("strong",{"data-a-target":"buy-card-bits-count"},e.bitsBalance)},"Bits--BuyCard"))),c.createElement(B.a,{className:"bits-buy-card-header",padding:1,flexShrink:0,fullWidth:!0},c.createElement(g.a,null,e.location===E.d.ChatTooltip&&c.createElement(S.a,{type:S.e.H4,color:C.f.Alt},Object(u.d)("Purchase Bits","Bits--BuyCard")),t),e.location===E.d.ChatTooltip&&c.createElement(g.a,{margin:{top:1}},r,n))},te=n("lB7/"),ne=n("ebRM"),re=n("jNOR"),ie="min-bits-to-cheer-selector",ae="prices-include-vat-selector",oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleBuyClick=function(){t.openBitsCheckout({forcePopup:!1})},t.handleBuyClickExtraSmall=function(){t.openBitsCheckout({forcePopup:!0})},t.openBitsCheckout=function(e){if(t.props.specialOffer){var n=e.forcePopup,r=t.props.displayName||"",i=Object(ne.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:r,trackingID:t.props.trackingID,checkoutID:t.props.checkoutID,purchaseUrl:t.props.specialOffer.url,bitsAmount:t.props.specialOffer.bits,closeAllBits:t.props.closeAllBits,location:t.props.location,offerID:t.props.specialOffer.id,checkoutFormDispatch:t.props.showCheckoutFormModal,forcePopup:n});i&&(t.props.onBuyPopupClose(i),t.props.onClose())}},t}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this.renderCurrencyDisclaimer(this.props.pricesIncludeVAT,this.props.currencyCode),t=this.renderMinBitsToCheerInChannel(this.props.displayName,this.props.minBitsToCheer),n=null,r=null,i=null;return void 0!==this.props.specialOffer&&null!==this.props.specialOffer&&(n=c.createElement(S.a,{type:S.e.H4,color:C.f.Base,bold:!0},Object(u.d)("{percent} off for first-time Bits buyers!",{percent:Object(u.f)(this.props.specialOffer.discount,"percent")},"Bits--NewUserCheerHeader")),r=c.createElement(g.a,{display:C.g.Flex},c.createElement(te.a,{amount:this.props.specialOffer.bits,bitsConfig:this.props.bitsConfig,size:P.b.Small})),i=c.createElement(c.Fragment,null,c.createElement(g.a,{display:C.g.Hide,breakpointExtraSmall:{display:C.g.Block}},c.createElement(L.a,{onClick:this.handleBuyClick,"data-a-target":"bits-purchase-button-"+this.props.specialOffer.bits},this.buyBitsButtonText)),c.createElement(g.a,{display:C.g.Block,breakpointExtraSmall:{display:C.g.Hide}},c.createElement(L.a,{onClick:this.handleBuyClickExtraSmall,"data-a-target":"bits-purchase-button-xs-"+this.props.specialOffer.bits},this.buyBitsButtonText)))),c.createElement(B.a,{className:"bits-buy-card-header",padding:1,flexShrink:0,fullWidth:!0,textAlign:C.p.Center},c.createElement(g.a,{margin:{x:1}},n,t),c.createElement(g.a,{justifyContent:C.l.Center,display:C.g.Flex,margin:{y:1},fullWidth:!0},r),i,c.createElement(g.a,{margin:{top:1}},e))},Object.defineProperty(t.prototype,"buyBitsButtonText",{get:function(){return this.props.specialOffer?Object(u.d)("Buy {amount} Bits for {price}",{amount:Object(u.f)(this.props.specialOffer.bits),price:Object(u.f)(this.props.specialOffer.amount,{style:"currency",currency:this.props.specialOffer.currencyCode})},"Bits--NewUserCheerHeader"):""},enumerable:!0,configurable:!0}),t.prototype.renderCurrencyDisclaimer=function(e,t){return e?c.createElement(S.a,{"data-test-selector":ae,type:S.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold> and <x:bold>include VAT</x:bold>",{"x:bold":function(e){return c.createElement(S.a,{type:S.e.Span,bold:!0},e)},currencyCode:t},"Bits--NewUserCheerHeader")):c.createElement(S.a,{type:S.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold>",{"x:bold":function(e){return c.createElement(S.a,{type:S.e.Span,bold:!0},e)},currencyCode:t},"Bits--NewUserCheerHeader"))},t.prototype.renderMinBitsToCheerInChannel=function(e,t){return t&&t>1?c.createElement(S.a,{"data-test-selector":ie,color:C.f.Alt,italic:!0},Object(u.d)("{displayName} requires {minBits} Bits to Cheer in this channel.",{displayName:e,minBits:t},"BBits--NewUserCheerHeader")):null},t}(c.Component);var se,le,ce=Object(i.b)(null,(function(e){return Object(d.b)({showCheckoutFormModal:re.a},e)}))(oe),de=(n("NvZ5"),"storage.wateb.agreedToWatebTerms.v1");!function(e){e.BitsBundlesErrorText="bits-bundles-error-text",e.WatebTerms="wateb-terms",e.WatebTermsAgreeButton="wateb-continue-button"}(se||(se={})),function(e){e[e.Inactive=0]="Inactive",e[e.Error=1]="Error",e[e.Awarded=2]="Awarded"}(le||(le={}));var ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={wateb:le.Inactive,watebError:null,bitsAwarded:0,showWatebTerms:!1,agreedToWatebTerms:u.m.get(de,!1)},t.onBuyPopupClose=function(e){Object(j.a)(e,(function(){t.props.data&&t.props.data.refetch()}))},t.onAdBitsAwarded=function(e){t.props.data&&!t.props.data.loading&&t.props.data.refetch(),t.setState({wateb:le.Awarded,bitsAwarded:e})},t.renderWatebTerms=function(e){return c.createElement(g.a,{className:e,textAlign:C.p.Left,fullWidth:!0,padding:{x:2,bottom:2,top:5},"data-a-target":"bits-show-wateb-terms","data-test-selector":se.WatebTerms},c.createElement(g.a,{position:C.n.Absolute,padding:{top:.5,left:.5},attachLeft:!0,attachTop:!0},c.createElement("div",{key:"Bits--back-edit",style:{cursor:"pointer"},onClick:t.onCloseWatebTerms},c.createElement(S.a,{color:C.f.Link,type:S.e.Span},c.createElement(X.a,{asset:K.a.ChatSettingsBack,height:10,width:10}),Object(u.d)("Back","Bits--Watch-Ad-Terms")))),c.createElement(g.a,{padding:{bottom:2}},c.createElement(S.a,{type:S.e.Span},Object(u.d)("Before continuing to watch ads to earn Bits, we remind you that the <x:link>Bits Acceptable Use Policy</x:link> applies to your participation with this feature and any Bits you may obtain. As a reminder, you may not:",{"x:link":function(e){return c.createElement(Z.a,{linkTo:"https://www.twitch.tv/p/legal/bits-acceptable-use/",targetBlank:!0},e)}},"Bits--Watch-Ad-Terms")),c.createElement(g.a,{margin:{y:1}},c.createElement("li",null,Object(u.d)("Obtain Bits to Cheer on your own channel via this feature","Bits--Watch-Ad-Terms")),c.createElement("li",null,Object(u.d)("Collect Bits via this feature through the use of multiple accounts, robots, or other automated means","Bits--Watch-Ad-Terms")))),c.createElement(g.a,{display:C.g.Flex,justifyContent:C.l.Center},c.createElement(L.a,{size:L.b.Small,onClick:t.onAgreeToWatebTerms,"data-a-target":"bits-agree-wateb-terms","data-test-selector":se.WatebTermsAgreeButton},Object(u.d)("Continue","Bits--Watch-Ad-Terms"))))},t.onAgreeToWatebTerms=function(){u.m.set(de,!0),t.setState({agreedToWatebTerms:!0,showWatebTerms:!1}),t.showWatchAdModal(!0)},t.onCloseWatebTerms=function(){t.setState({showWatebTerms:!1})},t.handleWatchAdClick=function(e){return Object(l.__awaiter)(t,void 0,void 0,(function(){return Object(l.__generator)(this,(function(t){return this.state.agreedToWatebTerms?(this.showWatchAdModal(e),[2]):(this.setState({showWatebTerms:!0}),[2])}))}))},t.receiveAdErrorState=function(e){t.setState({wateb:le.Error,watebError:e})},t.resetAdErrorState=function(){t.state.wateb===le.Error&&(t.setState({wateb:le.Inactive}),t.props.data&&t.props.data.refetch())},t}return Object(l.__extends)(t,e),t.prototype.shouldComponentUpdate=function(e){return!e.adModalOpen},t.prototype.render=function(){var e=this.props.location===E.d.ChatTooltip,t=T("bits-buy-card",{"bits-buy-card__chat-tooltip":e});if(!this.props.data||this.props.data.loading)return c.createElement(F.a,null);if(this.props.data.error)return c.createElement(g.a,{className:T(t,"bits-buy-card--shorter"),textAlign:C.p.Center,"data-a-target":"bits-buy-card-error",alignItems:C.b.Center,justifyContent:C.l.Center,display:C.g.Flex,padding:1,"data-test-selector":se.BitsBundlesErrorText,fullWidth:!0},c.createElement(S.a,{italic:!0},Object(u.d)("Bits prices are unavailable right now. Check back again later.","Bits--BuyCard")));if(this.state.showWatebTerms)return this.renderWatebTerms(t);var n=this.renderWatebCard();if(n)return c.createElement(g.a,{textAlign:C.p.Center,className:T(t,"bits-buy-card--shorter"),fullWidth:!0},n);var r=[];return this.props.data.currentUser&&this.props.data.currentUser.bitsOffers?r=this.props.data.currentUser.bitsOffers.reduce((function(e,t){return t&&e.push(t),e}),[]):this.props.data.bitsOffers&&(r=this.props.data.bitsOffers),this.props.shouldShowNewUserCheerUX?this.renderNewUserCheerBuyCard(t,r):this.renderDefaultBuyCard(t,r)},t.prototype.renderDefaultBuyCard=function(e,t){var n=this.doPricesIncludeVAT(t),r=this.getCurrencyCode(t),i=this.props.data&&this.props.data.currentUser,a=this.props.data&&this.props.data.user,o=c.createElement(ee,{bitsBalance:i&&i.bitsBalance||void 0,displayName:a&&a.displayName||this.props.channelLogin||"",minBitsToCheer:a&&a.cheer&&a.cheer.settings&&a.cheer.settings.cheerMinimumBits||void 0,pricesIncludeVAT:n,currencyCode:r,location:this.props.location}),s=this.renderBitsOffers(t,{hidePromos:this.props.hidePromos,hideWateb:this.props.hideWateb,size:this.props.size});return c.createElement(g.a,{className:e,"data-a-target":"bits-buy-card",fullWidth:!0,display:C.g.Flex,flexDirection:C.h.Column},o,s)},t.prototype.renderNewUserCheerBuyCard=function(e,t){var n=this.getSpecialOffer(t),r=this.doPricesIncludeVAT(t),i=this.getCurrencyCode(t),a=null;this.props.onBack&&(a=c.createElement(g.a,{position:C.n.Absolute,padding:{top:.5,left:.5},attachLeft:!0,attachTop:!0},c.createElement("div",{key:"Bits--back-edit","data-a-target":"bits-buy-card--back",style:{cursor:"pointer"},onClick:this.props.onBack},c.createElement(S.a,{color:C.f.Link,type:S.e.Span},c.createElement(X.a,{asset:K.a.ChatSettingsBack,height:10,width:10}),Object(u.d)("Back","Bits--Buy-Card")))));var o=c.createElement(ce,{bitsConfig:this.props.bitsConfig,bitsBalance:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.bitsBalance||void 0,displayName:this.props.data&&this.props.data.user&&this.props.data.user.displayName||this.props.channelLogin||"",minBitsToCheer:this.props.data&&this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits||void 0,pricesIncludeVAT:r,currencyCode:i,closeAllBits:this.props.closeAllBits,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,location:this.props.location,specialOffer:n,isLoggedIn:this.props.isLoggedIn,onBuyPopupClose:this.onBuyPopupClose,onClose:this.props.onClose,trackBitsCardInteraction:this.props.trackBitsCardInteraction}),s=this.renderBitsOffers(t,{hidePromos:!0,hideWateb:!1,size:$.b.Smallnoscroll});return c.createElement(I.b,{"data-a-target":"bits-buy-card",className:e},c.createElement(c.Fragment,null,a,o,s))},t.prototype.renderBitsOffers=function(e,t){var n=t.hidePromos,r=t.hideWateb,i=t.size;if(!this.props||!this.props.data)return null;var a=this.props.data.user?this.props.data.user.id:"",o=this.props.hideBitsSkusExperiment?Y.a.Control:Object(Y.b)(u.p.experiments.getAndTrackAssignment(D.c.BitsSkusReduction));return c.createElement($.a,{offers:e,size:i,hidePromos:n,hideWateb:r,bitsConfig:this.props.bitsConfig,channelID:a||void 0,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,channelLogin:this.props.channelLogin,closeAllBits:this.props.closeAllBits,currentUserSHA:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.idSHA1||void 0,handleWatchAdClick:this.handleWatchAdClick,location:this.props.location,onBuyPopupClose:this.onBuyPopupClose,onClose:this.props.onClose,trackBitsCardInteraction:this.props.trackBitsCardInteraction,skusReductionVariant:o})},t.prototype.doPricesIncludeVAT=function(e){return e.filter((function(e){return e.type===_.p.BUNDLE})).some((function(e){return e.includesVAT}))},t.prototype.getCurrencyCode=function(e){var t="",n=e.filter((function(e){return e.type===_.p.BUNDLE})).pop();return n&&n.type===_.p.BUNDLE&&(t=n.currencyCode),t},t.prototype.getSpecialOffer=function(e){return e.filter((function(e){return e.type===_.p.BUNDLE})).find((function(e){return e.isPromo&&null!==e.promotion&&e.promotion.id===G.b}))},t.prototype.renderWatebCard=function(){var e=this;if(this.props.data&&this.props.data.currentUser)switch(this.state.wateb){case le.Awarded:return c.createElement(V,{amount:this.state.bitsAwarded,onStartCheering:this.props.onClose,onWatchAnother:function(){return e.handleWatchAdClick(!1)},trackBitsCardInteraction:this.props.trackBitsCardInteraction});case le.Error:return c.createElement(z,{type:this.state.watebError||r.Unknown,onClose:this.props.onClose,onTryAgain:this.resetAdErrorState});default:return}},t.prototype.showWatchAdModal=function(e){this.props.data&&this.props.data.currentUser&&this.props.data.user&&this.props.data.user.id&&this.props.showWatchAdModal({userId:this.props.data.currentUser.id,hashedUserId:this.props.data.currentUser.idSHA1,onBitsAwarded:this.onAdBitsAwarded,onError:this.receiveAdErrorState,requestRef:E.h.ShowAdButton,channelID:this.props.data.user.id,needsCaptcha:e})},t.defaultProps={hidePromos:!1,hideWateb:!1},t}(c.Component);var me=Object(d.d)(Object(h.a)(J,{name:"data",options:function(e){return{variables:{channelLogin:e.channelLogin,withChannel:!!e.channelLogin,isLoggedIn:e.isLoggedIn}}}}),Object(Q.withLatencyTracking)("BitsBuyCard",{autoReportInteractive:!0}),Object(U.b)((function(e){return{bitsConfig:e.bitsConfig}})))(ue);var pe=Object(i.b)((function(e){return{adModalOpen:Object(o.b)(e,N),isLoggedIn:Object(s.f)(e)}}),(function(e){return{showWatchAdModal:function(t){return e(Object(a.e)(N,t))}}}))(me);n.d(t,"a",(function(){return pe}))},"r/lI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FirstCheerBuilder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:148}};n.loc.source={body:"query FirstCheerBuilder($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ncheer {\nid\nsettings {\nid\nemoteMinimumBits\ncheerMinimumBits\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.FirstCheerBuilder=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var r=i(e,t);r&&n.definitions.push(r)})),n}(n,"FirstCheerBuilder")},rAoL:function(e,t,n){},ry0r:function(e,t,n){"use strict";n.r(t);var r,i=n("/MKj"),a=n("kRBY"),o=n("mrSG"),s=n("w09P"),l=n("q1tI"),c=n("ANjH"),d=n("/7QA"),u=n("yR8l"),m=n("eDVu"),p=n("0Log"),h=n("geRD"),f=n("/aPz"),b=n("DMoW"),g=n("IZXT"),C=n("opIq"),v=n("bYOw"),k=n("H31v"),y=n("8nkl"),E=n("ao1a"),B=n("RiD7"),S=n("sUnt"),O=n("Gcqi"),w=n("TqpA"),x=n("zrSb"),A=n("yymn"),N=n("+80q"),T=function(){return l.createElement(S.a,{textAlign:A.p.Center,padding:1},l.createElement(N.a,{italic:!0},Object(d.d)("Have no fear, your Bits inventory is safe! The ability to Cheer will return shortly.","BitsCard")))},I=n("/0dD"),j=(n("wtKP"),function(e){var t=void 0!==e.progress,n=l.createElement("img",{className:"cheer-badge__image",src:e.badge.image1x,alt:e.badge.title,srcSet:e.badge.image1x+" 1x, "+e.badge.image2x+" 2x, "+e.badge.image4x+" 4x"});if(!t)return n;var r=e.progress?Math.max(Math.round(18*(1-e.progress)),1):18;return l.createElement("div",{className:"cheer-badge__progress-container"},n,l.createElement("div",{className:"cheer-badge__progress-overlay",style:{width:r+"px"},"data-test-selector":"cheer-progress"}))}),D=n("VeT4"),_=n("5zXJ"),F=n("dEDE"),U=function(e){var t;e.selfBitsBadge&&(e.selfBitsBadge.current||e.selfBitsBadge.next)&&(t=l.createElement(S.a,{padding:{bottom:.5},visibility:e.isAnonymous?A.r.Hidden:A.r.Visible},e.selfBitsBadge.current&&l.createElement(S.a,{display:A.g.Inline,margin:{right:.5}},l.createElement(j,{badge:e.selfBitsBadge.current})),e.selfBitsBadge.next&&l.createElement(j,{badge:e.selfBitsBadge.next,progress:e.selfBitsBadge.progress}),e.selfBitsBadge.nextBits&&Object(d.d)("Next badge unlocks in {bitsToNextBadge} Bits!",{bitsToNextBadge:e.selfBitsBadge.nextBits-e.selfBitsBadge.totalBits},"Bits--BalanceFooter")));var n=Object(d.d)("{bitsGem} Log in to see your Bits balance",{bitsGem:l.createElement(D.a,{count:100,withImage:!0,bitsConfig:e.bitsConfig,themeOverride:I.a.Dark})},"Bits--BalanceFooter");return void 0!==e.balance&&null!==e.balance&&(n=Object(d.d)("You have {currentBits}",{currentBits:l.createElement(D.a,{count:e.balance,withImage:!0,withText:!0,bitsConfig:e.bitsConfig,themeOverride:I.a.Dark})},"Bits--BalanceFooter")),l.createElement(S.a,{flexGrow:1,padding:1,className:"bits-balance-footer"},t,l.createElement(S.a,{display:A.g.Flex,flexGrow:1,alignItems:A.b.Center,justifyContent:A.l.Between},l.createElement("div",null,n),(void 0===e.showBuyButton||void 0!==e.showBuyButton&&e.showBuyButton)&&l.createElement(F.a,{disabled:void 0===e.balance||void 0!==e.balance&&e.balance>_.m,onClick:e.onClickGetBits,"data-test-selector":"get-bits-button","data-a-target":"get-bits-button",type:F.d.Secondary,overlay:!0},Object(d.d)("Get Bits","Bits--BalanceFooter"))))},M=n("jv9u"),P=n("wUQP"),R=n("Uh2Q"),L=n("ebRM"),H=n("Ws8v"),W=n("7uM4"),V=n("C7sF"),q=n("hnjF"),z=n("Jsra"),G=function(){return l.createElement(H.a,{display:A.g.Flex,flexGrow:1,flexDirection:A.h.Column,justifyContent:A.l.Center,alignItems:A.b.Center,padding:1,borderRadius:{topLeft:A.e.Large,topRight:A.e.Large}},l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Row,alignItems:A.b.Center,padding:{bottom:1}},l.createElement(S.a,{display:A.g.Flex,alignItems:A.b.Center,padding:{right:.5}},l.createElement(W.a,{asset:V.a.Ghost,type:W.b.Brand})),l.createElement(N.a,{type:N.e.Span,fontSize:A.j.Size4,bold:!0},Object(d.d)("Cheering Anonymously","Bits--AnonymousIntro"))),l.createElement(N.a,null,Object(d.d)("Your name will appear in Chat as {anAnonymousCheerer} and custom messaging will be turned off.",{anAnonymousCheerer:l.createElement(q.a,{padding:{y:.5}},l.createElement(N.a,{bold:!0},_.c))},"Bits--AnonymousIntro")),l.createElement(S.a,{margin:1},l.createElement(z.a,{linkTo:"https://help.twitch.tv/customer/portal/articles/2449458#AnonCheer",targetBlank:!0},Object(d.d)("Learn more","Bits--AnonymousIntro"))))},Y=function(e){return l.createElement(S.a,{display:A.g.Flex,flexGrow:1,flexDirection:A.h.Column,justifyContent:A.l.Center,alignItems:A.b.Center,padding:1},l.createElement(S.a,{padding:{top:1}},l.createElement(N.a,{type:N.e.H4,color:A.f.Link,bold:!0},Object(d.d)("Cheer to support Direct Relief","Bits--CharityCheerIntro"))),l.createElement(N.a,null,Object(d.d)("Cheer with the Charity Cheermote or #charity and we'll donate $0.20 for every 100 Bits to Direct Relief, PLUS you'll unlock a custom charity chat badge. Available December 12 - 27.","Bits--CharityCheerIntro")),l.createElement(N.a,null,Object(d.d)("<x:link>Learn more</x:link>",{"x:link":function(e){return l.createElement(z.a,{targetBlank:!0,linkTo:"https://link.twitch.tv/blizzardofbits"},e)}},"Bits--CharityCheerIntro")),l.createElement(S.a,{padding:{top:1,bottom:1}},l.createElement(z.a,{linkTo:"#",onClick:e.onClickHelp,"data-test-selector":"help-link"},Object(d.d)("How do I cheer?","Bits--CharityCheerIntro"))))},Q=n("dx/T"),X=function(e){return l.createElement(S.a,{padding:{top:2,bottom:1}},l.createElement(z.a,{onClick:e.onClickHelp},Object(d.d)("How do I cheer?","Bits--CheermoteIntro")))},K=function(e){return l.createElement(S.a,{display:A.g.Flex,flexGrow:1,flexDirection:A.h.Column,justifyContent:A.l.Center,alignItems:A.b.Center,padding:1},l.createElement(S.a,{padding:{top:2,bottom:2}},l.createElement(N.a,{type:N.e.H5,color:A.f.Link,bold:!0},Object(d.d)("Cheering Supports Your Streamer!","Bits--CheermoteIntro"))),l.createElement(N.a,null,Object(d.d)("Select a Cheermote to start your Cheer","Bits--CheermoteIntro")),l.createElement(X,{onClickHelp:e.onClickHelp}))},Z=n("3CMh"),J=function(e){var t=e.headline||e.prefix+(e.tier||"");return l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,alignItems:A.b.Center,padding:1},!e.hideHeadline&&l.createElement(N.a,{type:N.e.H4,bold:!0},t),l.createElement(Z.a,{prefix:e.prefix,amount:e.tier,showImage:!0,showAmount:e.tier>0}),l.createElement(X,{onClickHelp:e.onClickHelp}))},$=(n("Aa/l"),function(e){var t=null;return e.minToCheer>1&&(t=l.createElement(N.a,{"data-test-selector":"min-to-cheer-selector",color:A.f.Alt2,italic:!0},Object(d.d)("This channel has a Cheer minimum of {minToCheer} Bits",{minToCheer:e.minToCheer},"Bits--CheermoteTierIntro"))),l.createElement(S.a,{display:A.g.Flex,flexGrow:1,flexDirection:A.h.Column,alignItems:A.b.Center,justifyContent:A.l.Center,padding:1,className:"cheermote-tier-intro"},l.createElement(S.a,{padding:{x:4},margin:{bottom:1}},l.createElement(N.a,{color:A.f.Alt2},Object(d.d)("Cheermotes have multiple tiers, rollover below to see each one!","Bits--CheermoteTierIntro"))),t)}),ee=n("4VQm"),te=(n("ecb7"),function(e){var t=e.prefixes.map((function(e,t){if(e.alt&&e.cheerAmount)return l.createElement(q.a,{className:"pending-cheer-list__list-item",key:t,padding:{x:1}},l.createElement("li",null,l.createElement(Z.a,{prefix:e.alt,amount:e.cheerAmount>_.o?_.o:e.cheerAmount,size:Z.b.Small,showAmount:!0,showImage:!0})))}));return l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Row,alignItems:A.b.End,justifyContent:A.l.Center,flexWrap:A.i.Wrap,margin:{top:1},className:"pending-cheer-list"},t)}),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.event,null},t}(l.Component),re=n("2rlx"),ie=n("hCFK");!function(e){e.MinCheer="sponsored-campaign-minimum-cheer",e.OverBitsTotal="sponsored-campaign-over-total",e.CannotBeSponsored="sponsored-campaign-cannot-be-sponsored",e.OverUserLimit="sponsored-campaign-over-user-limit"}(r||(r={}));var ae,oe,se=function(e){var t=0;if(e.prefixes.forEach((function(n){n.alt===e.sponsoredCampaignPrefix&&n.cheerAmount&&(t+=n.cheerAmount)})),t<=0)return null;if(t<e.sponsoredCampaign.minimumBitsAmount){var n=Object(d.d)("This Cheermote has a minimum of {minBits} Bits for {brand} to add extra Bits.",{minBits:e.sponsoredCampaign.minimumBitsAmount,brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return l.createElement(N.a,{"data-test-selector":r.MinCheer,color:A.f.Error},n)}if(!e.sponsoredCampaign.bitsUsed||!e.sponsoredCampaign.bitsTotal||e.sponsoredBitsBonus+e.sponsoredCampaign.bitsUsed>e.sponsoredCampaign.bitsTotal){n=Object(d.d)("Not enough bits from the sponsored pool to support your cheer with the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return l.createElement(N.a,{"data-test-selector":r.OverBitsTotal,color:A.f.Error},n)}if(e.sponsoredCampaign.self&&(!e.sponsoredCampaign.self.canBeSponsored||e.sponsoredCampaign.self.bitsUsed+e.sponsoredBitsBonus>e.sponsoredCampaign.userLimit)){n=Object(d.d)("You have reached the user limit for use of the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return l.createElement(N.a,{"data-test-selector":r.OverUserLimit,color:A.f.Error},n)}return null},le=(n("H0r1"),n("XmgI"));!function(e){e.DisplayOnlyCheermote="display-only-cheermote-selector",e.ZeroBalance="zero-balance-selector",e.PurchaseMore="purchase-more-selector",e.LargestCheermote="largest-cheermote-selector",e.MinimumCheerSelector="minimum-cheer-selector",e.MinimumCheermoteSelector="minimum-cheermote-selector",e.MessageLengthExceeded="message-length-exceeded-selector",e.UserBanned="user-banned-selector",e.UserIneligible="user-ineligible-selector",e.UserSuspended="user-suspended-selector",e.ChannelIneligible="channel-ineligible-selector",e.ZalgoMessage="zalgo-message-selector",e.ChannelBlockedTerms="channel-blocked-terms-selector",e.InvalidEventID="invalid-event-id-selector",e.RequestThrottled="request-throttled-selector",e.Unknown="unknown-selector"}(oe||(oe={}));var ce,de=((ae={})[b.Yc.USER_BANNED]=oe.UserBanned,ae[b.Yc.USER_INELIGIBLE]=oe.UserIneligible,ae[b.Yc.USER_SUSPENDED]=oe.UserSuspended,ae[b.Yc.CHANNEL_INELIGIBLE]=oe.ChannelIneligible,ae[b.Yc.ZALGO_MESSAGE]=oe.ZalgoMessage,ae[b.Yc.CHANNEL_BLOCKED_TERMS]=oe.ChannelBlockedTerms,ae[b.Yc.INVALID_EVENT_ID]=oe.InvalidEventID,ae[b.Yc.REQUEST_THROTTLED]=oe.RequestThrottled,ae[b.Yc.UNKNOWN]=oe.Unknown,ae),ue=function(e){if(e.smallestCheermote<e.minPerEmote||e.bitsSendHasError&&e.bitsSendErrorCode===b.Yc.EMOTE_AMOUNT_BELOW_MIN_BITS){var t=Object(d.d)("This channel has set a minimum of {minPerEmote} Bits to use a Cheer emote in chat.",{minPerEmote:e.minPerEmote},"Bits--PendingCheer");return e.onValidationError(b.Yc.EMOTE_AMOUNT_BELOW_MIN_BITS),l.createElement(N.a,{"data-test-selector":oe.MinimumCheermoteSelector,color:A.f.Error,italic:!0,"data-a-target":"min-emote-bits-error"},t)}if(e.chatMessage&&e.chatMessage.length>_.n||e.bitsSendHasError&&e.bitsSendErrorCode===b.Yc.MESSAGE_LENGTH_EXCEEDED){var n=Object(d.d)("You have exceeded the maximum number of characters you can use in your cheer.","Bits--PendingCheer");return e.onValidationError(b.Yc.MESSAGE_LENGTH_EXCEEDED),l.createElement(N.a,{"data-test-selector":oe.MessageLengthExceeded,color:A.f.Error,italic:!0},n)}if(e.bitsSendHasError){var r=de[e.bitsSendErrorCode]||de[b.Yc.UNKNOWN],i=void 0;switch(e.bitsSendErrorCode){case b.Yc.ZALGO_MESSAGE:i=Object(d.d)("You have unsupported characters in your message, please remove them and try again.","Bits--PendingCheer");break;case b.Yc.USER_BANNED:case b.Yc.USER_INELIGIBLE:case b.Yc.USER_SUSPENDED:case b.Yc.CHANNEL_INELIGIBLE:i=Object(d.d)("Sorry, you are unable to send bits in this channel at this time.","Bits--PendingCheer");break;case b.Yc.CHANNEL_BLOCKED_TERMS:i=Object(d.d)("You have blocked words in your message, please remove them and try again.","Bits--PendingCheer");break;case b.Yc.INVALID_EVENT_ID:case b.Yc.REQUEST_THROTTLED:case b.Yc.UNKNOWN:default:i=Object(d.d)("Something went wrong when processing your cheer, please try again later.","Bits--PendingCheer")}return e.onValidationError(e.bitsSendErrorCode),l.createElement(N.a,{"data-test-selector":r,color:A.f.Error,italic:!0},i)}return null},me=function(e){if(e.largestCheermote>_.o||e.bitsSendHasError&&e.bitsSendErrorCode===b.Yc.TOO_LARGE_BITS_EMOTE){var t=Object(d.d)("{maximumCheerSize} is the largest Cheer emote, add another emote to Cheer louder!",{maximumCheerSize:_.o},"Bits--PendingCheer");return e.onValidationError(b.Yc.TOO_LARGE_BITS_EMOTE),l.createElement(N.a,{"data-test-selector":oe.LargestCheermote,"data-a-target":"max-cheer-bits-error"},t)}if(0===e.bitsBalance)return e.onValidationError(b.Yc.INSUFFICIENT_BALANCE),l.createElement(N.a,{"data-test-selector":oe.ZeroBalance,"data-a-target":"zero-bits-error"},Object(d.d)("Please get Bits. You have 0 Bits and cannot send a Cheer","Bits--PendingCheer"));if(e.bitsBalance&&e.amount>e.bitsBalance)return e.onValidationError(b.Yc.INSUFFICIENT_BALANCE),l.createElement(N.a,{"data-test-selector":oe.PurchaseMore,"data-a-target":"need-more-bits-error"},Object(d.d)("Please purchase {neededBits} more Bits to Cheer",{neededBits:e.amount-e.bitsBalance},"Bits--PendingCheer"));if(e.amount<e.minToCheer||e.bitsSendHasError&&e.bitsSendErrorCode===b.Yc.AMOUNT_BELOW_MIN_BITS){e.onValidationError(b.Yc.AMOUNT_BELOW_MIN_BITS);var n=Object(d.d)("Add {moreBitsAmount} more Bits to reach this channel's minimum Cheer.",{moreBitsAmount:e.minToCheer-e.amount},"Bits--PendingCheer");return l.createElement(N.a,{"data-test-selector":oe.MinimumCheerSelector,"data-a-target":"min-cheer-bits-error"},n)}if(e.amount>_.p||e.bitsSendHasError&&e.bitsSendErrorCode===b.Yc.TOO_LARGE_CHEER){e.onValidationError(b.Yc.TOO_LARGE_CHEER);var r=Object(d.d)("{maximumCheerSize} is the maximum amount of Bits you can send in one message, send multiple messages if you want to Cheer more!",{maximumCheerSize:_.p},"Bits--PendingCheer");return l.createElement(N.a,{"data-test-selector":oe.MinimumCheerSelector,"data-a-target":"max-message-bits-error"},r)}if(e.chatMessage&&Object(le.c)(e.chatMessage,e.bitsConfig)){e.onValidationError(b.Yc.INVALID_BITS_MESSAGE);var i=Object(d.d)("message contains at least one display only Cheermote.","Bits--PendingCheer");return l.createElement(N.a,{"data-test-selector":oe.DisplayOnlyCheermote,"data-a-target":"display-only-bits-error"},i)}return null};!function(e){e.AutoRefillWarning="auto-refill-threshold-warning",e.DefaultPendingCheerMessage="default-pending-cheer-message-selector",e.EventReminder="event-reminder-selector",e.InlineError="inline-error",e.FullError="full-error",e.GhostIcon="ghost-icon"}(ce||(ce={}));var pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inlineError:!1,fullError:!1},t.isBitsAutoRefillEnabled=Object(P.c)("pm_b_auto_r"),t.getAutoRefillInfo=function(){return t.isBitsAutoRefillEnabled&&t.props.bitsBalance&&t.props.autoRefillThreshold&&t.props.bitsBalance-t.props.amount<t.props.autoRefillThreshold?l.createElement(N.a,null,Object(d.d)("This cheer will trigger an auto-refill.","Bits--PendingCheer")):null},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e;if(this.props.prefixes&&1===this.props.prefixes.length){var t=this.props.prefixes[0].alt;t&&(e=l.createElement(S.a,{padding:{top:2}},l.createElement(Z.a,{prefix:t,amount:this.props.amount>_.o?_.o:this.props.amount,showImage:!0,showAmount:!0})))}else if(this.props.prefixes)e=l.createElement(S.a,{margin:{top:1}},l.createElement(ee.b,{className:"pending-cheer__scroll-container"},l.createElement(te,{prefixes:this.props.prefixes})));else{var n=Object(d.d)("You are using a total of {totalBits} Bits to cheer in {channelName}!",{totalBits:l.createElement("strong",null,this.props.amount),channelName:this.props.channelDisplayName},"Bits--PendingCheer");e=l.createElement(S.a,{"data-test-selector":ce.DefaultPendingCheerMessage,padding:{top:2,x:5}},l.createElement(N.a,{color:A.f.Alt2,"data-a-target":"total-bits-message"},n))}var r=null;this.props.prefixes&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(r=l.createElement(se,{prefixes:this.props.prefixes,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:this.props.sponsoredBitsBonus}));var i=ue({minPerEmote:this.props.minPerEmote,smallestCheermote:this.props.smallestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),a=me({minToCheer:this.props.minToCheer,largestCheermote:this.props.largestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,amount:this.props.amount,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});i||a||this.props.onCheerInvalid(void 0);var s=this.getAutoRefillInfo(),c=l.createElement(Z.a,{amount:this.props.amount+this.props.bonusBits,prefix:_.k,display:A.g.Inline,showImage:!1,showAmount:!0,size:Z.b.Medium}),u=[l.createElement(H.a,{key:"cheering-total-bits"},l.createElement(N.a,{fontSize:A.j.Size4,bold:!0},Object(d.d)("Cheering {totalBits} Bits",{totalBits:c},"Bits--PendingCheer")))];if(this.props.isAnonymous){var m=l.createElement(H.a,{key:"ghost-icon",display:A.g.Flex,alignItems:A.b.Center,margin:{right:.5}},l.createElement(W.a,{"data-test-selector":ce.GhostIcon,asset:V.a.Ghost,type:W.b.Brand}));u=Object(o.__spreadArrays)([m],u)}return l.createElement(S.a,null,l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,alignItems:A.b.Center,padding:1,className:"pending-cheer"},l.createElement(q.a,{display:A.g.Flex,alignItems:A.b.Center},l.createElement(re.a,{transitionType:ie.c.Fade},u)),!i&&e,!i&&!a&&r&&l.createElement(S.a,{padding:{top:1}},r),!i&&a&&l.createElement(H.a,{"data-test-selector":ce.InlineError,padding:{top:1},color:A.f.Error},a),i&&l.createElement(S.a,{"data-test-selector":ce.FullError,padding:{top:3,x:3}},i),!i&&!a&&s&&l.createElement(H.a,{"data-test-selector":ce.AutoRefillWarning,padding:{top:1},className:"pending-cheer__auto-refill-info"},s)),!i&&!a&&l.createElement(ne,{event:this.props.event,amount:this.props.amount,"data-test-selector":ce.EventReminder}))},t}(l.PureComponent),he=n("x1M1"),fe=(n("zmH+"),{themed:!0,dark:{"1x":_.f+"/dark/animated/promo/intro.gif"},light:{"1x":_.f+"/light/animated/promo/intro.gif"}}),be=function(){return l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,alignItems:A.b.Center,justifyContent:A.l.Center,flexGrow:1,className:"bits-sending"},l.createElement(S.a,{padding:{bottom:1}},l.createElement(he.a,{sources:fe})),l.createElement(N.a,{italic:!0},Object(d.d)("Your Cheer is currently processing.","Bits--SendingBits")))},ge=n("HGFl"),Ce=n("uG/k"),ve=n("Z2sP"),ke=(n("Yr1V"),function(e){var t=Object(d.g)(e.sponsorCampaign.bitsUsed||0,{maximumFractionDigits:1,round:Math.floor}),n=Object(d.g)(e.sponsorCampaign.bitsTotal||0,{maximumFractionDigits:1,round:Math.floor}),r=e.sponsorCampaign.bitsUsed&&e.sponsorCampaign.bitsTotal?e.sponsorCampaign.bitsUsed/e.sponsorCampaign.bitsTotal*100:0,i=Object(ge.e)(d.b.get("subtember_sponsored_cheermote_end_date","2019-09-24T23:59:59Z"));return l.createElement(H.a,{background:A.d.AccentAlt2,color:A.f.Overlay,display:A.g.Flex,flexGrow:1,flexDirection:A.h.Column,position:A.n.Relative,justifyContent:A.l.Center,alignItems:A.b.Center,padding:1,borderRadius:{topLeft:A.e.Large,topRight:A.e.Large}},l.createElement(S.a,{padding:{top:1,bottom:1}},l.createElement(N.a,{type:N.e.H5,bold:!0},Object(d.d)("Give more Bits to this streamer!","Bits--SponsorIntro"))),l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Row,fullWidth:!0,padding:{bottom:1}},l.createElement(q.a,{padding:{right:1}},l.createElement(Ce.a,{src:e.sponsorCampaign.brandImageURL,alt:e.sponsorCampaign.brandName})),l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,flexGrow:1},l.createElement(q.a,{alignSelf:A.c.Baseline},l.createElement(N.a,null,Object(d.d)("{brandName} Bits",{brandName:e.sponsorCampaign.brandName},"Bits--SponsorIntro"))),"amazon-hunters-2020"===e.sponsorCampaign.id?null:l.createElement(l.Fragment,null,l.createElement(ve.a,{value:r,mask:!0}),l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Row,justifyContent:A.l.Between},l.createElement(N.a,{fontSize:A.j.Size7},Object(d.d)("{bitsUsed} Used",{bitsUsed:t},"Bits--SponsorIntro")),l.createElement(N.a,{fontSize:A.j.Size7},Object(d.d)("{totalBits}",{totalBits:n},"Bits--SponsorIntro")))))),"SUBtember"===e.sponsorCampaign.brandName?l.createElement(S.a,null,l.createElement(N.a,{fontSize:A.j.Size7},Object(d.d)("In celebration of {event}, the {brand} Cheermote gives {percent} bonus Bits when you cheer {minCheer} or more through {endDate}.",{event:"SUBtember",brand:"Subway",percent:Object(d.f)(e.sponsorCampaign.thresholds[0].matchedPercent,"percent"),minCheer:e.sponsorCampaign.minimumBitsAmount,endDate:Object(d.c)(i,"long")},"Bits--SponsorIntro")),l.createElement(z.a,{linkTo:"https://blog.twitch.tv/subtember-is-back-and-its-better-than-ever-9533f39098d5",type:z.b.Overlay,targetBlank:!0},Object(d.d)("Learn more","Bits--SponsorIntro"))):l.createElement(S.a,null,l.createElement(N.a,{fontSize:A.j.Size7},Object(d.d)("The {brandName} Cheermote gives {sponsorPercentage}% bonus Bits when you Cheer {minimumSponsorBits} or more!",{minimumSponsorBits:e.sponsorCampaign.thresholds[0].minimumBits,brandName:e.sponsorCampaign.brandName,sponsorPercentage:100*e.sponsorCampaign.thresholds[0].matchedPercent},"Bits--SponsorIntro"))))}),ye=n("FZ/2"),Ee=(n("u0cu"),function(e){var t=Object(d.d)("You are using {totalBits} Bits to cheer in {channelName}'s chat.",{totalBits:e.totalBits,channelName:e.channelDisplayName},"Bits--UndoPrompt"),n=null;if(e.prefixes&&e.prefixes.length>1)n=l.createElement(ee.b,{className:"bits-undo-prompt__scroll-container"},l.createElement(S.a,{margin:{top:1}},l.createElement(te,{prefixes:e.prefixes})));else{var r=e.prefixes[0].alt;r&&(n=l.createElement(S.a,{padding:{bottom:1}},l.createElement(Z.a,{prefix:r,amount:e.totalBits,showAmount:!0,showImage:!0})))}return l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,alignItems:A.b.Center,justifyContent:A.l.Center,flexGrow:1,padding:1,className:"bits-undo-prompt"},n,l.createElement(N.a,null,t))}),Be=function(e){if(e.isSending)return e.totalBits<_.q?l.createElement(be,null):l.createElement(Ee,{channelDisplayName:e.displayName,prefixes:e.currentCheers,totalBits:e.totalBits});if(e.hoveredCheermote)return l.createElement(J,{prefix:e.hoveredCheermote,tier:e.hoveredTier,onClickHelp:e.showHelp});var t=Se(e.bitsConfig),n=Oe(e.bitsConfig),r=d.b.get(_.s,P.b.Off);if(e.totalBits)return l.createElement(pe,{bitsConfig:e.bitsConfig,prefixes:e.currentCheers,amount:e.totalBits,bonusBits:e.bonusBits,channelDisplayName:e.displayName,bitsBalance:e.bitsBalance,largestCheermote:e.largestCheermote,smallestCheermote:e.smallestCheermote,minPerEmote:e.emoteMinimumBits,minToCheer:e.cheerMinimumBits,event:e.event,sponsoredCampaign:t,sponsoredCampaignPrefix:n,sponsoredBitsBonus:e.bonusBits,bitsSendErrorCode:e.bitsSendErrorCode,bitsSendHasError:e.bitsSendHasError,chatMessage:e.chatMessage,onCheerInvalid:e.onCheerInvalid,isAnonymous:e.isAnonymous,autoRefillThreshold:e.autoRefillThreshold});if(e.helpRequested)return l.createElement(Q.a,null);var i,a=d.b.get(_.i,P.b.Off),o=null;if(e.bitsOffers&&(o=e.bitsOffers.find((function(e){return Object(L.f)(e)}))),e.isAnonymous)return l.createElement(G,null);if(e.chosenCheermote){var s=e.cheerMinimumBits;return l.createElement($,{minToCheer:s})}return o&&(i=o,Object(L.f)(i))?l.createElement(ye.a,{offer:o,channelID:e.channelID||"",trackingID:e.trackingID,checkoutID:e.checkoutID,trackBitsCardInteraction:e.trackBitsCardInteraction,onPromoBuyClose:e.onPromoBuyClose,isBitsCard:!0}):t&&(r===P.b.On||r===P.b.StaffOnly&&e.isStaff)?l.createElement(ke,{sponsorCampaign:t}):a===P.b.On?l.createElement(Y,{onClickHelp:e.showHelp}):Object(R.f)(R.a)?l.createElement(R.a.intro,null):l.createElement(K,{onClickHelp:e.showHelp})};function Se(e){var t=null;return e.orderedActions.forEach((function(e){e.campaign&&(t=e.campaign)})),t}function Oe(e){var t="";return e.orderedActions.forEach((function(e){e.campaign&&(t=e.prefix)})),t}var we,xe=n("XDQu"),Ae=n("TSYQ");n("ZfCj");!function(e){e.Placeholder="placeholder"}(we||(we={}));var Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave&&t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick&&t.props.onClick(n)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.cheermote&&this.props.cheermote.key?l.createElement("li",{className:Ae("cheermote-button",this.props.className)},l.createElement("button",{className:"cheermote-button__button","data-key":this.props.cheermote.key,onMouseEnter:this.handleCheermoteHover,onMouseLeave:this.handleCheermoteUnhover,onClick:this.handleCheermoteClick,"data-a-target":"cheermote-"+this.props.cheermote.key.replace(":","")},l.createElement("img",{alt:this.props.cheermote.key,src:this.props.darkModeEnabled?this.props.cheermote.imgSrcDark:this.props.cheermote.imgSrc})),this.props.children):l.createElement("li",{"data-test-selector":we.Placeholder},l.createElement("button",{className:"cheermote-button__button",disabled:!0},l.createElement("div",{className:"cheermote-button__placeholder"})))},t}(l.PureComponent);var Te,Ie=Object(i.b)((function(e){return{darkModeEnabled:Object(xe.a)(e)===I.a.Dark}}))(Ne);!function(e){e.MinBitsAmountDisclaimer="min-bits-amount-disclaimer"}(Te||(Te={}));var je=["cheer","shamrock","frankerz","party"],De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeCheermoteButtons=function(e){var n=t.props.bitsConfig.indexedActions[e.toLowerCase()];return t.makeCheermoteButton(n)},t.makeCheermoteButton=function(e){if(e){var n={key:e.prefix,imgSrc:e.getImage("light","static",_.l,2),imgSrcDark:e.getImage("dark","static",_.l,2)};return l.createElement(Ie,{key:n.key,cheermote:n,onClick:t.props.onCheermoteClick})}},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=je.map(this.makeCheermoteButtons),n=this.props.bitsConfig.orderedActions.find((function(e){return e.type===b.P.CUSTOM}));return n&&(t[1]=this.makeCheermoteButton(n)),l.createElement(S.a,{className:"first-cheer-builder",display:A.g.Flex,flexDirection:A.h.Column,padding:{top:3},justifyContent:A.l.Between},l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,textAlign:A.p.Center},l.createElement(N.a,{bold:!0,type:N.e.H4},Object(d.d)("Support your streamer with Bits","FirstCheerPrefixSelector")),l.createElement(S.a,{padding:{x:4,top:.5},textAlign:A.p.Left},l.createElement(N.a,{type:N.e.Span},Object(d.d)("Twitch rewards streamers when you use Bits. Send {channelName} some love! First select a cheermote.",{channelName:this.props.channelName},"FirstCheerPrefixSelector"))),!this.props.canCheerInChannel&&l.createElement(S.a,{padding:{top:1}},l.createElement(N.a,{"data-test-selector":Te.MinBitsAmountDisclaimer,type:N.e.Span,italic:!0},Object(d.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return l.createElement(D.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerPrefixSelector")))),l.createElement(q.a,{display:A.g.Flex,flexDirection:A.h.Row,justifyContent:A.l.Center},l.createElement("ol",null,t)),l.createElement(S.a,{padding:{x:2,bottom:.5},fullWidth:!0},l.createElement(F.a,{"data-a-target":"bits-card-back-button",type:F.d.Text,fullWidth:!0,onClick:this.props.onShowAllCheermotes},Object(d.d)("Show All Cheermotes","FirstCheerPrefixSelector"))))},t}(l.PureComponent),_e=n("8/mp"),Fe=(n("ECxT"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.indexedActions[this.props.chosenCheermote.toLowerCase()],n=this.props.isAnonymous&&Object(le.e)(this.props.chosenCheermote),r=t.orderedTiers.filter((function(e){return e.canShowInBitsCard||n})).map((function(e){return{imgSrc:t.getImage("light","static",e.bits,2),imgSrcDark:t.getImage("dark","static",e.bits,2),key:t.prefix+":"+e.bits}})).reverse().map((function(t,n){return t&&t.key?l.createElement("li",{key:t.key,className:"cheermote-tier-selector__cheermote"},l.createElement("button",{className:"cheermote-tier-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},l.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})),l.createElement(Z.a,{prefix:"",amount:+t.key.split(":")[1],showImage:!1,showAmount:!0,size:Z.b.Small})):l.createElement("li",{key:"null-cheermote-"+n},l.createElement("button",{className:"cheermote-tier-selector__item-button",disabled:!0},l.createElement("div",{className:"cheermote-tier-selector__placeholder"})))})),i=l.createElement(S.a,{padding:{right:2},fullWidth:!0,className:"cheermote-tier-selector__back-button",visibility:this.props.isAnonymous?A.r.Hidden:A.r.Visible},l.createElement(F.a,{"data-a-target":"bits-card-back-button",type:F.d.Text,fullWidth:!0,onClick:this.props.onClose},Object(d.d)("Show All Cheermotes","CheermoteCarousel"))),a=l.createElement(q.a,{className:"cheermote-tier-selector__cheermotes",display:A.g.Flex,flexWrap:A.i.Wrap,flexDirection:A.h.Row,justifyContent:A.l.Between,alignItems:A.b.End,padding:{bottom:1}},l.createElement("ul",null,r,i));return l.createElement(S.a,{flexGrow:1,overflow:A.m.Hidden,className:"cheermote-tier-selector"},a)},t}(l.PureComponent));var Ue,Me=Object(i.b)((function(e){return{darkModeEnabled:Object(xe.a)(e)===I.a.Dark}}))(Fe);n("8BsE");!function(e){e.MinBitsChannelDisclaimer="min-bits-channel-disclaimer",e.BitsAmountCheering="bits-amount-cheering"}(Ue||(Ue={}));var Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.unhoverTimeout=0,t.onClickTier=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.onHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||t.setState({hoveredTier:parseInt(n[1],10),hoveredCheermote:n[0]})},t.onHoverLeave=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:void 0,hoveredCheermote:void 0})},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=Object(L.a)(this.props.currentCheers),n=t.total,r=t.bonus,i=t.smallestCheermote,a=t.largestCheermote,o=null;if(this.props.currentCheers&&1===this.props.currentCheers.length){var s=this.props.currentCheers[0].alt;s&&(o=l.createElement(S.a,{padding:{top:1}},l.createElement(Z.a,{prefix:s,amount:n>_.o?_.o:n,showImage:!0,showAmount:!0})))}else this.props.currentCheers&&(o=l.createElement(S.a,{margin:{y:1}},l.createElement(_e.b,{className:"first-cheer-tier-selector__scroll-container"},l.createElement(te,{prefixes:this.props.currentCheers}))));var c=Object(d.d)("Back","FirstCheerTierSelector"),u=!(!this.state.hoveredCheermote||!this.state.hoveredTier),m=this.props.canCheerInChannel&&this.props.currentCheers.length>0,p=null;this.props.currentCheers&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(p=l.createElement(se,{prefixes:this.props.currentCheers,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:r}));var h=ue({smallestCheermote:i,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,minPerEmote:this.props.minPerEmote,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),f=me({largestCheermote:a,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,amount:n,minToCheer:this.props.minCheerAmount,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});return h||f||this.props.onCheerInvalid(void 0),l.createElement(S.a,{display:A.g.Flex,flexDirection:A.h.Column,justifyContent:A.l.Between},l.createElement(H.a,{padding:{top:3},display:A.g.Flex,flexDirection:A.h.Column,textAlign:A.p.Center,borderBottom:!0},l.createElement(S.a,{position:A.n.Absolute,attachLeft:!0,attachTop:!0,padding:{top:.5}},l.createElement(F.a,{ariaLabel:c,onClick:this.props.onBack,type:F.d.Text,icon:V.a.AngleLeft},c)),l.createElement(N.a,{type:N.e.H4,bold:!0},Object(d.d)("Pick cheermote tier","FirstCheerTierSelector")),l.createElement(S.a,{padding:{x:4,top:.5},textAlign:A.p.Left},l.createElement(N.a,null,Object(d.d)("Now, select how many Bits to use and send your message in chat.","FirstCheerTierSelector"))),u&&l.createElement(J,{hideHeadline:!0,prefix:this.state.hoveredCheermote,tier:this.state.hoveredTier,onClickHelp:this.props.showHelp}),!u&&l.createElement(l.Fragment,null,m&&!h&&l.createElement(l.Fragment,null,o,l.createElement(S.a,{padding:{bottom:.5}},l.createElement(N.a,{"data-test-selector":Ue.BitsAmountCheering},Object(d.d)("You're cheering <x:bitsAmount></x:bitsAmount>",{"x:bitsAmount":function(){return l.createElement(D.a,{count:n,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector")))),m&&!f&&p&&l.createElement(S.a,{padding:{top:1}},p),m&&f&&l.createElement(H.a,{padding:{top:1},color:A.f.Error},f),m&&h&&l.createElement(S.a,{padding:{top:3,x:3}},h),!m&&l.createElement(S.a,{padding:{y:3}},l.createElement(N.a,{"data-test-selector":Ue.MinBitsChannelDisclaimer,type:N.e.Span,italic:!0},Object(d.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return l.createElement(D.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector"))))),l.createElement(Me,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onClose:this.props.onClose,onClick:this.onClickTier,onHover:this.onHover,onHoverLeave:this.onHoverLeave,isAnonymous:this.props.isAnonymous}))},t}(l.PureComponent),Re=n("r/lI"),Le=(n("KO0n"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onTierSelectionExit=function(){t.setState({selectedCheermote:void 0})},t.onCheermoteClick=function(e){t.setState({selectedCheermote:e})},t}return Object(o.__extends)(t,e),t.prototype.render=function(){if(this.props.data.loading&&!this.props.data.error)return l.createElement(M.a,null);if(this.props.data.error)return l.createElement(T,null);var e=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits,t=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.emoteMinimumBits,n=!!(this.props.bitsBalance&&null!==e&&this.props.bitsBalance>=e),r=Se(this.props.bitsConfig),i=Oe(this.props.bitsConfig);return l.createElement(w.a,{onUserClose:this.props.handleExit},this.state.selectedCheermote&&l.createElement(Pe,{chosenCheermote:this.state.selectedCheermote,bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,minPerEmote:t||1,channelName:this.props.channelLogin,onClose:this.props.handleExit,currentCheers:this.props.currentCheers,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.props.chatMessage,sponsoredCampaign:r,sponsoredCampaignPrefix:i,bitsBalance:this.props.bitsBalance||0,onClickCheermote:this.props.onClickCheermote,onBack:this.onTierSelectionExit,onCheerInvalid:this.props.onCheerInvalid,isAnonymous:this.props.isAnonymous,showHelp:this.props.showHelp}),!this.state.selectedCheermote&&l.createElement(De,{bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,channelName:this.props.channelLogin,onCheermoteClick:this.onCheermoteClick,onShowAllCheermotes:this.props.handleExit}),l.createElement(S.a,{fullWidth:!0,className:"first-cheer-builder__footer"},l.createElement(U,{bitsConfig:this.props.bitsConfig,balance:this.props.bitsBalance||0,showBuyButton:!n,onClickGetBits:this.props.handleClickBuy,isAnonymous:this.props.isAnonymous})))},t}(l.PureComponent)),He=Object(c.d)(Object(u.a)(Re,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}))(Le),We=function(e){return e.event,l.createElement(U,{bitsConfig:e.bitsConfig,onClickGetBits:e.onClickGetBits,balance:e.balance,selfBitsBadge:e.selfBitsBadge,isAnonymous:!1})},Ve=function(e){return l.createElement(S.a,{flexGrow:1},l.createElement(S.a,{className:"undo-prompt__footer",padding:1,display:A.g.Flex,justifyContent:A.l.Between},l.createElement(F.a,{onClick:e.onCancel||void 0,type:F.d.Secondary,overlay:!0,"data-test-selector":"cancel-button"},Object(d.d)("Cancel","Bits--UndoPrompt")),l.createElement(F.a,{onClick:e.onConfirm||void 0,"data-test-selector":"confirm-button"},Object(d.d)("Send","Bits--UndoPrompt"))),l.createElement(ve.a,{animationDirection:ve.b.Down,size:ve.c.ExtraSmall,animationDuration:_.u.UNDO_PROMPT_DURATION/1e3}))},qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.isSending?this.props.totalBits>=_.q?l.createElement(Ve,{onCancel:this.props.onCancelSend,onConfirm:this.props.onConfirmSend}):null:this.props.event?l.createElement(We,{event:this.props.event,selfBitsBadge:this.props.userSelfBitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance}):l.createElement(U,{selfBitsBadge:this.props.userSelfBitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance,isAnonymous:this.props.isAnonymous})},t}(l.PureComponent),ze=n("cw0r"),Ge=n("b7S+"),Ye=n("kqSx"),Qe=(n("AcdH"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.orderedActions.filter((function(e){return e.type!==b.P.ANONYMOUS&&e.type!==b.P.THIRD_PARTY&&e.type!==b.P.DISPLAY_ONLY})).map((function(e){return{imgSrc:e.getImage("light","static",_.l,2),imgSrcDark:e.getImage("dark","static",_.l,2),key:e.prefix}})).map((function(t,n){return t&&t.key?l.createElement(q.a,{key:t.key,margin:{bottom:1}},l.createElement("li",{className:"cheermote-prefix-selector__cheermote"},l.createElement("button",{className:"cheermote-prefix-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},l.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})))):l.createElement("li",{key:"null-cheermote-"+n},l.createElement("button",{className:"cheermote-prefix-selector__item-button",disabled:!0},l.createElement("div",{className:"cheermote-prefix-selector__placeholder"})))})),n=l.createElement(q.a,{className:"cheermote-prefix-selector__cheermotes",display:A.g.Flex,flexWrap:A.i.Wrap,flexDirection:A.h.Row,justifyContent:A.l.Start,alignItems:A.b.End,padding:{bottom:1}},l.createElement("ul",null,t));return l.createElement(S.a,{flexGrow:1,overflow:A.m.Hidden,className:"cheermote-prefix-selector"},l.createElement(_e.b,null,n))},t}(l.PureComponent));var Xe=Object(i.b)((function(e){return{darkModeEnabled:Object(xe.a)(e)===I.a.Dark}}))(Qe),Ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnonymousCheckBoxChange=function(e){t.props.handleAnonymousToggle(e.currentTarget.checked)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){if(this.props.helpRequested&&!this.props.currentCheers.length)return null;var e=null;return e=this.props.isAnonymous?l.createElement(Me,{bitsConfig:this.props.bitsConfig,chosenCheermote:_.b,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote,isAnonymous:this.props.isAnonymous}):this.props.chosenCheermote?l.createElement(Me,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote,isAnonymous:this.props.isAnonymous}):l.createElement(Xe,{bitsConfig:this.props.bitsConfig,onHover:this.props.handleCheermoteHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleCheermoteClick}),l.createElement(S.a,{fullWidth:!0},!this.props.event&&l.createElement(ze.a,{name:"bits_project_marley"},l.createElement(S.a,{padding:{left:1,top:1}},l.createElement(Ge.a,{label:Object(d.d)("Your name will appear as {anAnonymousCheerer} and custom messaging will be turned off.",{anAnonymousCheerer:_.c},"CheermotePrefixSelector"),direction:Ge.c.Bottom,align:Ge.b.Left,width:275},l.createElement(Ye.a,{checked:this.props.isAnonymous,onChange:this.onAnonymousCheckBoxChange,label:Object(d.d)("Cheer Anonymously","CheermotePrefixSelector")})))),e)},t}(l.PureComponent),Ze=n("edgk"),Je=n("UajW"),$e=(n("c+1r"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chosenCheermote:null,hoveredCheermote:null,hoveredTier:0,totalBits:0,bonusBits:0,largestCheermote:0,smallestCheermote:0},t.unhoverTimeout=0,t.handleTierHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||(t.setState({hoveredTier:+n[1],hoveredCheermote:n[0]}),t.props.trackBitsCardInteraction(B.c.PreviewEmote,{actionType:B.a.Hover,emoteType:n[0],emoteLevel:+n[1]}))},t.handleUnhover=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:0,hoveredCheermote:null})},t.handleTierClick=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.handleCheermoteHover=function(e){clearTimeout(t.unhoverTimeout),t.setState({hoveredCheermote:e,hoveredTier:0}),t.props.trackBitsCardInteraction(B.c.PreviewEmote,{actionType:B.a.Hover,emoteType:e,emoteLevel:100})},t.handleCheermoteClick=function(e){t.setState({chosenCheermote:e,hoveredCheermote:null,hoveredTier:0})},t.clearChosenCheermote=function(){t.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0})},t.onPromoBuyClose=function(e){Object(Ze.a)(e,(function(){t.props.data&&t.props.data.refetch()}))},t}return Object(o.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.chosenCheermote||t.hoveredCheermote||t.hoveredTier,r=e.visible||!!e.currentCheers.length,i=Object(o.__assign)({},t);n&&!r&&(i=Object(o.__assign)(Object(o.__assign)({},i),{chosenCheermote:null,hoveredCheermote:null,hoveredTier:0}));var a=Object(L.a)(e.currentCheers),s=a.total,l=a.bonus,c=a.largestCheermote,d=a.smallestCheermote;return s===t.totalBits&&l===t.bonusBits&&c===t.largestCheermote&&d===t.smallestCheermote||(i=Object(o.__assign)(Object(o.__assign)({},i),{totalBits:s,bonusBits:l,largestCheermote:c,smallestCheermote:d})),i},t.prototype.componentDidMount=function(){var e=Object(L.a)(this.props.currentCheers),t=e.total,n=e.bonus,r=e.largestCheermote,i=e.smallestCheermote;this.setState({totalBits:t,bonusBits:n,largestCheermote:r,smallestCheermote:i}),this.props.onMount&&this.props.onMount()},t.prototype.render=function(){var e=this.props,t=e.cheerMessageAutoModded,n=e.visible,r=e.currentCheers,i=e.data,a=e.bitsConfig,o=e.isSending,s=e.helpRequested,c=e.channelID,u=e.showHelp,m=e.isStaff,p=e.bitsSendErrorCode,h=e.bitsSendHasError,f=e.handleClickBuy,b=e.onCancelSend,g=e.onConfirmSend,C=e.chatMessage;if(t||!n&&!r.length)return null;if(!i.user||i.loading)return l.createElement(M.a,null);if(i.error||!a)return l.createElement(T,null);if(!i.user.cheer)return null;var v,k=this.props.helpRequested&&!this.props.currentCheers.length,y=null;i.user.cheer.settings.event&&(y=i.user.cheer.settings.event.toLowerCase().replace("_","-")),k&&(v=l.createElement(S.a,{position:A.n.Absolute,padding:{left:.5,top:.5},attachLeft:!0,attachTop:!0},l.createElement(F.a,{onClick:this.props.closeHelp,"data-a-target":"bits-card-back-button",icon:V.a.ChatSettingsBack,type:F.d.Text,size:F.b.Small},Object(d.d)("Back","BitsCard"))));var E,B=Ae("t-bits-card__contents",{"t-bits-card__contents--anonymous":this.props.isAnonymous});return i.currentUser&&i.currentUser.bitsOffers&&i.currentUser.autoRefill&&i.currentUser.autoRefill.profiles[0]&&(E=i.currentUser.autoRefill.profiles[0]),l.createElement(l.Fragment,null,!o&&v,l.createElement(H.a,{className:B,display:A.g.Flex,flexGrow:0,flexDirection:A.h.Column,alignContent:A.a.Stretch,textAlign:A.p.Center,borderBottom:!o,borderRadius:{topLeft:A.e.Large,topRight:A.e.Large},fullWidth:!0},l.createElement(Be,{bitsBalance:i.currentUser&&i.currentUser.bitsBalance||0,bitsConfig:a,cheerMinimumBits:i.user.cheer.settings.cheerMinimumBits,chosenCheermote:this.state.chosenCheermote,currentCheers:r,displayName:i.user.displayName||"",emoteMinimumBits:i.user.cheer.settings.emoteMinimumBits,event:y,helpRequested:s,hoveredCheermote:this.state.hoveredCheermote,hoveredTier:this.state.hoveredTier,isSending:o,largestCheermote:this.state.largestCheermote,smallestCheermote:this.state.smallestCheermote,totalBits:this.state.totalBits,bonusBits:this.state.bonusBits,channelID:c,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,showHelp:u,isStaff:m,isAnonymous:this.props.isAnonymous,bitsSendErrorCode:p,bitsSendHasError:h,chatMessage:C,onCheerInvalid:this.props.onCheerInvalid,bitsOffers:i.currentUser&&i.currentUser.bitsOffers,trackBitsCardInteraction:this.props.trackBitsCardInteraction,onPromoBuyClose:this.onPromoBuyClose,autoRefillThreshold:E&&E.isEnabled&&E.threshold||void 0})),!o&&l.createElement(Ke,{bitsConfig:a,chosenCheermote:this.state.chosenCheermote,currentCheers:r,event:y,helpRequested:s,isAnonymous:this.props.isAnonymous,handleCheermoteClick:this.handleCheermoteClick,handleCheermoteHover:this.handleCheermoteHover,handleTierClick:this.handleTierClick,handleTierHover:this.handleTierHover,handleUnhover:this.handleUnhover,handleAnonymousToggle:this.props.onAnonymousToggle,clearChosenCheermote:this.clearChosenCheermote}),l.createElement(H.a,{className:"t-bits-card__footer",fullWidth:!0,display:A.g.Flex,borderRadius:{bottomLeft:A.e.Large,bottomRight:A.e.Large}},l.createElement(qe,{bitsBalance:i.currentUser&&i.currentUser.bitsBalance||0,bitsConfig:a,event:y,isSending:o,totalBits:this.state.totalBits,userSelfBitsBadge:i.user.self&&i.user.self.bitsBadge,handleClickBuy:f,onCancelSend:b,onConfirmSend:g,isAnonymous:this.props.isAnonymous})))},t}(l.Component)),et=Object(c.d)(Object(m.a)((function(e){return{query:Je,variables:{name:e.channelID},topic:Object(f.g)(e.channelID||""),type:p.PubsubMessageType.BitsChannelSettingsEvent,mutator:function(e,t){return t.user&&t.user.cheer?(void 0!==e.updates.minimum_bits&&(t=s(t,(function(e){return e.user.cheer.settings.cheerMinimumBits}),(function(){return e.updates.minimum_bits}))),void 0!==e.updates.minimum_bits_emote&&(t=s(t,(function(e){return e.user.cheer.settings.emoteMinimumBits}),(function(){return e.updates.minimum_bits_emote}))),t):t},skip:!e.channelID}})),Object(u.a)(Je,{name:"data",skip:function(e){return!e.channelID},options:function(e){return{variables:{name:e.channelID||"",withCheerBombEventEnabled:!1},fetchPolicy:"cache-and-network"}}}))($e),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return l.createElement(S.a,{padding:1,textAlign:A.p.Center},l.createElement(N.a,{color:A.f.Error,italic:!0},Object(d.d)("You cannot Cheer in your own channel.","BitsCard")))},t}(l.PureComponent),nt=n("bBAb"),rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={helpRequested:!1,buyingBits:!1,backTargetsIntro:!1},t.lastRefetchTime=0,t.showHelp=function(e){e.preventDefault(),t.setState({helpRequested:!0}),t.props.trackBitsCardInteraction(B.c.NewUserHelpRequested)},t.closeHelp=function(){return t.setState({helpRequested:!1})},t.handleClickBuy=function(){t.setState({buyingBits:!0}),t.props.trackBitsCardInteraction(B.c.BuyMain)},t.handleCloseBuy=function(){t.setState({buyingBits:!1}),t.props.trackBitsCardInteraction(B.c.CloseBuy)},t.handleSkip=function(){t.closeHelp(),t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}),t.props.trackBitsCardInteraction(B.c.NewUserSkipTutorial)},t.handleCloseIntro=function(){t.closeHelp(),t.props.currentCheers.length?t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}):t.props.onUserClose(),t.props.trackBitsCardInteraction(B.c.NewUserCloseTutorial)},t.handleClickFirstTimePurchaseDiscount=function(){t.setState({buyingBits:!0,helpRequested:!1,backTargetsIntro:!0}),t.mutateFirstCheerTutorialState({hasAbandoned:!0,hasSkipped:!1}),t.props.trackBitsCardInteraction(B.c.NewUserFirstTimePurchaseDiscountClick)},t.handleBackFromBuy=function(){t.setState({helpRequested:t.state.backTargetsIntro,buyingBits:!1})},t.onMountBitsCardMain=function(){t.setState({backTargetsIntro:!1})},t.mutateFirstCheerTutorialState=function(e){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,n,r,i,a,s,l;return Object(o.__generator)(this,(function(c){switch(c.label){case 0:if(!(t=this.props.data&&this.props.data.currentUser))return[3,4];n=t.bitsUserSettings,r=t.id,i=n&&n.firstCheerTutorial||{hasAbandoned:!1,hasSkipped:!1},a={hasAbandoned:e.hasAbandoned,hasSkipped:e.hasSkipped},s={setBitsUserSettings:{__typename:"SetBitsUserSettingsPayload",currentUser:{__typename:"User",id:r,bitsUserSettings:{__typename:"BitsUserSettings",firstCheerTutorial:Object(o.__assign)(Object(o.__assign)({__typename:"FirstCheerTutorial"},i),a)}}}},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.props.setBitsUserSettings(Object(h.b)({abandonedFirstCheerTutorial:e.hasAbandoned,skippedFirstCheerTutorial:e.hasSkipped},s))];case 2:return c.sent(),[3,4];case 3:return l=c.sent(),Object(g.d)()?d.k.warn(l,"Failed to set bits user settings."):d.k.errorAndReport(l,"Failed to set bits user settings."),[3,4];case 4:return[2]}}))}))},t}return Object(o.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.visible||!!e.currentCheers.length;return t.buyingBits?Object(o.__assign)(Object(o.__assign)({},t),{buyingBits:!(t.buyingBits&&!n)}):t},t.prototype.componentDidUpdate=function(e){var t=e.visible||!!e.currentCheers.length,n=this.props.visible||!!this.props.currentCheers.length;if(!t&&n){var r=Date.now();r-this.lastRefetchTime>1e3&&e.data&&this.props.data&&!this.props.data.loading&&(this.lastRefetchTime=r,this.props.data.refetch())}e.visible!==this.props.visible&&this.props.setBitsCardOpenState(this.props.visible)},t.prototype.render=function(){if(this.props.cheerMessageAutoModded||!this.props.visible&&!this.props.currentCheers.length)return null;if(!this.props.data||this.props.data.loading)return l.createElement(w.a,{onUserClose:this.props.onUserClose},l.createElement(M.a,null));if(this.props.data.error||!this.props.bitsConfig)return l.createElement(w.a,{onUserClose:this.props.onUserClose},l.createElement(T,null));if(this.props.data.currentUser&&this.props.data.currentUser.login===this.props.channelLogin)return l.createElement(w.a,{onUserClose:this.props.onUserClose},l.createElement(tt,null));var e=this.props.data&&this.props.data.currentUser,t=e&&e.bitsUserState,n=e&&e.bitsUserSettings;if(Object(E.a)(t)){if(this.state.buyingBits)return l.createElement(w.a,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},l.createElement(C.a,{channelLogin:this.props.channelLogin,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,onBack:this.handleBackFromBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:B.d.ChatTooltip,shouldShowNewUserCheerUX:!0}));if(Object(E.d)(t,n)||Object(E.a)(t)&&this.state.helpRequested)return l.createElement(w.a,{onUserClose:this.handleCloseIntro,closeDataATarget:"bits-intro-close-button"},l.createElement(S.a,{padding:1},l.createElement(x.a,{onUserSkip:this.handleSkip,onUserClickFirstTimePurchaseDiscount:this.handleClickFirstTimePurchaseDiscount,trackBitsCardInteraction:this.props.trackBitsCardInteraction})))}return this.state.buyingBits?l.createElement(w.a,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},l.createElement(C.a,{channelLogin:this.props.channelLogin,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:B.d.ChatTooltip,size:v.b.Scrollview})):Object(E.b)(this.props.isStaff,t,n)?l.createElement(He,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,currentCheers:this.props.currentCheers,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onClickCheermote:this.props.onClickCheermote,bitsBalance:e&&e.bitsBalance,handleClickBuy:this.handleClickBuy,handleExit:this.handleSkip,onCheerInvalid:this.props.onCheerInvalid,isAnonymous:!1,showHelp:this.showHelp}):l.createElement(w.a,{onUserClose:this.props.currentCheers.length?void 0:this.props.onUserClose},l.createElement(et,{onMount:this.onMountBitsCardMain,bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,channelLogin:this.props.channelLogin,cheerMessageAutoModded:this.props.cheerMessageAutoModded,visible:this.props.visible,currentCheers:this.props.currentCheers,isSending:this.props.isSending,isStaff:this.props.isStaff,isAnonymous:this.props.isAnonymous,onClickCheermote:this.props.onClickCheermote,onCancelSend:this.props.onCancelSend,onConfirmSend:this.props.onConfirmSend,trackBitsCardInteraction:this.props.trackBitsCardInteraction,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,helpRequested:this.state.helpRequested,showHelp:this.showHelp,closeHelp:this.closeHelp,handleClickBuy:this.handleClickBuy,chatMessage:this.props.chatMessage,onCheerInvalid:this.props.onCheerInvalid,onAnonymousToggle:this.props.onAnonymousToggle}))},t}(l.Component);var it=Object(c.d)(Object(u.a)(O,{name:"data",skip:function(e){return!e.channelID}}),Object(u.a)(y,{name:"setBitsUserSettings"}),Object(m.a)((function(e){return{query:O,topic:e.user?Object(f.R)(e.user.id):"",type:p.PubsubMessageType.UserBitsFirstPurchase,skip:!e.user,mutator:function(t,n){return!n.currentUser||t.message_type!==k.b.FirstPurchase||e.user&&t.data.user_id!==e.user.id?n:(n.currentUser.bitsUserState===b.t.NEW_USER&&(n=s(n,(function(e){return e.currentUser.bitsUserState}),(function(){return b.t.ACQUIRED}))),n)}}})),Object(nt.b)((function(e){return{bitsConfig:e.bitsConfig,setBitsCardOpenState:e.setBitsCardOpenState}})))(rt);var at=Object(i.b)((function(e){return{user:Object(a.e)(e),isStaff:Object(a.g)(e)}}))(it);n.d(t,"BitsCard",(function(){return at}))},u0cu:function(e,t,n){},wmIm:function(e,t,n){var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsAdOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsAdOffer"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBundleOffer"},directives:[]}]}}]}}],loc:{start:0,end:256}};r.loc.source={body:'#import "twilight/features/bits/models/bits-bundle-offer-fragment.gql"\n#import "twilight/features/bits/models/bits-ad-offer-fragment.gql"\nfragment bitsOffer on BitsOffer {\n... on BitsAdOffer{\n...bitsAdOffer\n}\n... on BitsBundleOffer {\n...bitsBundleOffer\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}))}r.definitions=r.definitions.concat(a(n("UqM8").definitions)),r.definitions=r.definitions.concat(a(n("ys9W").definitions)),e.exports=r},wtKP:function(e,t,n){},yGGv:function(e,t,n){},ys9W:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsAdOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsAdOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]}]}}],loc:{start:0,end:52}};n.loc.source={body:"fragment bitsAdOffer on BitsAdOffer {\nid\ntype\nbits\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"zmH+":function(e,t,n){},zmay:function(e,t,n){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Bits_BuyCard_Offers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withChannel"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idSHA1"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withChannel"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:424}};r.loc.source={body:'#import "twilight/features/bits/models/bits-offer-fragment.gql"\nquery Bits_BuyCard_Offers($withChannel: Boolean! $isLoggedIn: Boolean! $channelLogin: String!) {\nbitsOffers @skip(if: $isLoggedIn) {\n...bitsOffer\n}\ncurrentUser @include(if: $isLoggedIn) {\nid\nidSHA1\nbitsBalance\nbitsOffers {\n...bitsOffer\n}\n}\nuser(login: $channelLogin) @include(if: $withChannel) {\nid\ndisplayName\ncheer {\nid\nsettings {\nid\ncheerMinimumBits\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};r.definitions=r.definitions.concat(n("wmIm").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=r,e.exports.Bits_BuyCard_Offers=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,i=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){i.has(e)||(i.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return i.forEach((function(t){var r=o(e,t);r&&n.definitions.push(r)})),n}(r,"Bits_BuyCard_Offers")},zrSb:function(e,t,n){"use strict";var r,i=n("mrSG"),a=n("q1tI"),o=n("4rCz"),s=n("5zXJ"),l=n("RiD7"),c=n("x1M1"),d=n("sUnt"),u=n("yymn"),m=n("+80q"),p=n("Jsra"),h=n("dEDE"),f=(n("Y18C"),{themed:!0,dark:{"1x":s.g+"/bits-card/intro/dark/bits-new-user-dark.gif"},light:{"1x":s.g+"/bits-card/intro/light/bits-new-user-light.gif"}});!function(e){e.Heading="bits-card-intro-heading-selector",e.Description="bits-card-intro-description-selector",e.Image="bits-card-intro-image-selector",e.FirstTimePurchase="bits-card-intro-first-time-purchase-selector",e.Skip="bits-card-intro-skip-selector"}(r||(r={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackLearnMore=function(e){t.props.trackBitsCardInteraction(l.c.NewUserLearnMore)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.onUserSkip,n=e.onUserClickFirstTimePurchaseDiscount;return a.createElement(d.a,{padding:{left:2,right:2,y:1}},a.createElement(d.a,{display:u.g.Flex,justifyContent:u.l.Center},a.createElement(m.a,{type:m.e.H4,"data-test-selector":r.Heading,bold:!0},Object(o.d)("Join the party with Bits","BitsIntro"))),a.createElement(d.a,{margin:{top:1}},a.createElement(m.a,{type:m.e.P,"data-test-selector":r.Description},Object(o.d)("Celebrate big moments and support your favorite streamers with special animated emotes!","BitsIntro"),"",a.createElement(p.a,{linkTo:"/bits",targetBlank:!0,onClick:this.trackLearnMore},Object(o.d)("Learn more","BitsIntro")))),a.createElement(d.a,{margin:{top:2,bottom:2},display:u.g.Flex,justifyContent:u.l.Center,className:"bits-card-intro__gif-wrapper"},a.createElement(c.a,{sources:f,"data-test-selector":r.Image})),a.createElement(h.a,{onClick:n,"data-test-selector":r.FirstTimePurchase,fullWidth:!0},Object(o.d)("First-Time Purchaser Discount","BitsIntro")),t&&a.createElement(h.a,{onClick:t,type:h.d.Text,"data-test-selector":r.Skip,fullWidth:!0},Object(o.d)("Skip","BitsIntro")))},t}(a.PureComponent);n.d(t,"a",(function(){return b}))}}]);