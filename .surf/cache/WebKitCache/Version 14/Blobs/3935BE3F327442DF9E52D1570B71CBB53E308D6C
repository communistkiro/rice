(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"0Ex5":function(e,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ritualToken"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RitualToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:64}};t.loc.source={body:"fragment ritualToken on RitualToken {\nid\nexpiresAt\nstatus\ntype\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},IWck:function(e,n,t){"use strict";var i,a;t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return a})),function(e){e.DismissToken="token_dismissed",e.RedeemToken="token_redeemed",e.RequestEligibility="eligibility_requested",e.RequestToken="token_requested"}(i||(i={})),function(e){e.Click="clicked_manage_in_dashboards",e.Dismiss="dismissed"}(a||(a={}))},Oxg6:function(e,n,t){},QhAx:function(e,n,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewChatterRitual_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ritualTokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:167}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nquery NewChatterRitual_Channel($id: ID!) {\nchannel: user(id: $id) {\nid\nself {\nritualTokens {\n...ritualToken\n}\n}\nstream {\nid\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(t("0Ex5").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var r={};function o(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var i=n.type;"NamedType"===i.kind&&t.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),r[e.name.value]=n}})),e.exports=i,e.exports.NewChatterRitual_Channel=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=r[n]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var i=o(e,n);i&&t.definitions.push(i)})),t}(i,"NewChatterRitual_Channel")},TjZe:function(e,n,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RedeemNewChatterToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemRitualTokenInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemRitualToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}}]}}],loc:{start:0,end:182}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nmutation RedeemNewChatterToken($input: RedeemRitualTokenInput!) {\nredeemRitualToken(input: $input) {\nerror {\ncode\n}\ntoken {\n...ritualToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(t("0Ex5").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var r={};function o(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var i=n.type;"NamedType"===i.kind&&t.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),r[e.name.value]=n}})),e.exports=i,e.exports.RedeemNewChatterToken=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=r[n]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var i=o(e,n);i&&t.definitions.push(i)})),t}(i,"RedeemNewChatterToken")},VyuC:function(e,n,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissNewChatterToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DismissRitualTokenInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissRitualToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}}]}}],loc:{start:0,end:185}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nmutation DismissNewChatterToken($input: DismissRitualTokenInput!) {\ndismissRitualToken(input: $input) {\nerror {\ncode\n}\ntoken {\n...ritualToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(t("0Ex5").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var r={};function o(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var i=n.type;"NamedType"===i.kind&&t.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),r[e.name.value]=n}})),e.exports=i,e.exports.DismissNewChatterToken=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=r[n]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var i=o(e,n);i&&t.definitions.push(i)})),t}(i,"DismissNewChatterToken")},WkKR:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"d",(function(){return s})),t.d(n,"b",(function(){return l})),t.d(n,"e",(function(){return u})),t.d(n,"c",(function(){return d}));var i=t("/7QA"),a=t("2xye"),r=t("IWck"),o=function(e){var n={action:r.b.DismissToken,channel_id:e.channelID,user_banner:e.bannerMessage,user_message:null};i.o.track(a.SpadeEventType.NewChatterTokenStatus,n)},s=function(e){var n={action:r.b.RedeemToken,channel_id:e.channelID,user_banner:e.bannerMessage,user_message:e.userMessage};i.o.track(a.SpadeEventType.NewChatterTokenStatus,n)},l=function(e){var n={action:r.b.RequestEligibility,channel_id:e.channelID,user_banner:null,user_message:null};i.o.track(a.SpadeEventType.NewChatterTokenStatus,n)},u=function(e){var n={action:r.b.RequestToken,channel_id:e.channelID,user_banner:e.bannerMessage,user_message:null};i.o.track(a.SpadeEventType.NewChatterTokenStatus,n)},d=function(e){var n={action:e.action,channel_id:e.channelID};i.o.track(a.SpadeEventType.NewChatterOnboardingInteraction,n)}},Y9qK:function(e,n,t){"use strict";t.r(n);var i,a=t("mrSG"),r=t("w09P"),o=t("q1tI"),s=t("/MKj"),l=t("ANjH"),u=t("/7QA"),d=t("yR8l"),c=t("x7UT"),m=t("eDVu"),f=t("0Log"),k=t("geRD"),p=t("/aPz"),h=t("DMoW"),v=t("kRBY"),T=t("IZXT"),b=t("hO8c"),g=t("RS58"),S=t("jBwP"),y=t("9MrB"),E=t("TApp"),N=t("YXxK"),D=t("wo8Z"),w=t("lNGo"),R=t("WkKR"),O=t("a1OF"),C=t("sUnt"),_=t("b7S+"),I=t("i4Ys"),x=t("Ws8v"),F=t("yymn"),j=t("7d/q"),A=t("C7sF"),M=(t("Oxg6"),[{id:"30259",alt:"HeyGuys"},{id:"81274",alt:"VoHiYo"},{id:"64138",alt:"SeemsGood"}]),q=function(e){function n(n){var t=e.call(this,n)||this;return t.onEmoteClick=function(e){if(t.renderedTokenID){var n=e.currentTarget.dataset.emoteString;n?t.props.onRitualRedeemed(t.renderedTokenID,n):u.k.warn("[NewChatterRitual] Could not find clicked emote ID.")}else u.k.warn("[NewChatterRitual] Could not find clicked Ritual token.")},t.onCloseButtonClick=function(){t.renderedTokenID?t.props.onRitualDismissed(t.renderedTokenID):u.k.warn("[NewChatterRitual] Could not find clicked Ritual token.")},t.getAvailableToken=function(){return t.props.ritualTokens&&t.props.ritualTokens.find((function(e){return!(!e||e&&(e.type!==h.Tc.NEW_CHATTER||e.status!==h.Sc.AVAILABLE))&&(!e.expiresAt||Date.now()<new Date(e.expiresAt).valueOf())}))||null},t.renderedTokenID=null,t}return Object(a.__extends)(n,e),n.prototype.render=function(){var e=this,n=this.getAvailableToken();if(this.renderedTokenID=n?n.id:null,!n)return null;var t=M.map((function(n){return o.createElement(C.a,{key:n.id,flexShrink:0,margin:{right:.5}},o.createElement(_.a,{label:n.alt},o.createElement(I.a,{type:I.b.Alpha,onClick:e.onEmoteClick,"data-emote-string":n.alt,"data-test-selector":"emote-button"},o.createElement(C.a,{padding:.5},o.createElement("img",{className:"new-chatter-ritual__emote",src:Object(O.d)(n.id,3)})))))}));return o.createElement(x.a,{background:F.d.Base,border:!0,className:"new-chatter-ritual",margin:{x:2,bottom:.5},padding:{left:.5,y:.5}},o.createElement(C.a,{alignItems:F.b.Center,display:F.g.Flex,flexWrap:F.i.NoWrap},o.createElement(C.a,{flexShrink:1,margin:{right:.5}},this.props.bannerMessage),t,o.createElement(x.a,{borderLeft:!0,flexShrink:0},o.createElement(j.a,{ariaLabel:"close",icon:A.a.Close,onClick:this.onCloseButtonClick,size:j.b.Large,"data-test-selector":"dismiss-button"}))))},n}(o.Component),L=t("QhAx"),P=t("VyuC"),V=t("TjZe"),B=t("s/24"),W=3e5,G=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={closedByError:!1},n.eligibilityTimeouts={},n.expirationTimeouts={},n.getBannerMessage=function(){return Object(u.d)("Click an emote to say hello!","NewChatterRitual")},n.getLiveStatus=function(e){var n=e.pubsub.messages.streamDown?e.pubsub.messages.streamDown.server_time:0,t=e.pubsub.messages.streamUp?e.pubsub.messages.streamUp.server_time:0;return n||t?t>n:e.data&&e.data.channel&&e.data.channel.stream&&!!e.data.channel.stream.id||!1},n.setEligibilityTimeouts=function(e){for(var t=new Set(e.map((function(e){return e.id}))),i=0,a=Object.keys(n.eligibilityTimeouts);i<a.length;i++){var r=a[i];t.has(r)||(clearTimeout(n.eligibilityTimeouts[r]),delete n.eligibilityTimeouts[r])}t.forEach((function(e){n.eligibilityTimeouts[e]||(n.eligibilityTimeouts[e]=setTimeout((function(){delete n.eligibilityTimeouts[e],n.isEligible=!0,n.getLiveStatus(n.props)&&n.requestRitualToken()}),W))}))},n.requestRitualToken=function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var e,n;return Object(a.__generator)(this,(function(t){switch(t.label){case 0:Object(R.e)({bannerMessage:this.getBannerMessage(),channelID:this.props.channelID}),e=Object(k.a)({channelID:this.props.channelID,type:h.Tc.NEW_CHATTER}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.props.requestToken(e)];case 2:return t.sent(),this.isEligible=!1,[3,4];case 3:return n=t.sent(),Object(T.d)()?u.k.warn("Failed to request new chatter ritual token."):u.k.errorAndReport(n,"Failed to request new chatter ritual token."),[3,4];case 4:return[2]}}))}))},n.setExpirationTimeouts=function(e){for(var t=new Set(e.map((function(e){return e.id}))),i=0,a=Object.keys(n.expirationTimeouts);i<a.length;i++){var r=a[i];t.has(r)||(clearTimeout(n.expirationTimeouts[r]),delete n.expirationTimeouts[r])}e.forEach((function(e){if(!n.expirationTimeouts[e.id]&&e.expiresAt&&new Date(e.expiresAt).valueOf()>Date.now()){var t=new Date(e.expiresAt).valueOf()-Date.now();n.expirationTimeouts[e.id]=setTimeout(n.expireRitualToken.bind(e.id),t)}}))},n.expireRitualToken=function(e){delete n.expirationTimeouts[e],Object(k.i)(L,{id:n.props.channelID},(function(n){if(n.channel&&n.channel.self&&n.channel.self.ritualTokens){var t=n.channel.self.ritualTokens.filter((function(n){return n.id===e}));return r(n,(function(e){return e.channel.self.ritualTokens}),(function(){return t}))}return n}))},n.redeemRitualToken=function(e,t){return Object(a.__awaiter)(n,void 0,void 0,(function(){var n,i;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:Object(w.c)({emotePickerSessionID:null,channelID:this.props.channelID,channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,fromNewChatterRitual:!0,subOnlyMode:this.props.isSubsOnlyModeEnabled,player:this.props.isEmbedded||this.props.isPopout?N.a.Embed:N.a.Web,viewerContext:this.props.viewerContext,sendAction:N.b.Click}),Object(R.d)({bannerMessage:this.getBannerMessage(),channelID:this.props.channelID,userMessage:t}),n=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.props.redeemToken(Object(k.b)({channelID:this.props.channelID,type:h.Tc.NEW_CHATTER,messageText:t},{redeemRitualToken:{__typename:"RedeemRitualTokenPayload",error:null,token:{id:e,expiresAt:null,status:h.Sc.REDEEMED,type:h.Tc.NEW_CHATTER,__typename:"RitualToken"}}}))];case 2:return n=a.sent(),[3,4];case 3:return i=a.sent(),Object(T.d)()?u.k.warn("Failed to redeem new chatter ritual."):u.k.errorAndReport(i,"Failed to redeem new chatter ritual."),this.handleGenericError(),[2];case 4:if(n&&n.data&&n.data.redeemRitualToken&&n.data.redeemRitualToken.error)switch(n.data.redeemRitualToken.error.code){case h.Jc.USER_CHAT_BANNED:case h.Jc.FOLLOWER_ONLY_MODE_ENFORCEMENT_FAILED:case h.Jc.SUB_ONLY_MODE_ENFORCEMENT_FAILED:case h.Jc.USER_CHAT_TIMED_OUT:return this.props.onSendMessage(t),this.setState({closedByError:!0}),[2];default:return this.handleGenericError(),[2]}return n&&n.data&&n.data.redeemRitualToken&&n.data.redeemRitualToken.token?[2]:(this.handleGenericError(),[2])}}))}))},n.dismissRitualToken=function(e){return Object(a.__awaiter)(n,void 0,void 0,(function(){var n,t;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:Object(R.a)({bannerMessage:this.getBannerMessage(),channelID:this.props.channelID}),n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.props.dismissToken(Object(k.b)({channelID:this.props.channelID,type:h.Tc.NEW_CHATTER},{dismissRitualToken:{__typename:"DismissRitualTokenPayload",error:null,token:{id:e,expiresAt:null,status:h.Sc.DISMISSED,type:h.Tc.NEW_CHATTER,__typename:"RitualToken"}}}))];case 2:return n=i.sent(),[3,4];case 3:return t=i.sent(),Object(T.d)()?u.k.warn("Failed to redeem new chatter ritual."):u.k.errorAndReport(t,"Failed to redeem new chatter ritual."),[3,4];case 4:return n&&n.data&&n.data.dismissRitualToken&&n.data.dismissRitualToken.token?[2]:(this.handleGenericError(),[2])}}))}))},n.handleGenericError=function(){n.props.onPushMessage(Object(E.a)(Object(u.d)("Something went wrong.","NewChatterRitual"))),n.setState({closedByError:!0})},n.clearAllTimers=function(){for(var e=0,t=Object.keys(n.eligibilityTimeouts);e<t.length;e++){var i=t[e];clearTimeout(n.eligibilityTimeouts[i])}n.eligibilityTimeouts={};for(var a=0,r=Object.keys(n.expirationTimeouts);a<r.length;a++){i=r[a];clearTimeout(n.expirationTimeouts[i])}n.expirationTimeouts={}},n}return Object(a.__extends)(n,e),n.prototype.componentDidUpdate=function(e){e.data&&e.data.loading||!this.props.data||!this.props.data.loading||Object(R.b)({channelID:e.channelID});var n=this.getLiveStatus(e),t=this.getLiveStatus(this.props);if(n!==t&&t&&this.isEligible&&this.requestRitualToken(),this.props.data&&this.props.data.channel&&this.props.data.channel.self&&this.props.data.channel.self.ritualTokens){var i=this.props.data.channel.self.ritualTokens;this.setEligibilityTimeouts(i.filter((function(e){return e.status===h.Sc.ELIGIBLE}))),this.setExpirationTimeouts(i.filter((function(e){return!!e.expiresAt})))}else this.clearAllTimers()},n.prototype.componentWillUnmount=function(){this.clearAllTimers()},n.prototype.render=function(){return this.props.data&&this.props.data.channel?this.state.closedByError||!this.getLiveStatus(this.props)?null:this.props.hasPrivateCallouts||this.props.hasChatInputTray?null:o.createElement(q,{bannerMessage:this.getBannerMessage(),onRitualDismissed:this.dismissRitualToken,onRitualRedeemed:this.redeemRitualToken,ritualTokens:this.props.data.channel.self&&this.props.data.channel.self.ritualTokens?this.props.data.channel.self.ritualTokens:[]}):null},n}(o.Component);function H(e){return!e.firstPageLoaded||!Object(D.a)()||!e.isLoggedIn||e.isEmbedded||e.isPopout}var U=Object(l.d)(Object(s.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(v.f)(e)}}),null),Object(d.a)(L,{options:function(e){return{variables:{id:e.channelID}}},skip:H}),Object(m.a)((function(e){return{query:L,variables:{id:e.channelID},topic:Object(p.M)(e.channelID),type:f.PubsubMessageType.UpdatedChannelChatProperty,mutator:function(n,t){if(n.data.is_rituals_enabled)setTimeout((function(){e.data&&e.data.refetch&&e.data.refetch()}));else if(t.channel&&t.channel.self)return r(t,(function(e){return e.channel.self.ritualTokens}),(function(){return[]}));return t},skip:H(e)}})),Object(c.a)([{topic:function(e){return Object(p.W)(e.channelID)},mapMessageTypesToProps:(i={},i[f.PubsubMessageType.ChannelStreamUp]="streamUp",i[f.PubsubMessageType.ChannelStreamDown]="streamDown",i),skip:H}]),Object(d.a)(P,{name:"dismissToken"}),Object(d.a)(V,{name:"redeemToken"}),Object(d.a)(B,{name:"requestToken"}),Object(S.c)((function(e){return{isSubsOnlyModeEnabled:e.subsOnlyMode}})),Object(y.b)((function(e){return e})),Object(b.b)((function(e){return{hasPrivateCallouts:e.callouts.length>0}})),Object(g.b)((function(e){return{hasChatInputTray:Boolean(e.tray)}})))(G);t.d(n,"NewChatterRitualContainer",(function(){return G})),t.d(n,"NewChatterRitual",(function(){return U}))},"s/24":function(e,n,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RequestNewChatterToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RequestRitualTokenInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"requestRitualToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}}]}}],loc:{start:0,end:185}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nmutation RequestNewChatterToken($input: RequestRitualTokenInput!) {\nrequestRitualToken(input: $input) {\nerror {\ncode\n}\ntoken {\n...ritualToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(t("0Ex5").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var r={};function o(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var i=n.type;"NamedType"===i.kind&&t.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),r[e.name.value]=n}})),e.exports=i,e.exports.RequestNewChatterToken=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=r[n]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var i=o(e,n);i&&t.definitions.push(i)})),t}(i,"RequestNewChatterToken")},wo8Z:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var i=t("/7QA"),a=function(){return i.m.get("ritualsFeatureFlagOverride",i.b.get("viewer_milestones_enabled",!1))}}}]);